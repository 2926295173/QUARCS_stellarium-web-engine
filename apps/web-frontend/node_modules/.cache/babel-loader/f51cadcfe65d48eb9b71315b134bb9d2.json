{"remainingRequest":"/app/node_modules/thread-loader/dist/cjs.js!/app/node_modules/babel-loader/lib/index.js!/app/node_modules/cache-loader/dist/cjs.js??ref--1-0!/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/src/components/HistogramPanel.vue?vue&type=script&lang=js&","dependencies":[{"path":"/app/src/components/HistogramPanel.vue","mtime":1739424155000},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":1707125360000},{"path":"/app/node_modules/thread-loader/dist/cjs.js","mtime":1707125360000},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":1707125360000},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":1707125360000},{"path":"/app/node_modules/vue-loader/lib/index.js","mtime":1707125450000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IEhpc3RvZ3JhbUNoYXJ0IGZyb20gJy4vQ2hhcnQtSGlzdG9ncmFtLnZ1ZSc7CmltcG9ydCBEaWFsS25vYiBmcm9tICcuL0RpYWwtS25vYi52dWUnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0hpc3RvZ3JhbVBhbmVsJywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYm90dG9tOiAxMCwKICAgICAgQ29tcG9uZW50UGFkZGluZzogMCwKICAgICAgaGVpZ2h0OiA5MCwKICAgICAgaGlzdG9ncmFtX21pbjogMCwKICAgICAgaGlzdG9ncmFtX21heDogMjU1CiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgSGlzdG9ncmFtQ2hhcnQ6IEhpc3RvZ3JhbUNoYXJ0LAogICAgRGlhbEtub2I6IERpYWxLbm9iCiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy4kYnVzLiRvbignQXV0b0hpc3RvZ3JhbU51bScsIHRoaXMuc2V0QXV0b0hpc3RvZ3JhbU51bSk7CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy51cGRhdGVQb3NpdGlvbigpOyAvLyDliJ3lp4vljJbkvY3nva4KCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy51cGRhdGVQb3NpdGlvbik7CiAgfSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkgewogICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMudXBkYXRlUG9zaXRpb24pOwogIH0sCiAgbWV0aG9kczogewogICAgdXBkYXRlUG9zaXRpb246IGZ1bmN0aW9uIHVwZGF0ZVBvc2l0aW9uKCkgewogICAgICB2YXIgc2NyZWVuV2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDsKICAgICAgdmFyIGhhbGZXaWR0aCA9IHNjcmVlbldpZHRoIC8gMiAtIDI1MDsKICAgICAgdGhpcy5Db21wb25lbnRQYWRkaW5nID0gTWF0aC5tYXgoaGFsZldpZHRoLCAxNzApOyAvLyDorqHnrpflrr3luqYKCiAgICAgIHZhciBuZXdXaWR0aCA9IHNjcmVlbldpZHRoIC0gdGhpcy5Db21wb25lbnRQYWRkaW5nICogMjsgLy8gY29uc29sZS5sb2coJ1VwZGF0ZSBuZXcgd2lkdGg6JywgbmV3V2lkdGgpOwoKICAgICAgdGhpcy4kYnVzLiRlbWl0KCd1cGRhdGVIaXN0b2dyYW1XaWR0aCcsIG5ld1dpZHRoKTsKICAgIH0sCiAgICBBdXRvSGlzdG9ncmFtOiBmdW5jdGlvbiBBdXRvSGlzdG9ncmFtKCkgewogICAgICB0aGlzLiRidXMuJGVtaXQoJ0hhbmRsZUhpc3RvZ3JhbU51bScsIHRoaXMuaGlzdG9ncmFtX21pbiwgdGhpcy5oaXN0b2dyYW1fbWF4KTsKICAgIH0sCiAgICBSZXNldEhpc3RvZ3JhbTogZnVuY3Rpb24gUmVzZXRIaXN0b2dyYW0oKSB7CiAgICAgIHRoaXMuJGJ1cy4kZW1pdCgnSGFuZGxlSGlzdG9ncmFtTnVtJywgMCwgMjU1KTsKICAgIH0sCiAgICBzZXRBdXRvSGlzdG9ncmFtTnVtOiBmdW5jdGlvbiBzZXRBdXRvSGlzdG9ncmFtTnVtKG1pbiwgbWF4KSB7CiAgICAgIHRoaXMuaGlzdG9ncmFtX21pbiA9IG1pbjsKICAgICAgdGhpcy5oaXN0b2dyYW1fbWF4ID0gbWF4OwogICAgfSwKICAgIGNhbGNXaGl0ZUJhbGFuY2VHYWluczogZnVuY3Rpb24gY2FsY1doaXRlQmFsYW5jZUdhaW5zKCkgewogICAgICB0aGlzLiRidXMuJGVtaXQoJ2NhbGNXaGl0ZUJhbGFuY2VHYWlucycpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["HistogramPanel.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA,OAAA,cAAA,MAAA,uBAAA;AACA,OAAA,QAAA,MAAA,iBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,gBADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,EADA;AAEA,MAAA,gBAAA,EAAA,CAFA;AAGA,MAAA,MAAA,EAAA,EAHA;AAKA,MAAA,aAAA,EAAA,CALA;AAMA,MAAA,aAAA,EAAA;AANA,KAAA;AAQA,GAXA;AAYA,EAAA,UAAA,EAAA;AACA,IAAA,cAAA,EAAA,cADA;AAEA,IAAA,QAAA,EAAA;AAFA,GAZA;AAgBA,EAAA,OAhBA,qBAgBA;AACA,SAAA,IAAA,CAAA,GAAA,CAAA,kBAAA,EAAA,KAAA,mBAAA;AACA,GAlBA;AAmBA,EAAA,OAnBA,qBAmBA;AACA,SAAA,cAAA,GADA,CACA;;AACA,IAAA,MAAA,CAAA,gBAAA,CAAA,QAAA,EAAA,KAAA,cAAA;AACA,GAtBA;AAuBA,EAAA,aAvBA,2BAuBA;AACA,IAAA,MAAA,CAAA,mBAAA,CAAA,QAAA,EAAA,KAAA,cAAA;AACA,GAzBA;AA0BA,EAAA,OAAA,EAAA;AACA,IAAA,cADA,4BACA;AACA,UAAA,WAAA,GAAA,MAAA,CAAA,UAAA;AACA,UAAA,SAAA,GAAA,WAAA,GAAA,CAAA,GAAA,GAAA;AACA,WAAA,gBAAA,GAAA,IAAA,CAAA,GAAA,CAAA,SAAA,EAAA,GAAA,CAAA,CAHA,CAKA;;AACA,UAAA,QAAA,GAAA,WAAA,GAAA,KAAA,gBAAA,GAAA,CAAA,CANA,CAOA;;AACA,WAAA,IAAA,CAAA,KAAA,CAAA,sBAAA,EAAA,QAAA;AACA,KAVA;AAWA,IAAA,aAXA,2BAWA;AACA,WAAA,IAAA,CAAA,KAAA,CAAA,oBAAA,EAAA,KAAA,aAAA,EAAA,KAAA,aAAA;AACA,KAbA;AAcA,IAAA,cAdA,4BAcA;AACA,WAAA,IAAA,CAAA,KAAA,CAAA,oBAAA,EAAA,CAAA,EAAA,GAAA;AACA,KAhBA;AAiBA,IAAA,mBAjBA,+BAiBA,GAjBA,EAiBA,GAjBA,EAiBA;AACA,WAAA,aAAA,GAAA,GAAA;AACA,WAAA,aAAA,GAAA,GAAA;AACA,KApBA;AAqBA,IAAA,qBArBA,mCAqBA;AACA,WAAA,IAAA,CAAA,KAAA,CAAA,uBAAA;AACA;AAvBA;AA1BA,CAAA","sourcesContent":["<template>\n  <transition name=\"panel\">\n    <div class=\"chart-panel\" :style=\"{ bottom: bottom + 'px', left: ComponentPadding + 'px', right: ComponentPadding + 'px', height: height + 'px' }\">\n    <HistogramChart ref=\"histogramchart\" class=\"histogram-chart\"/>\n    <DialKnob class=\"dial-knob\"/>\n    <div class=\"buttons-container\">\n      <button  @touchend=\"calcWhiteBalanceGains\" class=\"get-click btn-Reset\">\n        <div style=\"display: flex; justify-content: center; align-items: center;\">\n          <img src=\"@/assets/images/svg/ui/WhiteBalance.svg\" height=\"20px\" style=\"min-height: 20px; pointer-events: none;\"></img>\n        </div>\n      </button>\n\n      <button  @touchend=\"AutoHistogram\" class=\"get-click btn-Auto\"><v-icon>mdi-alpha-a-circle-outline</v-icon></button>\n\n      <button  @touchend=\"ResetHistogram\" class=\"get-click btn-Reset\">\n        <div style=\"display: flex; justify-content: center; align-items: center;\">\n          <img src=\"@/assets/images/svg/ui/reset.svg\" height=\"25px\" style=\"min-height: 25px; pointer-events: none;\"></img>\n        </div>\n      </button>\n\n    </div>\n\n  </div>\n</transition>\n</template>\n\n<script>\nimport HistogramChart from './Chart-Histogram.vue'\nimport DialKnob from './Dial-Knob.vue'\n\nexport default {\n  name: 'HistogramPanel',\n  data() {\n    return {\n      bottom: 10,\n      ComponentPadding: 0,\n      height: 90,\n\n      histogram_min: 0,\n      histogram_max: 255,\n    };\n  },\n  components: {\n    HistogramChart,\n    DialKnob,\n  },\n  created() {\n    this.$bus.$on('AutoHistogramNum', this.setAutoHistogramNum);\n  },\n  mounted() {\n    this.updatePosition(); // 初始化位置\n    window.addEventListener('resize', this.updatePosition);\n  },\n  beforeDestroy() {\n    window.removeEventListener('resize', this.updatePosition);\n  },\n  methods: {\n    updatePosition() {\n      const screenWidth = window.innerWidth;\n      const halfWidth = screenWidth / 2 - 250;\n      this.ComponentPadding = Math.max(halfWidth, 170);\n\n      // 计算宽度\n      const newWidth = screenWidth - (this.ComponentPadding * 2);\n      // console.log('Update new width:', newWidth);\n      this.$bus.$emit('updateHistogramWidth', newWidth);\n    },\n    AutoHistogram() {\n      this.$bus.$emit('HandleHistogramNum', this.histogram_min, this.histogram_max);\n    },\n    ResetHistogram() {\n      this.$bus.$emit('HandleHistogramNum', 0 , 255);\n    },\n    setAutoHistogramNum(min, max) {\n      this.histogram_min = min;\n      this.histogram_max = max;\n    },\n    calcWhiteBalanceGains() {\n      this.$bus.$emit('calcWhiteBalanceGains');\n    },\n  }\n}\n</script>\n\n<style scoped>\n.chart-panel {\n  position: absolute;\n  background-color: rgba(128, 128, 128, 0.5);\n  backdrop-filter: blur(5px);\n  border-radius: 10px; \n  transition: width 0.2s ease;\n}\n\n@keyframes showPanelAnimation {\n  from {\n    bottom: -150px;\n  }\n  to {\n    bottom: 10px;\n  }\n}\n\n@keyframes hidePanelAnimation {\n  from {\n    bottom: 10px;\n  }\n  to {\n    bottom: -150px;\n  }\n}\n\n.panel-enter-active {\n  animation: showPanelAnimation 0.15s forwards;\n}\n\n.panel-leave-active {\n  animation: hidePanelAnimation 0.15s forwards;\n}\n\n.histogram-chart {\n  position:absolute;\n  top: 5px;\n  left: 5px;\n}\n\n.dial-knob {\n  position:absolute;\n  top: 5px;\n  left: 5px;\n}\n\n.buttons-container {\n  display: flex;\n  justify-content: space-between;\n  position: absolute;\n  top: -35px;\n  left: 25%;\n  right: 25%;\n}\n\n.btn-Auto {\n  width: 30px;\n  height: 30px;\n\n  user-select: none;\n  background-color: rgba(64, 64, 64, 0.5);\n  backdrop-filter: blur(5px);\n  border: none;\n  border-radius: 50%; \n  box-sizing: border-box;\n}\n\n.btn-Reset {\n  width: 30px;\n  height: 30px;\n\n  user-select: none;\n  background-color: rgba(64, 64, 64, 0.5);\n  backdrop-filter: blur(5px);\n  border: none;\n  border-radius: 50%; \n  box-sizing: border-box;\n}\n\n.btn-WhiteBalance {\n  width: 30px;\n  height: 30px;\n\n  user-select: none;\n  background-color: rgba(64, 64, 64, 0.5);\n  backdrop-filter: blur(5px);\n  border: none;\n  border-radius: 50%; \n  box-sizing: border-box;\n}\n\n.btn-Auto:active,\n.btn-Reset:active,\n.btn-WhiteBalance:active {\n  transform: scale(0.95); /* 点击时缩小按钮 */\n  background-color: rgba(255, 255, 255, 0.7);\n}\n\n</style>\n\n"],"sourceRoot":"src/components"}]}