{"remainingRequest":"/app/node_modules/thread-loader/dist/cjs.js!/app/node_modules/babel-loader/lib/index.js!/app/node_modules/cache-loader/dist/cjs.js??ref--1-0!/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/src/components/location-mgr.vue?vue&type=script&lang=js&","dependencies":[{"path":"/app/src/components/location-mgr.vue","mtime":1749193651850},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":1707125360000},{"path":"/app/node_modules/thread-loader/dist/cjs.js","mtime":1707125360000},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":1707125360000},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":1707125360000},{"path":"/app/node_modules/vue-loader/lib/index.js","mtime":1707125450000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5tYXRjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci50by1maXhlZC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBzd2ggZnJvbSAnQC9hc3NldHMvc3dfaGVscGVycy5qcyc7CmltcG9ydCB7IExNYXAsIExUaWxlTGF5ZXIsIExNYXJrZXIsIExDaXJjbGUsIExUb29sdGlwLCBMQ29udHJvbFpvb20gfSBmcm9tICd2dWUyLWxlYWZsZXQnOwppbXBvcnQgeyBMIH0gZnJvbSAnbGVhZmxldC1jb250cm9sLWdlb2NvZGVyL2Rpc3QvQ29udHJvbC5HZW9jb2Rlci5qcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbW9kZTogJ3BpY2snLAogICAgICBwaWNrTG9jYXRpb246IHVuZGVmaW5lZCwKICAgICAgc2VsZWN0ZWRLbm93bkxvY2F0aW9uOiB1bmRlZmluZWQsCiAgICAgIG1hcENlbnRlcjogWzQzLjYsIDEuNDMzM10sCiAgICAgIHVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MC90aWxlcy97en0ve3h9L3t5fS5wbmcnLAogICAgICBvZmZsaW5lVXJsOiAnL3N0YXRpYy9tYXAtdGlsZXMve3p9L3t4fS97eX0ucG5nJwogICAgfTsKICB9LAogIHByb3BzOiBbJ3Nob3dNeUxvY2F0aW9uJywgJ2tub3duTG9jYXRpb25zJywgJ3N0YXJ0TG9jYXRpb24nLCAncmVhbExvY2F0aW9uJ10sCiAgY29tcHV0ZWQ6IHsKICAgIGRvU2hvd015TG9jYXRpb246IGZ1bmN0aW9uIGRvU2hvd015TG9jYXRpb24oKSB7CiAgICAgIHJldHVybiB0aGlzLnNob3dNeUxvY2F0aW9uID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IHRoaXMuc2hvd015TG9jYXRpb247CiAgICB9LAogICAgcGlja0xvY2F0aW9uTW9kZTogZnVuY3Rpb24gcGlja0xvY2F0aW9uTW9kZSgpIHsKICAgICAgcmV0dXJuIHRoaXMubW9kZSA9PT0gJ3BpY2snOwogICAgfSwKICAgIGtub3duTG9jYXRpb25Nb2RlOiBmdW5jdGlvbiBrbm93bkxvY2F0aW9uTW9kZSgpIHsKICAgICAgcmV0dXJuIHRoaXMubW9kZSA9PT0gJ2tub3duJzsKICAgIH0sCiAgICBsb2NhdGlvbkZvckRldGFpbDogZnVuY3Rpb24gbG9jYXRpb25Gb3JEZXRhaWwoKSB7CiAgICAgIGlmICh0aGlzLnBpY2tMb2NhdGlvbk1vZGUgJiYgdGhpcy5waWNrTG9jYXRpb24gPT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiB0aGlzLnN0YXJ0TG9jYXRpb247CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLnBpY2tMb2NhdGlvbk1vZGUgPyB0aGlzLnBpY2tMb2NhdGlvbiA6IHRoaXMuc2VsZWN0ZWRLbm93bkxvY2F0aW9uOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIHN0YXJ0TG9jYXRpb246IGZ1bmN0aW9uIHN0YXJ0TG9jYXRpb24oKSB7CiAgICAgIHRoaXMuc2V0UGlja0xvY2F0aW9uKHRoaXMuc3RhcnRMb2NhdGlvbik7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICB0aGlzLnNldFBpY2tMb2NhdGlvbih0aGlzLnN0YXJ0TG9jYXRpb24pOyAvLyDmo4DmtYvnprvnur/nk6bniYfmnI3liqHlmajmmK/lkKblj6/nlKgKCiAgICB0aGlzLmNoZWNrVGlsZVNlcnZlckF2YWlsYWJpbGl0eSgpOwogICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICB2YXIgbWFwID0gX3RoaXMuJHJlZnMubXlNYXAubWFwT2JqZWN0OwoKICAgICAgbWFwLl9vblJlc2l6ZSgpOyAvLyDms6jph4rmjonlnKjnur/lnLDnkIbnvJbnoIHmnI3liqHvvIzmlLnkuLrnprvnur/mkJzntKIKICAgICAgLy8gdmFyIGdlb2NvZGVyID0gbmV3IEwuQ29udHJvbC5HZW9jb2Rlcih7CiAgICAgIC8vICAgZGVmYXVsdE1hcmtHZW9jb2RlOiBmYWxzZSwKICAgICAgLy8gICBwb3NpdGlvbjogJ3RvcGxlZnQnLAogICAgICAvLyAgIGNvbGxhcHNlZDogZmFsc2UKICAgICAgLy8gfSkub24oJ21hcmtnZW9jb2RlJywgZnVuY3Rpb24gKGUpIHsKICAgICAgLy8gICAvLyAuLi4g5Y6f5pyJ5Luj56CBCiAgICAgIC8vIH0pCiAgICAgIC8vIGdlb2NvZGVyLmFkZFRvKG1hcCkKICAgICAgLy8g5re75Yqg56a757q/5pCc57Si5o6n5Lu2CgoKICAgICAgX3RoaXMuYWRkT2ZmbGluZVNlYXJjaENvbnRyb2wobWFwKTsKICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgc2VsZWN0S25vd25Mb2NhdGlvbjogZnVuY3Rpb24gc2VsZWN0S25vd25Mb2NhdGlvbihsb2MpIHsKICAgICAgdGhpcy5zZWxlY3RlZEtub3duTG9jYXRpb24gPSBsb2M7CiAgICAgIHRoaXMuc2V0S25vd25Mb2NhdGlvbk1vZGUoKTsKICAgICAgdGhpcy5tYXBDZW50ZXIgPSBbbG9jLmxhdCwgbG9jLmxuZ107CiAgICB9LAogICAgdXNlTG9jYXRpb246IGZ1bmN0aW9uIHVzZUxvY2F0aW9uKCkgewogICAgICB0aGlzLiRlbWl0KCdsb2NhdGlvblNlbGVjdGVkJywgdGhpcy5sb2NhdGlvbkZvckRldGFpbCk7CiAgICAgIHRoaXMuJGVtaXQoJ3Jlc2V0TG9jYXRpb24nLCB0aGlzLmxvY2F0aW9uRm9yRGV0YWlsLmxhdCwgdGhpcy5sb2NhdGlvbkZvckRldGFpbC5sbmcpOwogICAgfSwKICAgIHNldFBpY2tMb2NhdGlvbk1vZGU6IGZ1bmN0aW9uIHNldFBpY2tMb2NhdGlvbk1vZGUoKSB7CiAgICAgIHRoaXMubW9kZSA9ICdwaWNrJzsKICAgIH0sCiAgICBzZXRLbm93bkxvY2F0aW9uTW9kZTogZnVuY3Rpb24gc2V0S25vd25Mb2NhdGlvbk1vZGUoKSB7CiAgICAgIHRoaXMubW9kZSA9ICdrbm93bic7CiAgICB9LAogICAgc2V0UGlja0xvY2F0aW9uOiBmdW5jdGlvbiBzZXRQaWNrTG9jYXRpb24obG9jKSB7CiAgICAgIGlmIChsb2MuYWNjdXJhY3kgPCAxMDApIHsKICAgICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5rbm93bkxvY2F0aW9ucyksCiAgICAgICAgICAgIF9zdGVwOwoKICAgICAgICB0cnkgewogICAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgdmFyIGwgPSBfc3RlcC52YWx1ZTsKICAgICAgICAgICAgdmFyIGQgPSBzd2guZ2V0RGlzdGFuY2VGcm9tTGF0TG9uSW5NKGwubGF0LCBsLmxuZywgbG9jLmxhdCwgbG9jLmxuZyk7CgogICAgICAgICAgICBpZiAoZCA8IDEwMCkgewogICAgICAgICAgICAgIHRoaXMuc2VsZWN0S25vd25Mb2NhdGlvbihsKTsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgICAgfQogICAgICB9CgogICAgICB2YXIgcG9zID0gewogICAgICAgIGxhdDogbG9jLmxhdCwKICAgICAgICBsbmc6IGxvYy5sbmcKICAgICAgfTsKICAgICAgdGhpcy5tYXBDZW50ZXIgPSBbcG9zLmxhdCwgcG9zLmxuZ107CiAgICAgIHRoaXMucGlja0xvY2F0aW9uID0gbG9jOwogICAgICB0aGlzLnNldFBpY2tMb2NhdGlvbk1vZGUoKTsKICAgIH0sCiAgICAvLyBDYWxsZWQgd2hlbiB0aGUgdXNlciBjbGlja3Mgb24gdGhlIHNtYWxsIGNyb3NzIGJ1dHRvbgogICAgY2VudGVyT25SZWFsUG9zaXRpb246IGZ1bmN0aW9uIGNlbnRlck9uUmVhbFBvc2l0aW9uKCkgewogICAgICB0aGlzLnNldFBpY2tMb2NhdGlvbih0aGlzLnJlYWxMb2NhdGlvbik7CiAgICB9LAogICAgZHJhZ0VuZDogZnVuY3Rpb24gZHJhZ0VuZChldmVudCkgewogICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgIHZhciBwb3MgPSB7CiAgICAgICAgbGF0OiBldmVudC50YXJnZXQuX2xhdGxuZy5sYXQsCiAgICAgICAgbG5nOiBldmVudC50YXJnZXQuX2xhdGxuZy5sbmcsCiAgICAgICAgYWNjdXJhY3k6IDAKICAgICAgfTsKICAgICAgY29uc29sZS5sb2coJ2RyYWdFbmQgcG9zOiAnICsgcG9zLmxhdCArICcsJyArIHBvcy5sbmcpOwogICAgICBzd2guZ2VvQ29kZVBvc2l0aW9uKHBvcywgdGhhdCkudGhlbihmdW5jdGlvbiAocCkgewogICAgICAgIHRoYXQucGlja0xvY2F0aW9uID0gcDsKICAgICAgICB0aGF0LnNldFBpY2tMb2NhdGlvbk1vZGUoKTsKICAgICAgfSk7CiAgICAgIHRoaXMuJGVtaXQoJ3Jlc2V0TG9jYXRpb24nLCBwb3MubGF0LCBwb3MubG5nKTsKICAgIH0sCiAgICBjaGVja1RpbGVTZXJ2ZXJBdmFpbGFiaWxpdHk6IGZ1bmN0aW9uIGNoZWNrVGlsZVNlcnZlckF2YWlsYWJpbGl0eSgpIHsKICAgICAgdmFyIHRoYXQgPSB0aGlzOyAvLyDmtYvor5XmnKzlnLDnk6bniYfmnI3liqHlmajmmK/lkKblj6/nlKgKCiAgICAgIHZhciB0ZXN0VGlsZVVybCA9IHRoaXMudXJsLnJlcGxhY2UoJ3t6fScsICcxJykucmVwbGFjZSgne3h9JywgJzAnKS5yZXBsYWNlKCd7eX0nLCAnMCcpOwogICAgICBmZXRjaCh0ZXN0VGlsZVVybCwgewogICAgICAgIG1ldGhvZDogJ0hFQUQnLAogICAgICAgIHRpbWVvdXQ6IDMwMDAKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2Uub2spIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCfnprvnur/nk6bniYfmnI3liqHlmajlj6/nlKgnKTsgLy8g5L2/55So5pys5Zyw55Om54mH5pyN5Yqh5ZmoCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRocm93IG5ldyBFcnJvcign5pyN5Yqh5Zmo5LiN5Y+v55SoJyk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZygn5YiH5o2i5Yiw6Z2Z5oCB55Om54mH5paH5Lu2OicsIGVycm9yKTsgLy8g5YiH5o2i5Yiw6Z2Z5oCB55Om54mH5paH5Lu2CgogICAgICAgIHRoYXQudXJsID0gdGhhdC5vZmZsaW5lVXJsOwogICAgICB9KTsKICAgIH0sCiAgICBhZGRPZmZsaW5lU2VhcmNoQ29udHJvbDogZnVuY3Rpb24gYWRkT2ZmbGluZVNlYXJjaENvbnRyb2wobWFwKSB7CiAgICAgIHZhciB0aGF0ID0gdGhpczsgLy8g5Yib5bu656a757q/5pCc57Si5o6n5Lu2CgogICAgICB2YXIgc2VhcmNoQ29udHJvbCA9IEwuQ29udHJvbC5leHRlbmQoewogICAgICAgIG9wdGlvbnM6IHsKICAgICAgICAgIHBvc2l0aW9uOiAndG9wbGVmdCcKICAgICAgICB9LAogICAgICAgIG9uQWRkOiBmdW5jdGlvbiBvbkFkZChtYXApIHsKICAgICAgICAgIHZhciBjb250YWluZXIgPSBMLkRvbVV0aWwuY3JlYXRlKCdkaXYnLCAnbGVhZmxldC1jb250cm9sLWdlb2NvZGVyIGxlYWZsZXQtYmFyJyk7CiAgICAgICAgICBjb250YWluZXIuaW5uZXJIVE1MID0gIlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImxlYWZsZXQtY29udHJvbC1nZW9jb2Rlci1mb3JtXCI+XG4gICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIHBsYWNlaG9sZGVyPVwiXHU4RjkzXHU1MTY1XHU1NzUwXHU2ODA3IChsYXQsbG5nKVwiIC8+XG4gICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiPlx1NjQxQ1x1N0QyMjwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgIjsKICAgICAgICAgIHZhciBpbnB1dCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpOwogICAgICAgICAgdmFyIGJ1dHRvbiA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdidXR0b24nKTsKCiAgICAgICAgICBidXR0b24ub25jbGljayA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdGhhdC5oYW5kbGVPZmZsaW5lU2VhcmNoKGlucHV0LnZhbHVlKTsKICAgICAgICAgIH07CgogICAgICAgICAgaW5wdXQub25rZXlwcmVzcyA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJykgewogICAgICAgICAgICAgIHRoYXQuaGFuZGxlT2ZmbGluZVNlYXJjaChpbnB1dC52YWx1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CgogICAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBuZXcgc2VhcmNoQ29udHJvbCgpLmFkZFRvKG1hcCk7CiAgICB9LAogICAgaGFuZGxlT2ZmbGluZVNlYXJjaDogZnVuY3Rpb24gaGFuZGxlT2ZmbGluZVNlYXJjaChxdWVyeSkgewogICAgICAvLyDop6PmnpDlnZDmoIfovpPlhaUgKOaUr+aMgeWkmuenjeagvOW8jykKICAgICAgdmFyIGNvb3JkUGF0dGVybiA9IC8oLT9cZCtcLj9cZCopWyxcc10rKC0/XGQrXC4/XGQqKS87CiAgICAgIHZhciBtYXRjaCA9IHF1ZXJ5Lm1hdGNoKGNvb3JkUGF0dGVybik7CgogICAgICBpZiAobWF0Y2gpIHsKICAgICAgICB2YXIgbGF0ID0gcGFyc2VGbG9hdChtYXRjaFsxXSk7CiAgICAgICAgdmFyIGxuZyA9IHBhcnNlRmxvYXQobWF0Y2hbMl0pOwoKICAgICAgICBpZiAobGF0ID49IC05MCAmJiBsYXQgPD0gOTAgJiYgbG5nID49IC0xODAgJiYgbG5nIDw9IDE4MCkgewogICAgICAgICAgdmFyIHBvcyA9IHsKICAgICAgICAgICAgbGF0OiBsYXQsCiAgICAgICAgICAgIGxuZzogbG5nLAogICAgICAgICAgICBhY2N1cmFjeTogMAogICAgICAgICAgfTsKICAgICAgICAgIHRoaXMubWFwQ2VudGVyID0gW2xhdCwgbG5nXTsKICAgICAgICAgIHZhciBsb2MgPSB7CiAgICAgICAgICAgIHNob3J0X25hbWU6ICIiLmNvbmNhdChsYXQudG9GaXhlZCgzKSwgIiwgIikuY29uY2F0KGxuZy50b0ZpeGVkKDMpKSwKICAgICAgICAgICAgY291bnRyeTogdGhpcy4kdCgnVW5rbm93bicpLAogICAgICAgICAgICBsbmc6IGxuZywKICAgICAgICAgICAgbGF0OiBsYXQsCiAgICAgICAgICAgIGFsdDogMCwKICAgICAgICAgICAgYWNjdXJhY3k6IDAsCiAgICAgICAgICAgIHN0cmVldF9hZGRyZXNzOiAnJwogICAgICAgICAgfTsKICAgICAgICAgIHRoaXMucGlja0xvY2F0aW9uID0gbG9jOwogICAgICAgICAgdGhpcy5zZXRQaWNrTG9jYXRpb25Nb2RlKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGFsZXJ0KCflnZDmoIfojIPlm7TplJnor6/vvJrnuqzluqYoLTkw5YiwOTAp77yM57uP5bqmKC0xODDliLAxODApJyk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGFsZXJ0KCfor7fovpPlhaXmnInmlYjnmoTlnZDmoIfmoLzlvI/vvJrnuqzluqYs57uP5bqmICjkvovlpoI6IDQwLjEsIDExNi4yKScpOwogICAgICB9CiAgICB9CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBMTWFwOiBMTWFwLAogICAgTFRpbGVMYXllcjogTFRpbGVMYXllciwKICAgIExNYXJrZXI6IExNYXJrZXIsCiAgICBMQ2lyY2xlOiBMQ2lyY2xlLAogICAgTFRvb2x0aXA6IExUb29sdGlwLAogICAgTENvbnRyb2xab29tOiBMQ29udHJvbFpvb20KICB9Cn07"},{"version":3,"sources":["location-mgr.vue"],"names":[],"mappings":"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","sourcesContent":["// Stellarium Web - Copyright (c) 2022 - Stellarium Labs SRL\n//\n// This program is licensed under the terms of the GNU AGPL v3, or\n// alternatively under a commercial licence.\n//\n// The terms of the AGPL v3 license can be found in the main directory of this\n// repository.\n\n<template>\n  <div>\n    <v-row justify=\"space-around\">\n      <v-col cols=\"4\" v-if=\"doShowMyLocation\">\n        <v-list two-line subheader>\n          <v-subheader>{{ $t('My Locations') }}</v-subheader>\n          <v-list-item href=\"javascript:;\" v-for=\"item in knownLocations\" v-bind:key=\"item.id\" @click.native.stop=\"selectKnownLocation(item)\" :style=\"(item && knownLocationMode && selectedKnownLocation && item.id === selectedKnownLocation.id) ? 'background-color: #455a64' : ''\">\n            <v-list-item-icon>\n              <v-icon>mdi-map-marker</v-icon>\n            </v-list-item-icon>\n            <v-list-item-content>\n              <v-list-item-title>{{ item.short_name }}</v-list-item-title>\n              <v-list-item-subtitle>{{ item.country }}</v-list-item-subtitle>\n            </v-list-item-content>\n          </v-list-item>\n        </v-list>\n      </v-col>\n      <v-col cols=\"doShowMyLocation ? 8 : 12\" >\n        <v-card class=\"blue-grey darken-2 white--text\">\n          <v-card-title primary-title>\n            <v-container fluid>\n              <v-row>\n                <v-col>\n                  <div>\n                    <div class=\"text-h5\" style=\"overflow: hidden; white-space: nowrap; text-overflow: ellipsis;\">{{ locationForDetail ? locationForDetail.short_name + ', ' + locationForDetail.country :  '-' }}</div>\n                    <v-btn @click.native.stop=\"useLocation()\" style=\"position: absolute; right: 20px\"><v-icon>mdi-chevron-right</v-icon> {{ $t('Use this location') }}</v-btn>\n                    <div class=\"grey--text text-subtitle-2\" v-if=\"locationForDetail.street_address\">{{ locationForDetail ? (locationForDetail.street_address ? locationForDetail.street_address : $t('Unknown Address')) : '-' }}</div>\n                    <div class=\"grey--text text-subtitle-2\">{{ locationForDetail ? locationForDetail.lat.toFixed(5) + ' ' + locationForDetail.lng.toFixed(5) : '-' }}</div>\n                  </div>\n                </v-col>\n              </v-row>\n            </v-container>\n          </v-card-title>\n          <div style=\"height: 375px\">\n              <!-- <v-btn light fab class=\"mx-0 pa-0\" @click.native.stop=\"centerOnRealPosition()\" style=\"position: absolute; z-index: 10000; bottom: 16px; right: 12px;\">\n                <v-icon>mdi-crosshairs-gps</v-icon>\n              </v-btn> -->\n            <l-map class=\"black--text\" ref=\"myMap\" :center=\"mapCenter\" :zoom=\"10\" style=\"width: 100%; height: 375px;\" :options=\"{zoomControl: false}\">\n              <l-control-zoom position=\"topright\"></l-control-zoom>\n              <l-tile-layer :url=\"url\" attribution='&copy; <a target=\"_blank\" rel=\"noopener\" href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'></l-tile-layer>\n              <l-marker :key=\"loc.id\"\n                  v-for=\"loc in knownLocations\"\n                  :lat-lng=\"[ loc.lat, loc.lng ]\"\n                  :clickable=\"true\"\n                  :opacity=\"(!pickLocationMode && selectedKnownLocation && selectedKnownLocation === loc ? 1.0 : 0.25)\"\n                  @click=\"selectKnownLocation(loc)\"\n                  :draggable=\"!pickLocationMode && selectedKnownLocation && selectedKnownLocation === loc\" @dragend=\"dragEnd\"\n                ></l-marker>\n              <l-circle v-if=\"startLocation\"\n                :lat-lng=\"[ startLocation.lat, startLocation.lng ]\"\n                :radius=\"startLocation.accuracy\"\n                :options=\"{\n                  strokeColor: '#0000FF',\n                  strokeOpacity: 0.5,\n                  strokeWeight: 1,\n                  fillColor: '#0000FF',\n                  fillOpacity: 0.08}\"></l-circle>\n              <l-marker v-if=\"pickLocationMode && pickLocation\" :lat-lng=\"[ pickLocation.lat, pickLocation.lng ]\"\n                :draggable=\"true\" @dragend=\"dragEnd\"><l-tooltip><div class=\"black--text\">Drag to adjust</div></l-tooltip></l-marker>\n            </l-map>\n          </div>\n        </v-card>\n      </v-col>\n    </v-row>\n  </div>\n</template>\n\n<script>\nimport swh from '@/assets/sw_helpers.js'\nimport { LMap, LTileLayer, LMarker, LCircle, LTooltip, LControlZoom } from 'vue2-leaflet'\nimport { L } from 'leaflet-control-geocoder/dist/Control.Geocoder.js'\n\nexport default {\n  data: function () {\n    return {\n      mode: 'pick',\n      pickLocation: undefined,\n      selectedKnownLocation: undefined,\n      mapCenter: [43.6, 1.4333],\n      url: 'http://localhost:8080/tiles/{z}/{x}/{y}.png',\n      offlineUrl: '/static/map-tiles/{z}/{x}/{y}.png'\n    }\n  },\n  props: ['showMyLocation', 'knownLocations', 'startLocation', 'realLocation'],\n  computed: {\n    doShowMyLocation: function () {\n      return this.showMyLocation === undefined ? false : this.showMyLocation\n    },\n    pickLocationMode: function () {\n      return this.mode === 'pick'\n    },\n    knownLocationMode: function () {\n      return this.mode === 'known'\n    },\n    locationForDetail: function () {\n      if (this.pickLocationMode && this.pickLocation === undefined) {\n        return this.startLocation\n      }\n      return this.pickLocationMode ? this.pickLocation : this.selectedKnownLocation\n    }\n  },\n  watch: {\n    startLocation: function () {\n      this.setPickLocation(this.startLocation)\n    }\n  },\n  mounted: function () {\n    const that = this\n    this.setPickLocation(this.startLocation)\n    \n    // 检测离线瓦片服务器是否可用\n    this.checkTileServerAvailability()\n    \n    this.$nextTick(() => {\n      const map = this.$refs.myMap.mapObject\n      map._onResize()\n\n      // 注释掉在线地理编码服务，改为离线搜索\n      // var geocoder = new L.Control.Geocoder({\n      //   defaultMarkGeocode: false,\n      //   position: 'topleft',\n      //   collapsed: false\n      // }).on('markgeocode', function (e) {\n      //   // ... 原有代码\n      // })\n      // geocoder.addTo(map)\n      \n      // 添加离线搜索控件\n      this.addOfflineSearchControl(map)\n    })\n  },\n  methods: {\n    selectKnownLocation: function (loc) {\n      this.selectedKnownLocation = loc\n      this.setKnownLocationMode()\n      this.mapCenter = [loc.lat, loc.lng]\n    },\n    useLocation: function () {\n      this.$emit('locationSelected', this.locationForDetail)\n      this.$emit('resetLocation', this.locationForDetail.lat, this.locationForDetail.lng)\n    },\n    setPickLocationMode: function () {\n      this.mode = 'pick'\n    },\n    setKnownLocationMode: function () {\n      this.mode = 'known'\n    },\n    setPickLocation: function (loc) {\n      if (loc.accuracy < 100) {\n        for (const l of this.knownLocations) {\n          const d = swh.getDistanceFromLatLonInM(l.lat, l.lng, loc.lat, loc.lng)\n          if (d < 100) {\n            this.selectKnownLocation(l)\n            return\n          }\n        }\n      }\n      var pos = { lat: loc.lat, lng: loc.lng }\n      this.mapCenter = [pos.lat, pos.lng]\n      this.pickLocation = loc\n      this.setPickLocationMode()\n    },\n    // Called when the user clicks on the small cross button\n    centerOnRealPosition: function () {\n      this.setPickLocation(this.realLocation)\n    },\n    dragEnd: function (event) {\n      var that = this\n      var pos = { lat: event.target._latlng.lat, lng: event.target._latlng.lng, accuracy: 0 }\n      console.log('dragEnd pos: ' + pos.lat + ',' +pos.lng)\n      swh.geoCodePosition(pos, that).then((p) => { that.pickLocation = p; that.setPickLocationMode() })\n      this.$emit('resetLocation', pos.lat, pos.lng)\n    },\n    checkTileServerAvailability: function () {\n      const that = this\n      // 测试本地瓦片服务器是否可用\n      const testTileUrl = this.url.replace('{z}', '1').replace('{x}', '0').replace('{y}', '0')\n      \n      fetch(testTileUrl, { method: 'HEAD', timeout: 3000 })\n        .then(response => {\n          if (response.ok) {\n            console.log('离线瓦片服务器可用')\n            // 使用本地瓦片服务器\n          } else {\n            throw new Error('服务器不可用')\n          }\n        })\n        .catch(error => {\n          console.log('切换到静态瓦片文件:', error)\n          // 切换到静态瓦片文件\n          that.url = that.offlineUrl\n        })\n    },\n    addOfflineSearchControl: function (map) {\n      const that = this\n      \n      // 创建离线搜索控件\n      const searchControl = L.Control.extend({\n        options: {\n          position: 'topleft'\n        },\n        onAdd: function(map) {\n          const container = L.DomUtil.create('div', 'leaflet-control-geocoder leaflet-bar')\n          container.innerHTML = `\n            <div class=\"leaflet-control-geocoder-form\">\n              <input type=\"text\" placeholder=\"输入坐标 (lat,lng)\" />\n              <button type=\"button\">搜索</button>\n            </div>\n          `\n          \n          const input = container.querySelector('input')\n          const button = container.querySelector('button')\n          \n          button.onclick = function() {\n            that.handleOfflineSearch(input.value)\n          }\n          \n          input.onkeypress = function(e) {\n            if (e.key === 'Enter') {\n              that.handleOfflineSearch(input.value)\n            }\n          }\n          \n          return container\n        }\n      })\n      \n      new searchControl().addTo(map)\n    },\n    handleOfflineSearch: function (query) {\n      // 解析坐标输入 (支持多种格式)\n      const coordPattern = /(-?\\d+\\.?\\d*)[,\\s]+(-?\\d+\\.?\\d*)/\n      const match = query.match(coordPattern)\n      \n      if (match) {\n        const lat = parseFloat(match[1])\n        const lng = parseFloat(match[2])\n        \n        if (lat >= -90 && lat <= 90 && lng >= -180 && lng <= 180) {\n          const pos = { lat: lat, lng: lng, accuracy: 0 }\n          this.mapCenter = [lat, lng]\n          \n          const loc = {\n            short_name: `${lat.toFixed(3)}, ${lng.toFixed(3)}`,\n            country: this.$t('Unknown'),\n            lng: lng,\n            lat: lat,\n            alt: 0,\n            accuracy: 0,\n            street_address: ''\n          }\n          \n          this.pickLocation = loc\n          this.setPickLocationMode()\n        } else {\n          alert('坐标范围错误：纬度(-90到90)，经度(-180到180)')\n        }\n      } else {\n        alert('请输入有效的坐标格式：纬度,经度 (例如: 40.1, 116.2)')\n      }\n    }\n  },\n  components: { LMap, LTileLayer, LMarker, LCircle, LTooltip, LControlZoom }\n}\n</script>\n\n<style>\n.leaflet-control-geocoder-form input {\n  caret-color:#000 !important;\n  color: #000 !important;\n}\n</style>\n"],"sourceRoot":"src/components"}]}