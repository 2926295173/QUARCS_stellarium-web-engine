{"remainingRequest":"/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/src/components/date-time-picker.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/src/components/date-time-picker.vue","mtime":1760085529673},{"path":"/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1756885033541},{"path":"/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/node_modules/thread-loader/dist/cjs.js","mtime":1756885034172},{"path":"/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/node_modules/babel-loader/lib/index.js","mtime":1756885033526},{"path":"/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1756885033541},{"path":"/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/node_modules/vue-loader/lib/index.js","mtime":1756885034208}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgppbXBvcnQgTW9tZW50IGZyb20gJ21vbWVudCcKdmFyIGNsaWNrVGltZW91dAp2YXIgbmJDbGlja1JlcGVhdCA9IDAKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gewogICAgICBzdG9wczogW10sCiAgICAgIHN0b3BDYWNoZUtleTogewogICAgICAgIHNsaWRlclN0YXJ0VGltZTogdW5kZWZpbmVkLAogICAgICAgIGxvY2F0aW9uOiB1bmRlZmluZWQKICAgICAgfQogICAgfQogIH0sCiAgcHJvcHM6IFsndmFsdWUnLCAnbG9jYXRpb24nXSwKICBjb21wdXRlZDogewogICAgLy8gVGhlIE1vbWVudEpTIHRpbWUgaW4gbG9jYWwgdGltZQogICAgbG9jYWxUaW1lOiB7CiAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnN0IG0gPSBNb21lbnQodGhpcy52YWx1ZSkKICAgICAgICBtLmxvY2FsKCkKICAgICAgICByZXR1cm4gbQogICAgICB9LAogICAgICBzZXQ6IGZ1bmN0aW9uIChuZXdWYWx1ZSkgewogICAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgbmV3VmFsdWUuZm9ybWF0KCkpCiAgICAgIH0KICAgIH0sCiAgICB0aW1lOiB7CiAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLmxvY2FsVGltZS5mb3JtYXQoJ0hIOm1tOnNzJykKICAgICAgfQogICAgfSwKICAgIGRhdGU6IHsKICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMubG9jYWxUaW1lLmZvcm1hdCgnWVlZWS1NTS1ERCcpCiAgICAgIH0KICAgIH0sCiAgICB0aW1lTWludXRlOiB7CiAgICAgIGdldDogZnVuY3Rpb24gKCkgewogICAgICAgIC8vIDAgbWVhbnMgMTI6MDAsIDcyMCBtZWFucyBtaWRuaWdodCwgMTQ0MCAoPTI0KjYwKSBtZWFucyAxMjowMCB0aGUgZGF5IGFmdGVyCiAgICAgICAgY29uc3QgdCA9IHRoaXMubG9jYWxUaW1lCiAgICAgICAgcmV0dXJuIHQuaG91cnMoKSA8IDEyID8gKHQuaG91cnMoKSArIDEyKSAqIDYwICsgdC5taW51dGVzKCkgOiAodC5ob3VycygpIC0gMTIpICogNjAgKyB0Lm1pbnV0ZXMoKQogICAgICB9LAogICAgICBzZXQ6IGZ1bmN0aW9uIChuZXdWYWx1ZSkgewogICAgICAgIHZhciB0ID0gTW9tZW50KHRoaXMuc2xpZGVyU3RhcnRUaW1lKQogICAgICAgIHQuYWRkKG5ld1ZhbHVlLCAnbWludXRlcycpCiAgICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCB0LmZvcm1hdCgpKQogICAgICB9CiAgICB9LAogICAgc2xpZGVyU3RhcnRUaW1lOiBmdW5jdGlvbiAoKSB7CiAgICAgIGNvbnN0IHQgPSB0aGlzLmxvY2FsVGltZS5jbG9uZSgpCiAgICAgIGlmICh0LmhvdXJzKCkgPCAxMikgewogICAgICAgIHQuc3VidHJhY3QoMSwgJ2RheXMnKQogICAgICB9CiAgICAgIHQuaG91cnMoMTIpCiAgICAgIHQubWludXRlcygwKQogICAgICB0LnNlY29uZHMoMCkKICAgICAgdC5taWxsaXNlY29uZHMoMCkKICAgICAgcmV0dXJuIHQKICAgIH0sCiAgICBzbGlkZXJIaW50OiBmdW5jdGlvbiAoKSB7CiAgICAgIGNvbnN0IHRtID0gdGhpcy50aW1lTWludXRlCiAgICAgIGNvbnN0IHN0b3AgPSB0aGlzLnN0b3BzW01hdGguZmxvb3IodG0gKiB0aGlzLnN0b3BzLmxlbmd0aCAvIDE0NDApXQogICAgICBpZiAoIXN0b3ApIHJldHVybiAnJwogICAgICBpZiAoc3RvcC5zdW5BbHQgPiAwKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHQoJ0RheWxpZ2h0JykKICAgICAgfQogICAgICBpZiAoc3RvcC5zdW5BbHQgPCAtMTYpIHsKICAgICAgICByZXR1cm4gc3RvcC5tb29uQWx0IDwgNSA/IHRoaXMuJHQoJ0RhcmsgbmlnaHQnKSA6IHRoaXMuJHQoJ01vb25saWdodCcpCiAgICAgIH0KICAgICAgcmV0dXJuIHRtID4gNzIwID8gdGhpcy4kdCgnRGF3bicpIDogdGhpcy4kdCgnVHdpbGlnaHQnKQogICAgfSwKICAgIGlzVGltZVBhdXNlZDogZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuc3RlbC50aW1lX3NwZWVkID09PSAwCiAgICB9LAogICAgdG9nZ2xlUGF1c2VUaW1lSWNvbjogZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gdGhpcy5pc1RpbWVQYXVzZWQgPyAnbWRpLXBsYXknIDogJ21kaS1wYXVzZScKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLiRidXMuJG9uKCdSZXNldFRpbWUnLCB0aGlzLnJlc2V0VGltZSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICByZXNldFRpbWU6IGZ1bmN0aW9uICgpIHsKICAgICAgY29uc29sZS5sb2coJ1Jlc2V0IHRpbWUnKQogICAgICBjb25zdCBtID0gTW9tZW50KCkKICAgICAgbS5sb2NhbCgpCiAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgbS5mb3JtYXQoKSkKICAgICAgCiAgICAgIC8vIOebtOaOpeS9v+eUqOaWsOaXtumXtOi/m+ihjOWQjOatpe+8jOmBv+WFjeWTjeW6lOW8j+abtOaWsOW7tui/nwogICAgICBjb25zdCBuZXdUaW1lID0gbS5mb3JtYXQoJ0hIOm1tOnNzJykKICAgICAgY29uc3QgbmV3RGF0ZSA9IG0uZm9ybWF0KCdZWVlZLU1NLUREJykKICAgICAgY29uc29sZS5sb2coJ1N5bmNocm9uaXplIHRpbWU6JywgbmV3VGltZSkKICAgICAgY29uc29sZS5sb2coJ1N5bmNocm9uaXplIGRhdGU6JywgbmV3RGF0ZSkKICAgICAgdGhpcy4kYnVzLiRlbWl0KCdBcHBTZW5kTWVzc2FnZScsICdWdWVfQ29tbWFuZCcsICdTeW5jaHJvbml6ZVRpbWU6JyArIG5ld1RpbWUgKyAnOicgKyBuZXdEYXRlKTsKICAgIH0sCiAgICB0b2dnbGVQYXVzZVRpbWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy4kc3RlbC5jb3JlLnRpbWVfc3BlZWQgPSAodGhpcy4kc3RlbC5jb3JlLnRpbWVfc3BlZWQgPT09IDApID8gMSA6IDAKICAgIH0sCiAgICBpbmNUaW1lOiBmdW5jdGlvbiAodW5pdCkgewogICAgICB0aGlzLnN0YXJ0SW5jVGltZSgxLCB1bml0KQogICAgfSwKICAgIGRlY1RpbWU6IGZ1bmN0aW9uICh1bml0KSB7CiAgICAgIHRoaXMuc3RhcnRJbmNUaW1lKC0xLCB1bml0KQogICAgfSwKICAgIHN0YXJ0SW5jVGltZTogZnVuY3Rpb24gKHYsIHVuaXQpIHsKICAgICAgY29uc3QgdGhhdCA9IHRoaXMKICAgICAgY2xpY2tUaW1lb3V0ID0gc2V0VGltZW91dChfID0+IHsKICAgICAgICBjb25zdCB0ID0gdGhpcy5sb2NhbFRpbWUuY2xvbmUoKQogICAgICAgIHQuYWRkKHYsIHVuaXQpCiAgICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCB0LmZvcm1hdCgpKQogICAgICAgIG5iQ2xpY2tSZXBlYXQrKwogICAgICAgIHRoYXQuc3RhcnRJbmNUaW1lKHYsIHVuaXQpCiAgICAgIH0sIG5iQ2xpY2tSZXBlYXQgPT09IDAgPyAwIDogKG5iQ2xpY2tSZXBlYXQgPT09IDEgPyA1MDAgOiAobmJDbGlja1JlcGVhdCA8IDEwID8gMTAwIDogKG5iQ2xpY2tSZXBlYXQgPCAxMDAgPyA1MCA6IDIwKSkpKQogICAgfSwKICAgIHN0b3BJbmNUaW1lOiBmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChjbGlja1RpbWVvdXQpIHsKICAgICAgICBjbGVhclRpbWVvdXQoY2xpY2tUaW1lb3V0KQogICAgICAgIGNsaWNrVGltZW91dCA9IHVuZGVmaW5lZAogICAgICAgIG5iQ2xpY2tSZXBlYXQgPSAwCiAgICAgIH0KICAgIH0sCiAgICBzeW5jaHJvbml6ZVRpbWU6IGZ1bmN0aW9uICgpIHsKICAgICAgY29uc29sZS5sb2coJ1N5bmNocm9uaXplIHRpbWU6JywgdGhpcy50aW1lKQogICAgICBjb25zb2xlLmxvZygnU3luY2hyb25pemUgZGF0ZTonLCB0aGlzLmRhdGUpCiAgICAgIHRoaXMuJGJ1cy4kZW1pdCgnQXBwU2VuZE1lc3NhZ2UnLCAnVnVlX0NvbW1hbmQnLCAnU3luY2hyb25pemVUaW1lOicgKyB0aGlzLnRpbWUgKyAnOicgKyB0aGlzLmRhdGUpOwogICAgfSwKICAgIC8vIDAgbWVhbnMgMTI6MDAsIDcyMCBtZWFucyBtaWRuaWdodCwgMTQ0MCAoPTI0KjYwKSBtZWFucyAxMjowMCB0aGUgZGF5IGFmdGVyCiAgICB0aW1lTWludXRlUmFuZ2VUb1VUQzogZnVuY3Rpb24gKHRtKSB7CiAgICAgIHJldHVybiB0aGlzLnNsaWRlclN0YXJ0VGltZS50b0RhdGUoKS5nZXRNSkQoKSArIHRtICogMSAvICgyNCAqIDYwKQogICAgfSwKICAgIHJlZnJlc2hTdG9wczogZnVuY3Rpb24gKCkgewogICAgICBpZiAodGhpcy5zdG9wQ2FjaGVLZXkuc2xpZGVyU3RhcnRUaW1lID09PSB0aGlzLnNsaWRlclN0YXJ0VGltZS5mb3JtYXQoKSAmJiB0aGlzLnN0b3BDYWNoZUtleS5sb2NhdGlvbiA9PT0gSlNPTi5zdHJpbmdpZnkodGhpcy5sb2NhdGlvbikpIHsKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICBjb25zdCByZXMgPSBbXQogICAgICBjb25zdCBuYlN0b3AgPSA0OQogICAgICBjb25zdCBvYnMgPSB0aGlzLiRzdGVsLmNvcmUub2JzZXJ2ZXIuY2xvbmUoKQogICAgICBjb25zdCBzdW4gPSB0aGlzLiRzdGVsLmdldE9iaignTkFNRSBTdW4nKQogICAgICBjb25zdCBtb29uID0gdGhpcy4kc3RlbC5nZXRPYmooJ05BTUUgTW9vbicpCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IG5iU3RvcDsgKytpKSB7CiAgICAgICAgb2JzLnV0YyA9IHRoaXMudGltZU1pbnV0ZVJhbmdlVG9VVEMoMTQ0MCAqIGkgLyBuYlN0b3ApCiAgICAgICAgY29uc3Qgc3VuQWx0ID0gdGhpcy4kc3RlbC5hbnBtKHRoaXMuJHN0ZWwuYzJzKHRoaXMuJHN0ZWwuY29udmVydEZyYW1lKG9icywgJ0lDUkYnLCAnT0JTRVJWRUQnLCBzdW4uZ2V0SW5mbygncmFkZWMnLCBvYnMpKSlbMV0pICogMTgwLjAgLyBNYXRoLlBJCiAgICAgICAgY29uc3QgbW9vbkFsdCA9IHRoaXMuJHN0ZWwuYW5wbSh0aGlzLiRzdGVsLmMycyh0aGlzLiRzdGVsLmNvbnZlcnRGcmFtZShvYnMsICdJQ1JGJywgJ09CU0VSVkVEJywgbW9vbi5nZXRJbmZvKCdyYWRlYycsIG9icykpKVsxXSkgKiAxODAuMCAvIE1hdGguUEkKICAgICAgICBjb25zdCBicmlnaHRuZXNzRm9yQWx0aXR1ZGUgPSBmdW5jdGlvbiAoc3VuQWx0LCBtb29uQWx0KSB7CiAgICAgICAgICBjb25zdCBtb29uQnJpZ2h0bmVzcyA9IG1vb25BbHQgPCAwID8gMCA6IDIgLyAzNSAqIE1hdGgubWluKDIwLCBtb29uQWx0KSAvIDIwCiAgICAgICAgICBpZiAoc3VuQWx0ID4gMCkgcmV0dXJuIE1hdGgubWluKDEwLCAxICsgc3VuQWx0KSArIG1vb25CcmlnaHRuZXNzCiAgICAgICAgICBpZiAoc3VuQWx0IDwgLTE2KSByZXR1cm4gbW9vbkJyaWdodG5lc3MKICAgICAgICAgIGlmIChzdW5BbHQgPCAtMTApIHJldHVybiAxIC8gMzUgKiAoMTYgKyBzdW5BbHQpIC8gNiArIG1vb25CcmlnaHRuZXNzCiAgICAgICAgICByZXR1cm4gKDEgLSAxIC8gMzUpICogKDEwICsgc3VuQWx0KSAvIDEwICsgMSAvIDM1ICsgbW9vbkJyaWdodG5lc3MKICAgICAgICB9CiAgICAgICAgY29uc3QgYnJpZ2h0bmVzcyA9IE1hdGgubG9nMTAoMSArIGJyaWdodG5lc3NGb3JBbHRpdHVkZShzdW5BbHQsIG1vb25BbHQpICogMTApIC8gMgogICAgICAgIHJlcy5wdXNoKHsKICAgICAgICAgIHBlcmNlbnQ6IGkgLyBuYlN0b3AsCiAgICAgICAgICBzdHlsZTogJ3N0b3AtY29sb3I6cmdiKDY0LDIwOSwyNTUpO3N0b3Atb3BhY2l0eTonICsgYnJpZ2h0bmVzcywKICAgICAgICAgIHN1bkFsdDogc3VuQWx0LAogICAgICAgICAgbW9vbkFsdDogbW9vbkFsdAogICAgICAgIH0pCiAgICAgIH0KICAgICAgb2JzLmRlc3Ryb3koKQogICAgICB0aGlzLnN0b3BDYWNoZUtleS5zbGlkZXJTdGFydFRpbWUgPSB0aGlzLnNsaWRlclN0YXJ0VGltZS5mb3JtYXQoKQogICAgICB0aGlzLnN0b3BDYWNoZUtleS5sb2NhdGlvbiA9IEpTT04uc3RyaW5naWZ5KHRoaXMubG9jYXRpb24pCiAgICAgIHRoaXMuc3RvcHMgPSByZXMKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMucmVmcmVzaFN0b3BzKCkKICAgIGNvbnN0IHRoYXQgPSB0aGlzCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIGZ1bmN0aW9uIChldmVudCkgewogICAgICB0aGF0LnN0b3BJbmNUaW1lKCkKICAgIH0pCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgdGhhdC5zdG9wSW5jVGltZSgpCiAgICB9KQogICAgdGhpcy4kYnVzLiRlbWl0KCdBcHBTZW5kTWVzc2FnZScsICdWdWVfQ29tbWFuZCcsICdnZXRDbGllbnRTZXR0aW5ncycpCiAgfSwKICB3YXRjaDogewogICAgc2xpZGVyU3RhcnRUaW1lOiBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMucmVmcmVzaFN0b3BzKCkKICAgIH0sCiAgICBsb2NhdGlvbjogZnVuY3Rpb24gKCkgewogICAgICB0aGlzLnJlZnJlc2hTdG9wcygpCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["date-time-picker.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"date-time-picker.vue","sourceRoot":"src/components","sourcesContent":["// Stellarium Web - Copyright (c) 2022 - Stellarium Labs SRL\n//\n// This program is licensed under the terms of the GNU AGPL v3, or\n// alternatively under a commercial licence.\n//\n// The terms of the AGPL v3 license can be found in the main directory of this\n// repository.\n\n<template>\n  <v-card width=\"400\" style=\"backdrop-filter: blur(5px); background-color: rgba(64, 64, 64, 0.5);\" class=\"dateTimePicker\">\n    <v-container>\n      <v-row justify=\"space-between\" no-gutters class=\"ma-3\">\n        <div>\n          <v-btn text icon class=\"up_down_bt\" style=\"margin-left: 16px\" @mousedown=\"incTime('years')\" @mouseup=\"synchronizeTime\" @touchstart.prevent=\"incTime('years')\" @touchend.prevent=\"synchronizeTime\"><v-icon>mdi-menu-up</v-icon></v-btn>\n          <v-btn text icon class=\"up_down_bt\" style=\"margin-left: 21px\" @mousedown=\"incTime('months')\" @mouseup=\"synchronizeTime\" @touchstart.prevent=\"incTime('months')\" @touchend.prevent=\"synchronizeTime\"><v-icon>mdi-menu-up</v-icon></v-btn>\n          <v-btn text icon class=\"up_down_bt\" style=\"margin-left: 8px\"  @mousedown=\"incTime('days')\" @mouseup=\"synchronizeTime\" @touchstart.prevent=\"incTime('days')\" @touchend.prevent=\"synchronizeTime  \"><v-icon>mdi-menu-up</v-icon></v-btn>\n          <h1>{{ date }}</h1>\n          <v-btn text icon class=\"up_down_bt\" style=\"margin-left: 16px\" @mousedown=\"decTime('years')\" @mouseup=\"synchronizeTime\" @touchstart.prevent=\"decTime('years')\" @touchend.prevent=\"synchronizeTime\"><v-icon>mdi-menu-down</v-icon></v-btn>\n          <v-btn text icon class=\"up_down_bt\" style=\"margin-left: 21px\" @mousedown=\"decTime('months')\" @mouseup=\"synchronizeTime\" @touchstart.prevent=\"decTime('months')\" @touchend.prevent=\"synchronizeTime  \"><v-icon>mdi-menu-down</v-icon></v-btn>\n          <v-btn text icon class=\"up_down_bt\" style=\"margin-left: 8px\"  @mousedown=\"decTime('days')\" @mouseup=\"synchronizeTime\" @touchstart.prevent=\"decTime('days')\" @touchend.prevent=\"synchronizeTime  \"><v-icon>mdi-menu-down</v-icon></v-btn>\n        </div>\n        <div>\n        <div>\n        <v-tooltip top>\n          <template v-slot:activator=\"{ on }\">\n            <v-btn text icon @click=\"resetTime\" style=\"margin-top: 5px\" v-on=\"on\"><v-icon>mdi-history</v-icon></v-btn>\n          </template>\n          <span>{{ $t('Back to real time') }}</span>\n        </v-tooltip>\n        </div>\n        <div>\n        <v-tooltip top>\n          <template v-slot:activator=\"{ on }\">\n            <v-btn text icon @click=\"togglePauseTime\" style=\"margin-top: 0px\" v-on=\"on\"><v-icon>{{ togglePauseTimeIcon }}</v-icon></v-btn>\n          </template>\n          <span>{{ $t('Pause/unpause time') }}</span>\n        </v-tooltip>\n        </div>\n        </div>\n        <div>\n          <v-btn text icon class=\"up_down_bt\" @mousedown=\"incTime('hours')\" @mouseup=\"synchronizeTime\" @touchstart.prevent=\"incTime('hours')\" @touchend.prevent=\"synchronizeTime\"><v-icon>mdi-menu-up</v-icon></v-btn>\n          <v-btn text icon class=\"up_down_bt ml-1\" @mousedown=\"incTime('minutes')\" @mouseup=\"synchronizeTime\" @touchstart.prevent=\"incTime('minutes')\" @touchend.prevent=\"synchronizeTime\"><v-icon>mdi-menu-up</v-icon></v-btn>\n          <v-btn text icon class=\"up_down_bt ml-1\" @mousedown=\"incTime('seconds')\" @mouseup=\"synchronizeTime\" @touchstart.prevent=\"incTime('seconds')\" @touchend.prevent=\"synchronizeTime\"><v-icon>mdi-menu-up</v-icon></v-btn>\n          <h1 class=\"ml-2\">{{ time }}</h1>\n          <v-btn text icon class=\"up_down_bt\" @mousedown=\"decTime('hours')\" @mouseup=\"synchronizeTime\" @touchstart.prevent=\"decTime('hours')\" @touchend.prevent=\"synchronizeTime\"><v-icon>mdi-menu-down</v-icon></v-btn>\n          <v-btn text icon class=\"up_down_bt ml-1\" @mousedown=\"decTime('minutes')\" @mouseup=\"synchronizeTime\" @touchstart.prevent=\"decTime('minutes')\" @touchend.prevent=\"synchronizeTime\"><v-icon>mdi-menu-down</v-icon></v-btn>\n          <v-btn text icon class=\"up_down_bt ml-1\" @mousedown=\"decTime('seconds')\" @mouseup=\"synchronizeTime\" @touchstart.prevent=\"decTime('seconds')\" @touchend.prevent=\"synchronizeTime\"><v-icon>mdi-menu-down</v-icon></v-btn>\n        </div>\n      </v-row>\n    </v-container>\n    <div style=\"padding: 20px\">\n      <div style=\"position: absolute\">\n        <svg height=\"30\" width=\"360\">\n          <defs>\n            <linearGradient id=\"grad1\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\">\n              <stop v-for=\"stop in stops\" :offset=\"stop.percent\" :style=\"stop.style\" :key=\"stop.percent\"/>\n            </linearGradient>\n          </defs>\n          <rect width=\"100%\" height=\"100%\" fill=\"url(#grad1)\" />\n        </svg>\n      </div>\n      <v-slider min=\"0\" max=\"1439\" style=\"padding: 0px; width: 360px;\" v-model=\"timeMinute\" :hint=\"sliderHint\" persistent-hint \n        @mouseup=\"synchronizeTime\" @mouseleave=\"synchronizeTime\" @touchend=\"synchronizeTime\" @touchcancel=\"synchronizeTime\">\n      </v-slider>\n    </div>\n  </v-card>\n</template>\n\n<script>\n\nimport Moment from 'moment'\nvar clickTimeout\nvar nbClickRepeat = 0\n\nexport default {\n  data: function () {\n    return {\n      stops: [],\n      stopCacheKey: {\n        sliderStartTime: undefined,\n        location: undefined\n      }\n    }\n  },\n  props: ['value', 'location'],\n  computed: {\n    // The MomentJS time in local time\n    localTime: {\n      get: function () {\n        const m = Moment(this.value)\n        m.local()\n        return m\n      },\n      set: function (newValue) {\n        this.$emit('input', newValue.format())\n      }\n    },\n    time: {\n      get: function () {\n        return this.localTime.format('HH:mm:ss')\n      }\n    },\n    date: {\n      get: function () {\n        return this.localTime.format('YYYY-MM-DD')\n      }\n    },\n    timeMinute: {\n      get: function () {\n        // 0 means 12:00, 720 means midnight, 1440 (=24*60) means 12:00 the day after\n        const t = this.localTime\n        return t.hours() < 12 ? (t.hours() + 12) * 60 + t.minutes() : (t.hours() - 12) * 60 + t.minutes()\n      },\n      set: function (newValue) {\n        var t = Moment(this.sliderStartTime)\n        t.add(newValue, 'minutes')\n        this.$emit('input', t.format())\n      }\n    },\n    sliderStartTime: function () {\n      const t = this.localTime.clone()\n      if (t.hours() < 12) {\n        t.subtract(1, 'days')\n      }\n      t.hours(12)\n      t.minutes(0)\n      t.seconds(0)\n      t.milliseconds(0)\n      return t\n    },\n    sliderHint: function () {\n      const tm = this.timeMinute\n      const stop = this.stops[Math.floor(tm * this.stops.length / 1440)]\n      if (!stop) return ''\n      if (stop.sunAlt > 0) {\n        return this.$t('Daylight')\n      }\n      if (stop.sunAlt < -16) {\n        return stop.moonAlt < 5 ? this.$t('Dark night') : this.$t('Moonlight')\n      }\n      return tm > 720 ? this.$t('Dawn') : this.$t('Twilight')\n    },\n    isTimePaused: function () {\n      return this.$store.state.stel.time_speed === 0\n    },\n    togglePauseTimeIcon: function () {\n      return this.isTimePaused ? 'mdi-play' : 'mdi-pause'\n    }\n  },\n  created() {\n    this.$bus.$on('ResetTime', this.resetTime);\n  },\n  methods: {\n    resetTime: function () {\n      console.log('Reset time')\n      const m = Moment()\n      m.local()\n      this.$emit('input', m.format())\n      \n      // 直接使用新时间进行同步，避免响应式更新延迟\n      const newTime = m.format('HH:mm:ss')\n      const newDate = m.format('YYYY-MM-DD')\n      console.log('Synchronize time:', newTime)\n      console.log('Synchronize date:', newDate)\n      this.$bus.$emit('AppSendMessage', 'Vue_Command', 'SynchronizeTime:' + newTime + ':' + newDate);\n    },\n    togglePauseTime: function () {\n      this.$stel.core.time_speed = (this.$stel.core.time_speed === 0) ? 1 : 0\n    },\n    incTime: function (unit) {\n      this.startIncTime(1, unit)\n    },\n    decTime: function (unit) {\n      this.startIncTime(-1, unit)\n    },\n    startIncTime: function (v, unit) {\n      const that = this\n      clickTimeout = setTimeout(_ => {\n        const t = this.localTime.clone()\n        t.add(v, unit)\n        this.$emit('input', t.format())\n        nbClickRepeat++\n        that.startIncTime(v, unit)\n      }, nbClickRepeat === 0 ? 0 : (nbClickRepeat === 1 ? 500 : (nbClickRepeat < 10 ? 100 : (nbClickRepeat < 100 ? 50 : 20))))\n    },\n    stopIncTime: function () {\n      if (clickTimeout) {\n        clearTimeout(clickTimeout)\n        clickTimeout = undefined\n        nbClickRepeat = 0\n      }\n    },\n    synchronizeTime: function () {\n      console.log('Synchronize time:', this.time)\n      console.log('Synchronize date:', this.date)\n      this.$bus.$emit('AppSendMessage', 'Vue_Command', 'SynchronizeTime:' + this.time + ':' + this.date);\n    },\n    // 0 means 12:00, 720 means midnight, 1440 (=24*60) means 12:00 the day after\n    timeMinuteRangeToUTC: function (tm) {\n      return this.sliderStartTime.toDate().getMJD() + tm * 1 / (24 * 60)\n    },\n    refreshStops: function () {\n      if (this.stopCacheKey.sliderStartTime === this.sliderStartTime.format() && this.stopCacheKey.location === JSON.stringify(this.location)) {\n        return\n      }\n      const res = []\n      const nbStop = 49\n      const obs = this.$stel.core.observer.clone()\n      const sun = this.$stel.getObj('NAME Sun')\n      const moon = this.$stel.getObj('NAME Moon')\n      for (let i = 0; i <= nbStop; ++i) {\n        obs.utc = this.timeMinuteRangeToUTC(1440 * i / nbStop)\n        const sunAlt = this.$stel.anpm(this.$stel.c2s(this.$stel.convertFrame(obs, 'ICRF', 'OBSERVED', sun.getInfo('radec', obs)))[1]) * 180.0 / Math.PI\n        const moonAlt = this.$stel.anpm(this.$stel.c2s(this.$stel.convertFrame(obs, 'ICRF', 'OBSERVED', moon.getInfo('radec', obs)))[1]) * 180.0 / Math.PI\n        const brightnessForAltitude = function (sunAlt, moonAlt) {\n          const moonBrightness = moonAlt < 0 ? 0 : 2 / 35 * Math.min(20, moonAlt) / 20\n          if (sunAlt > 0) return Math.min(10, 1 + sunAlt) + moonBrightness\n          if (sunAlt < -16) return moonBrightness\n          if (sunAlt < -10) return 1 / 35 * (16 + sunAlt) / 6 + moonBrightness\n          return (1 - 1 / 35) * (10 + sunAlt) / 10 + 1 / 35 + moonBrightness\n        }\n        const brightness = Math.log10(1 + brightnessForAltitude(sunAlt, moonAlt) * 10) / 2\n        res.push({\n          percent: i / nbStop,\n          style: 'stop-color:rgb(64,209,255);stop-opacity:' + brightness,\n          sunAlt: sunAlt,\n          moonAlt: moonAlt\n        })\n      }\n      obs.destroy()\n      this.stopCacheKey.sliderStartTime = this.sliderStartTime.format()\n      this.stopCacheKey.location = JSON.stringify(this.location)\n      this.stops = res\n    }\n  },\n  mounted: function () {\n    this.refreshStops()\n    const that = this\n    window.addEventListener('mouseup', function (event) {\n      that.stopIncTime()\n    })\n    window.addEventListener('touchend', function (event) {\n      that.stopIncTime()\n    })\n    this.$bus.$emit('AppSendMessage', 'Vue_Command', 'getClientSettings')\n  },\n  watch: {\n    sliderStartTime: function () {\n      this.refreshStops()\n    },\n    location: function () {\n      this.refreshStops()\n    }\n  }\n}\n</script>\n\n<style>\n.up_down_bt {\n  margin-bottom: -10px!important;\n  margin-top: -10px!important;\n  margin-left: 0px;\n  margin-right: 0px!important;\n}\n\n.dateTimePicker {\n  pointer-events: auto;\n  position: absolute;\n  \n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n}\n</style>\n"]}]}