{"remainingRequest":"/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/src/components/location-dialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/src/components/location-dialog.vue","mtime":1756885034408},{"path":"/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1756885033541},{"path":"/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/node_modules/thread-loader/dist/cjs.js","mtime":1756885034172},{"path":"/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/node_modules/babel-loader/lib/index.js","mtime":1756885033526},{"path":"/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1756885033541},{"path":"/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/node_modules/vue-loader/lib/index.js","mtime":1756885034208}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBMb2NhdGlvbk1nciBmcm9tICdAL2NvbXBvbmVudHMvbG9jYXRpb24tbWdyLnZ1ZScKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VBdXRvTG9jYXRpb246IHRydWUsCiAgICAgIG1hbnVhbExhdGl0dWRlOiAnJywKICAgICAgbWFudWFsTG9uZ2l0dWRlOiAnJywKICAgICAgbG9jYXRpb25MYXQ6ICcnLAogICAgICBsb2NhdGlvbkxvbjogJycsCiAgICB9CgogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC8vIHVzZUF1dG9Mb2NhdGlvbjogewogICAgLy8gICBnZXQ6IGZ1bmN0aW9uICgpIHsKICAgIC8vICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUudXNlQXV0b0xvY2F0aW9uCiAgICAvLyAgIH0sCiAgICAvLyAgIHNldDogZnVuY3Rpb24gKGIpIHsKICAgIC8vICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldFVzZUF1dG9Mb2NhdGlvbicsIGIpCiAgICAvLyAgIH0KICAgIC8vIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uICgpIHsKICAgIHRoaXMuJGJ1cy4kZW1pdCgnVnVlX0NvbW1hbmQnLCAnbG9jYWxNZXNzYWdlJyk7IC8vIOiOt+WPluS9jee9ruS/oeaBrwogICAgLy8g5qOA5p+lIHF0T2JqIOaYr+WQpuWPr+eUqAogICAgY29uc3QgY2hlY2tRdE9iakF2YWlsYWJpbGl0eSA9ICgpID0+IHsKICAgICAgaWYgKHdpbmRvdy5xdE9iaikgewogICAgICAgIHRoaXMuJGJ1cy4kZW1pdCgnU2VuZENvbnNvbGVMb2dNc2cnLCAncXRPYmog5bey5Y+v55SoJywgJ2luZm8nKTsKICAgICAgICAvLyBhbGVydCgncXRPYmog5bey5Y+v55SoJyk7CiAgICAgICAgLy8g5Y+v5Lul5Zyo6L+Z6YeM5YGa5LiA5Lqb5Yid5aeL5YyWCiAgICAgICAgdGhpcy5jYWxsUXQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyB0aGlzLiRidXMuJGVtaXQoJ1NlbmRDb25zb2xlTG9nTXNnJywgJ3F0T2JqIOS4jeWPr+eUqO+8jOWwhuWcqDHnp5LlkI7ph43or5UnLCAnd2FybmluZycpOwogICAgICAgIHNldFRpbWVvdXQoY2hlY2tRdE9iakF2YWlsYWJpbGl0eSwgMTAwMCk7CiAgICAgIH0KICAgIH07CiAgICAKICAgIC8vIOW7tui/n+ajgOafpe+8jOehruS/nemhtemdouWujOWFqOWKoOi9vQogICAgc2V0VGltZW91dChjaGVja1F0T2JqQXZhaWxhYmlsaXR5LCAyMDAwKTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLiRidXMuJG9uKCdyZXNldExvY2F0aW9uJywgdGhpcy5yZXNldExvY2F0aW9uKTsKICAgIHRoaXMuJGJ1cy4kb24oJ3NldExvY2F0aW9uTGF0QW5kTG9uJywgdGhpcy5zZXRMb2NhdGlvbkxhdEFuZExvbik7CiAgICB0aGlzLiRidXMuJG9uKCdpc0F1dG9Mb2NhdGlvbicsIHRoaXMuaGFuZGxlQXV0b0xvY2F0aW9uQ2hhbmdlKTsKICAgIHRoaXMuJGJ1cy4kb24oJ3NlbmRHZXRMb2NhdGlvbicsIHRoaXMuc2VuZEdldExvY2F0aW9uKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNhbGxRdCgpIHsKICAgICAgdHJ5IHsKICAgICAgICBpZiAod2luZG93LnF0T2JqKSB7CiAgICAgICAgICBjb25zdCBqc29uU3RyID0gd2luZG93LnF0T2JqLmdldE15VmFsdWUoKTsKICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGpzb25TdHIpOyAvLyDop6PmnpAgSlNPTgogICAgICAgICAgdGhpcy4kYnVzLiRlbWl0KCdTZW5kQ29uc29sZUxvZ01zZycsICJkYXRhOiIgK2BUaW1lOiAke2RhdGEudGltZX0sbGF0OiR7ZGF0YS5sYXR9LGxvbmc6JHtkYXRhLmxvbn0sIGxhbmd1YWdlOiAke2RhdGEubGFuZ3VhZ2V9LCBXaUZpOiAke2RhdGEud2lmaW5hbWV9YCwgJ2luZm8nKTsgIAogICAgICAgICAgdGhpcy5zZW5kR2V0TG9jYXRpb24oZGF0YS5sYXQsIGRhdGEubG9uKTsKICAgICAgICAgIGlmIChkYXRhLmxhbmd1YWdlID09ICd6aCcgfHwgZGF0YS5sYW5ndWFnZSA9PSAiemgiKSB7CiAgICAgICAgICAgIHRoaXMuJGJ1cy4kZW1pdCgnQ2xpZW50TGFuZ3VhZ2UnLCAnY24nKTsKICAgICAgICAgICAgdGhpcy4kYnVzLiRlbWl0KCdTZW5kQ29uc29sZUxvZ01zZycsICdDbGllbnRMYW5ndWFnZTogY24nLCAnaW5mbycpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy4kYnVzLiRlbWl0KCdDbGllbnRMYW5ndWFnZScsICdlbicpOwogICAgICAgICAgICB0aGlzLiRidXMuJGVtaXQoJ1NlbmRDb25zb2xlTG9nTXNnJywgJ0NsaWVudExhbmd1YWdlOiBlbicsICdpbmZvJyk7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLiRidXMuJGVtaXQoJ0FwcFNlbmRNZXNzYWdlJywgJ1Z1ZV9Db21tYW5kJywgJ2xvY2FsTWVzc2FnZTonKyBkYXRhLmxhdCArICc6JyArIGRhdGEubG9uKyc6JytkYXRhLmxhbmd1YWdlICsnOicrZGF0YS53aWZpbmFtZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJGJ1cy4kZW1pdCgnU2VuZENvbnNvbGVMb2dNc2cnLCAncXRPYmog5LiN5Y+v55SoJywgJ2Vycm9yJyk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIHRoaXMuJGJ1cy4kZW1pdCgnU2VuZENvbnNvbGVMb2dNc2cnLCBg6ZSZ6K+v5L+h5oGvOiAke2Vycm9yLm1lc3NhZ2V9YCwgJ2Vycm9yJyk7CiAgICAgICAgdGhpcy4kYnVzLiRlbWl0KCdTZW5kQ29uc29sZUxvZ01zZycsIGDplJnor6/loIbmoIg6ICR7ZXJyb3Iuc3RhY2t9YCwgJ2Vycm9yJyk7CiAgICAgIH0KICAgIH0sCiAKICAgIHJlc2V0TG9jYXRpb246IGZ1bmN0aW9uIChsYXQsIGxuZyxpc0F1dG8pIHsgICAgLy8g5omL5Yqo5L+u5q2j5L2N572uCiAgICAgIGlmIChpc0F1dG8pIHJldHVybjsKICAgICAgbGF0ID0gTnVtYmVyKGxhdCk7CiAgICAgIGxuZyA9IE51bWJlcihsbmcpOwogICAgICAvLyBjb25zb2xlLmxvZygn6Kem5Y+R5L2N572u5pu05pawcmVzZXRMb2NhdGlvbjonLCBsYXQsIGxuZykKICAgICAgaWYgKGlzTmFOKGxhdCkgfHwgaXNOYU4obG5nKSkgewogICAgICAgIHRoaXMubWFudWFsTGF0aXR1ZGUgPSAnJzsKICAgICAgICB0aGlzLm1hbnVhbExvbmdpdHVkZSA9ICcnOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMubWFudWFsTGF0aXR1ZGUgPSBTdHJpbmcobGF0KTsKICAgICAgICB0aGlzLm1hbnVhbExvbmdpdHVkZSA9IFN0cmluZyhsbmcpOwogICAgICB9CiAgICAgIHRoaXMuc2F2ZU1hbnVhbENvb3JkaW5hdGVzKCk7CiAKICAgIH0sCiAgICBzZXRMb2NhdGlvbkxhdEFuZExvbjogZnVuY3Rpb24gKGxhdCwgbG5nKSB7ICAgIC8vIOiHquWKqOS/ruato+S9jee9rgogICAgICAvLyB0aGlzLiRidXMuJGVtaXQoJ1NlbmRDb25zb2xlTG9nTXNnJywgJ3NldExvY2F0aW9uTGF0QW5kTG9uOicgKyBsYXQgKyAnLCcgKyBsbmcsICdpbmZvJykKICAgICAgdGhpcy5sb2NhdGlvbkxhdCA9IGxhdDsKICAgICAgdGhpcy5sb2NhdGlvbkxvbiA9IGxuZzsKICAgICAgaWYgKHRoaXMudXNlQXV0b0xvY2F0aW9uKSB7CiAgICAgICAgdGhpcy5tYW51YWxMYXRpdHVkZSA9IGxhdDsKICAgICAgICB0aGlzLm1hbnVhbExvbmdpdHVkZSA9IGxuZzsKICAgICAgICB0aGlzLiRidXMuJGVtaXQoJ0FwcFNlbmRNZXNzYWdlJywgJ1Z1ZV9Db21tYW5kJywgJ2N1cnJlY3RMb2NhdGlvbjonKyBsYXQgKyAnOicgKyBsbmcpOwogICAgICB9CiAgICAgIC8vIHRoaXMuJGJ1cy4kZW1pdCgnU2VuZENvbnNvbGVMb2dNc2cnLCAnMy0tLS0tLS0tLS0tLeS/ruaUueW9k+WJjeacrOWcsOS9jee9rjonKyBsYXQgKyAnOicgKyBsbmcpOwogICAgfSwKICAgIHNldExvY2F0aW9uOiBmdW5jdGlvbiAobG9jKSB7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0Q3VycmVudExvY2F0aW9uJywgbG9jKQogICAgfSwKICAgIHNhdmVNYW51YWxDb29yZGluYXRlczogZnVuY3Rpb24gKCkgewogICAgICBpZiAodGhpcy51c2VBdXRvTG9jYXRpb24pIHsKICAgICAgICB0aGlzLnVzZUF1dG9Mb2NhdGlvbiA9IGZhbHNlOwogICAgICB9CiAgICAgIGNvbnN0IGxhdCA9IHBhcnNlRmxvYXQodGhpcy5tYW51YWxMYXRpdHVkZS50cmltKCkpOwogICAgICBjb25zdCBsbmcgPSBwYXJzZUZsb2F0KHRoaXMubWFudWFsTG9uZ2l0dWRlLnRyaW0oKSk7CiAgICAgIHRoaXMuJGJ1cy4kZW1pdCgnUG9sYXJQb2ludEFsdGl0dWRlJywgbGF0KQogICAgICB0aGlzLiRidXMuJGVtaXQoJ1NlbmRDb25zb2xlTG9nTXNnJywgJ1NldCBDdXJyZW50IExvY2F0aW9uOicgKyBsYXQgKyAnLCcgKyBsbmcsICdpbmZvJykKICAgICAgY29uc3QgbG9jID0gewogICAgICAgIHNob3J0X25hbWU6ICdVbmtub3duJywKICAgICAgICBjb3VudHJ5OiAnVW5rbm93bicsCiAgICAgICAgbG5nOiBsbmcsCiAgICAgICAgbGF0OiBsYXQsCiAgICAgICAgYWx0OiAwLCAKICAgICAgICBhY2N1cmFjeTogMCwgCiAgICAgICAgc3RyZWV0X2FkZHJlc3M6ICcnCiAgICAgIH0KICAgICAgdGhpcy5zZXRMb2NhdGlvbihsb2MpCiAgICAgIHRoaXMuJGJ1cy4kZW1pdCgnQXBwU2VuZE1lc3NhZ2UnLCAnVnVlX0NvbW1hbmQnLCAnc2F2ZVRvQ29uZmlnRmlsZTpDb29yZGluYXRlczonKyBsYXQgKyAnLCcgKyBsbmcgKyAnLCcgKyB0aGlzLnVzZUF1dG9Mb2NhdGlvbik7CiAgICAgIHRoaXMuJGJ1cy4kZW1pdCgnU2hvd1Bvc2l0aW9uSW5mbycsIGxhdCwgbG5nKTsKICAgICAgdGhpcy4kYnVzLiRlbWl0KCd1cGRhdGVNYXBQb3NpdGlvbicsIGxhdCxsbmcpCgoKICAgIH0sCiAgICBoYW5kbGVBdXRvTG9jYXRpb25DaGFuZ2U6IGZ1bmN0aW9uIChuZXdWYWwpIHsKICAgICAgLy8gdGhpcy4kYnVzLiRlbWl0KCdTZW5kQ29uc29sZUxvZ01zZycsICdoYW5kbGVBdXRvTG9jYXRpb25DaGFuZ2U6JyArIG5ld1ZhbCwgJ2luZm8nKQogICAgICB0aGlzLiRidXMuJGVtaXQoJ0FwcFNlbmRNZXNzYWdlJywgJ1Z1ZV9Db21tYW5kJywgJ3NhdmVUb0NvbmZpZ0ZpbGU6aXNBdXRvTG9jYXRpb246JyArIG5ld1ZhbCkKICAgICAgaWYgKG5ld1ZhbCkgewogICAgICAgIHRoaXMuJGJ1cy4kZW1pdCgnQXBwU2VuZE1lc3NhZ2UnLCAnVnVlX0NvbW1hbmQnLCAncmVHZXRMb2NhdGlvbicpOwogICAgICAgIC8vIHRoaXMuJGJ1cy4kZW1pdCgnU2VuZENvbnNvbGVMb2dNc2cnLCAn5b2T5YmN5L2N572uOicgKyB0aGlzLmxvY2F0aW9uTGF0ICsgJywnICsgdGhpcy5sb2NhdGlvbkxvbiwgJ2luZm8nKQogICAgICAgIAogICAgICB9CiAgICAgIGNvbnN0IENvbmZpZ0xhdCA9IHBhcnNlRmxvYXQodGhpcy5tYW51YWxMYXRpdHVkZS50cmltKCkpOwogICAgICBjb25zdCBDb25maWdMbmcgPSBwYXJzZUZsb2F0KHRoaXMubWFudWFsTG9uZ2l0dWRlLnRyaW0oKSk7CiAgICAgIHRoaXMuJGJ1cy4kZW1pdCgnQXBwU2VuZE1lc3NhZ2UnLCAnVnVlX0NvbW1hbmQnLCAnc2F2ZVRvQ29uZmlnRmlsZTpDb29yZGluYXRlczonKyBDb25maWdMYXQgKyAnLCcgKyBDb25maWdMbmcgKyAnLCcgKyB0aGlzLnVzZUF1dG9Mb2NhdGlvbik7CiAgICAgIAogICAgfSwKICAgIHNlbmRHZXRMb2NhdGlvbjogZnVuY3Rpb24gKG5ld2xhdCwgbmV3bG5nKSB7CiAgICAgIHRyeSB7CiAgICAgICAgdGhpcy5sb2NhdGlvbkxhdCA9IFN0cmluZyhuZXdsYXQgfHwgJycpOwogICAgICAgIHRoaXMubG9jYXRpb25Mb24gPSBTdHJpbmcobmV3bG5nIHx8ICcnKTsKICAgICAgICAvLyDnoa7kv53ovazmjaLkuLrlrZfnrKbkuLLlkI7lho3kvb/nlKh0cmltKCkKICAgICAgICBsZXQgbGF0ID0gcGFyc2VGbG9hdChTdHJpbmcodGhpcy5sb2NhdGlvbkxhdCB8fCAnJykudHJpbSgpKTsKICAgICAgICBsZXQgbG5nID0gcGFyc2VGbG9hdChTdHJpbmcodGhpcy5sb2NhdGlvbkxvbiB8fCAnJykudHJpbSgpKTsKICAgICAgICB0aGlzLiRidXMuJGVtaXQoJ1NlbmRDb25zb2xlTG9nTXNnJywgJ3NlbmRHZXRMb2NhdGlvbjonICsgbGF0ICsgJywnICsgbG5nLCAnaW5mbycpCiAgICAgICAgCiAgICAgICAgaWYgKGlzTmFOKGxhdCkgfHwgaXNOYU4obG5nKSkgewogICAgICAgICAgdGhpcy4kYnVzLiRlbWl0KCdzaG93TXNnQm94JywgJ0xvY2F0aW9uIGluZm9ybWF0aW9uIG5vdCBvYnRhaW5lZCwgcGxlYXNlIGNoZWNrIGxvY2F0aW9uIHBlcm1pc3Npb25zJywgJ2Vycm9yJykKICAgICAgICAgIHRoaXMuJGJ1cy4kZW1pdCgnU2VuZENvbnNvbGVMb2dNc2cnLCAnTG9jYXRpb24gaW5mb3JtYXRpb24gbm90IG9idGFpbmVkLCBwbGVhc2UgY2hlY2sgbG9jYXRpb24gcGVybWlzc2lvbnMnLCAnZXJyb3InKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLm1hbnVhbExhdGl0dWRlID0gU3RyaW5nKHRoaXMubG9jYXRpb25MYXQpOwogICAgICAgICAgdGhpcy5tYW51YWxMb25naXR1ZGUgPSBTdHJpbmcodGhpcy5sb2NhdGlvbkxvbik7CiAgICAgICAgICBsYXQgPSBwYXJzZUZsb2F0KFN0cmluZyh0aGlzLm1hbnVhbExhdGl0dWRlKS50cmltKCkpOwogICAgICAgICAgbG5nID0gcGFyc2VGbG9hdChTdHJpbmcodGhpcy5tYW51YWxMb25naXR1ZGUpLnRyaW0oKSk7CiAgICAgICAgICB0aGlzLiRidXMuJGVtaXQoJ1BvbGFyUG9pbnRBbHRpdHVkZScsIGxhdCkKICAgICAgICAgIAogICAgICAgICAgY29uc3QgbG9jID0gewogICAgICAgICAgICBzaG9ydF9uYW1lOiAnVW5rbm93bicsCiAgICAgICAgICAgIGNvdW50cnk6ICdVbmtub3duJywKICAgICAgICAgICAgbG5nOiBsbmcsCiAgICAgICAgICAgIGxhdDogbGF0LAogICAgICAgICAgICBhbHQ6IDAsIAogICAgICAgICAgICBhY2N1cmFjeTogMCwgCiAgICAgICAgICAgIHN0cmVldF9hZGRyZXNzOiAnJwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5zZXRMb2NhdGlvbihsb2MpCiAgICAgICAgICB0aGlzLiRidXMuJGVtaXQoJ1Nob3dQb3NpdGlvbkluZm8nLCBsYXQsIGxuZyk7CiAgICAgICAgICB0aGlzLiRidXMuJGVtaXQoJ0FwcFNlbmRNZXNzYWdlJywgJ1Z1ZV9Db21tYW5kJywgJ2N1cnJlY3RMb2NhdGlvbjonKyBsYXQgKyAnOicgKyBsbmcpOwogICAgICAgICAgdGhpcy4kYnVzLiRlbWl0KCdTZW5kQ29uc29sZUxvZ01zZycsICdTZXQgQ3VycmVudCBMb2NhdGlvbjonICsgbGF0ICsgJywnICsgbG5nLCAnaW5mbycpCiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIHRoaXMuJGJ1cy4kZW1pdCgnU2VuZENvbnNvbGVMb2dNc2cnLCBg5L2N572u5aSE55CG6ZSZ6K+vOiAke2Vycm9yLm1lc3NhZ2V9YCwgJ2Vycm9yJyk7CiAgICAgIH0KICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsgTG9jYXRpb25NZ3IgfSwKICB3YXRjaDogewogICAgdXNlQXV0b0xvY2F0aW9uOiBmdW5jdGlvbiAobmV3VmFsLCBvbGRWYWwpIHsKICAgICAgLy8g6L+Z5Liq5Ye95pWw5bCG5ZyoIHVzZUF1dG9Mb2NhdGlvbiDmlLnlj5jml7booqvosIPnlKgKICAgICAgLy8gbmV3VmFsIOaYryB1c2VBdXRvTG9jYXRpb24g55qE5paw5YC8CiAgICAgIC8vIG9sZFZhbCDmmK8gdXNlQXV0b0xvY2F0aW9uIOeahOaXp+WAvAogICAgICBjb25zb2xlLmxvZygndXNlQXV0b0xvY2F0aW9uIGNoYW5nZWQgZnJvbScsIG9sZFZhbCwgJ3RvJywgbmV3VmFsKTsKICAgIH0KICB9Cn0K"},{"version":3,"sources":["location-dialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"location-dialog.vue","sourceRoot":"src/components","sourcesContent":["// Stellarium Web - Copyright (c) 2022 - Stellarium Labs SRL\n//\n// This program is licensed under the terms of the GNU AGPL v3, or\n// alternatively under a commercial licence.\n//\n// The terms of the AGPL v3 license can be found in the main directory of this\n// repository.\n\n<template>\n<v-dialog max-width=\"600\" v-model=\"$store.state.showLocationDialog\">\n  <v-container v-if=\"$store.state.showLocationDialog\" class=\"secondary white--text\">\n    <v-row>\n      <v-col cols=\"4\">\n        <v-text-field v-model=\"manualLatitude\" label=\"Latitude\" placeholder=\"Enter latitude\"></v-text-field>\n      </v-col>\n      <v-col cols=\"4\">\n        <v-text-field v-model=\"manualLongitude\" label=\"Longitude\" placeholder=\"Enter longitude\"></v-text-field>\n      </v-col>\n      <v-col cols=\"4\">\n        <v-spacer></v-spacer>\n        <v-btn @click=\"saveManualCoordinates\" color=\"primary\">Save Manual Coordinates</v-btn>\n      </v-col>\n    </v-row>\n    <v-card color=\"secondary\" flat>\n      <v-switch :label=\"$t('Use Autolocation')\" v-model=\"useAutoLocation\" @change=\"handleAutoLocationChange\"></v-switch>\n    </v-card>\n    <location-mgr v-on:locationSelected=\"setLocation\" :knownLocations=\"[]\" :startLocation=\"$store.state.currentLocation\" :realLocation=\"$store.state.autoDetectedLocation\"></location-mgr>\n    \n  </v-container>\n</v-dialog>\n</template>\n\n<script>\nimport LocationMgr from '@/components/location-mgr.vue'\n\nexport default {\n  data: function () {\n    return {\n      useAutoLocation: true,\n      manualLatitude: '',\n      manualLongitude: '',\n      locationLat: '',\n      locationLon: '',\n    }\n\n  },\n  computed: {\n    // useAutoLocation: {\n    //   get: function () {\n    //     return this.$store.state.useAutoLocation\n    //   },\n    //   set: function (b) {\n    //     this.$store.commit('setUseAutoLocation', b)\n    //   }\n    // }\n  },\n  mounted: function () {\n    this.$bus.$emit('Vue_Command', 'localMessage'); // 获取位置信息\n    // 检查 qtObj 是否可用\n    const checkQtObjAvailability = () => {\n      if (window.qtObj) {\n        this.$bus.$emit('SendConsoleLogMsg', 'qtObj 已可用', 'info');\n        // alert('qtObj 已可用');\n        // 可以在这里做一些初始化\n        this.callQt();\n      } else {\n        // this.$bus.$emit('SendConsoleLogMsg', 'qtObj 不可用，将在1秒后重试', 'warning');\n        setTimeout(checkQtObjAvailability, 1000);\n      }\n    };\n    \n    // 延迟检查，确保页面完全加载\n    setTimeout(checkQtObjAvailability, 2000);\n  },\n  created() {\n    this.$bus.$on('resetLocation', this.resetLocation);\n    this.$bus.$on('setLocationLatAndLon', this.setLocationLatAndLon);\n    this.$bus.$on('isAutoLocation', this.handleAutoLocationChange);\n    this.$bus.$on('sendGetLocation', this.sendGetLocation);\n  },\n  methods: {\n    callQt() {\n      try {\n        if (window.qtObj) {\n          const jsonStr = window.qtObj.getMyValue();\n          const data = JSON.parse(jsonStr); // 解析 JSON\n          this.$bus.$emit('SendConsoleLogMsg', \"data:\" +`Time: ${data.time},lat:${data.lat},long:${data.lon}, language: ${data.language}, WiFi: ${data.wifiname}`, 'info');  \n          this.sendGetLocation(data.lat, data.lon);\n          if (data.language == 'zh' || data.language == \"zh\") {\n            this.$bus.$emit('ClientLanguage', 'cn');\n            this.$bus.$emit('SendConsoleLogMsg', 'ClientLanguage: cn', 'info');\n          } else {\n            this.$bus.$emit('ClientLanguage', 'en');\n            this.$bus.$emit('SendConsoleLogMsg', 'ClientLanguage: en', 'info');\n          }\n          this.$bus.$emit('AppSendMessage', 'Vue_Command', 'localMessage:'+ data.lat + ':' + data.lon+':'+data.language +':'+data.wifiname);\n        } else {\n          this.$bus.$emit('SendConsoleLogMsg', 'qtObj 不可用', 'error');\n        }\n      } catch (error) {\n        this.$bus.$emit('SendConsoleLogMsg', `错误信息: ${error.message}`, 'error');\n        this.$bus.$emit('SendConsoleLogMsg', `错误堆栈: ${error.stack}`, 'error');\n      }\n    },\n \n    resetLocation: function (lat, lng,isAuto) {    // 手动修正位置\n      if (isAuto) return;\n      lat = Number(lat);\n      lng = Number(lng);\n      // console.log('触发位置更新resetLocation:', lat, lng)\n      if (isNaN(lat) || isNaN(lng)) {\n        this.manualLatitude = '';\n        this.manualLongitude = '';\n      } else {\n        this.manualLatitude = String(lat);\n        this.manualLongitude = String(lng);\n      }\n      this.saveManualCoordinates();\n \n    },\n    setLocationLatAndLon: function (lat, lng) {    // 自动修正位置\n      // this.$bus.$emit('SendConsoleLogMsg', 'setLocationLatAndLon:' + lat + ',' + lng, 'info')\n      this.locationLat = lat;\n      this.locationLon = lng;\n      if (this.useAutoLocation) {\n        this.manualLatitude = lat;\n        this.manualLongitude = lng;\n        this.$bus.$emit('AppSendMessage', 'Vue_Command', 'currectLocation:'+ lat + ':' + lng);\n      }\n      // this.$bus.$emit('SendConsoleLogMsg', '3------------修改当前本地位置:'+ lat + ':' + lng);\n    },\n    setLocation: function (loc) {\n      this.$store.commit('setCurrentLocation', loc)\n    },\n    saveManualCoordinates: function () {\n      if (this.useAutoLocation) {\n        this.useAutoLocation = false;\n      }\n      const lat = parseFloat(this.manualLatitude.trim());\n      const lng = parseFloat(this.manualLongitude.trim());\n      this.$bus.$emit('PolarPointAltitude', lat)\n      this.$bus.$emit('SendConsoleLogMsg', 'Set Current Location:' + lat + ',' + lng, 'info')\n      const loc = {\n        short_name: 'Unknown',\n        country: 'Unknown',\n        lng: lng,\n        lat: lat,\n        alt: 0, \n        accuracy: 0, \n        street_address: ''\n      }\n      this.setLocation(loc)\n      this.$bus.$emit('AppSendMessage', 'Vue_Command', 'saveToConfigFile:Coordinates:'+ lat + ',' + lng + ',' + this.useAutoLocation);\n      this.$bus.$emit('ShowPositionInfo', lat, lng);\n      this.$bus.$emit('updateMapPosition', lat,lng)\n\n\n    },\n    handleAutoLocationChange: function (newVal) {\n      // this.$bus.$emit('SendConsoleLogMsg', 'handleAutoLocationChange:' + newVal, 'info')\n      this.$bus.$emit('AppSendMessage', 'Vue_Command', 'saveToConfigFile:isAutoLocation:' + newVal)\n      if (newVal) {\n        this.$bus.$emit('AppSendMessage', 'Vue_Command', 'reGetLocation');\n        // this.$bus.$emit('SendConsoleLogMsg', '当前位置:' + this.locationLat + ',' + this.locationLon, 'info')\n        \n      }\n      const ConfigLat = parseFloat(this.manualLatitude.trim());\n      const ConfigLng = parseFloat(this.manualLongitude.trim());\n      this.$bus.$emit('AppSendMessage', 'Vue_Command', 'saveToConfigFile:Coordinates:'+ ConfigLat + ',' + ConfigLng + ',' + this.useAutoLocation);\n      \n    },\n    sendGetLocation: function (newlat, newlng) {\n      try {\n        this.locationLat = String(newlat || '');\n        this.locationLon = String(newlng || '');\n        // 确保转换为字符串后再使用trim()\n        let lat = parseFloat(String(this.locationLat || '').trim());\n        let lng = parseFloat(String(this.locationLon || '').trim());\n        this.$bus.$emit('SendConsoleLogMsg', 'sendGetLocation:' + lat + ',' + lng, 'info')\n        \n        if (isNaN(lat) || isNaN(lng)) {\n          this.$bus.$emit('showMsgBox', 'Location information not obtained, please check location permissions', 'error')\n          this.$bus.$emit('SendConsoleLogMsg', 'Location information not obtained, please check location permissions', 'error')\n        } else {\n          this.manualLatitude = String(this.locationLat);\n          this.manualLongitude = String(this.locationLon);\n          lat = parseFloat(String(this.manualLatitude).trim());\n          lng = parseFloat(String(this.manualLongitude).trim());\n          this.$bus.$emit('PolarPointAltitude', lat)\n          \n          const loc = {\n            short_name: 'Unknown',\n            country: 'Unknown',\n            lng: lng,\n            lat: lat,\n            alt: 0, \n            accuracy: 0, \n            street_address: ''\n          }\n          this.setLocation(loc)\n          this.$bus.$emit('ShowPositionInfo', lat, lng);\n          this.$bus.$emit('AppSendMessage', 'Vue_Command', 'currectLocation:'+ lat + ':' + lng);\n          this.$bus.$emit('SendConsoleLogMsg', 'Set Current Location:' + lat + ',' + lng, 'info')\n        }\n      } catch (error) {\n        this.$bus.$emit('SendConsoleLogMsg', `位置处理错误: ${error.message}`, 'error');\n      }\n    }\n  },\n  components: { LocationMgr },\n  watch: {\n    useAutoLocation: function (newVal, oldVal) {\n      // 这个函数将在 useAutoLocation 改变时被调用\n      // newVal 是 useAutoLocation 的新值\n      // oldVal 是 useAutoLocation 的旧值\n      console.log('useAutoLocation changed from', oldVal, 'to', newVal);\n    }\n  }\n}\n</script>\n\n<style>\n</style>\n"]}]}