{"remainingRequest":"/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/src/components/ChartComponent.vue?vue&type=style&index=0&id=98d7d5ac&scoped=true&lang=css&","dependencies":[{"path":"/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/src/components/ChartComponent.vue","mtime":1756885034407},{"path":"/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/node_modules/css-loader/dist/cjs.js","mtime":1756885033612},{"path":"/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1756885034208},{"path":"/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/node_modules/postcss-loader/src/index.js","mtime":1756885034000},{"path":"/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1756885033541},{"path":"/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/node_modules/vue-loader/lib/index.js","mtime":1756885034208}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5jaGFydC1wYW5lbCB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoNjQsIDY0LCA2NCwgMC41KTsKICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoNXB4KTsKICBib3JkZXItcmFkaXVzOiAxMHB4OwogIGJvcmRlcjogNHB4IHNvbGlkIHJnYmEoMTI4LCAxMjgsIDEyOCwgMC41KTsKICBib3gtc2l6aW5nOiBib3JkZXItYm94Owp9CgpAa2V5ZnJhbWVzIHNob3dQYW5lbEFuaW1hdGlvbiB7CiAgZnJvbSB7CiAgICBib3R0b206IC0xNTBweDsKICB9CiAgdG8gewogICAgYm90dG9tOiAxMHB4OwogIH0KfQoKQGtleWZyYW1lcyBoaWRlUGFuZWxBbmltYXRpb24gewogIGZyb20gewogICAgYm90dG9tOiAxMHB4OwogIH0KICB0byB7CiAgICBib3R0b206IC0xNTBweDsKICB9Cn0KCi5wYW5lbC1lbnRlci1hY3RpdmUgewogIGFuaW1hdGlvbjogc2hvd1BhbmVsQW5pbWF0aW9uIDAuMTVzIGZvcndhcmRzOwp9CgoucGFuZWwtbGVhdmUtYWN0aXZlIHsKICBhbmltYXRpb246IGhpZGVQYW5lbEFuaW1hdGlvbiAwLjE1cyBmb3J3YXJkczsKfQoKLmxpbmUtY2hhcnQgewogIHBvc2l0aW9uOmFic29sdXRlOwogIGJvdHRvbTogMXB4OwogIGxlZnQ6IDVweDsKfQoKLnNjYXR0ZXItY2hhcnQgewogIHBvc2l0aW9uOmFic29sdXRlOwogIHRvcDogMXB4OwogIHJpZ2h0OiAwcHg7Cn0KCi5idXR0b25zLWNvbnRhaW5lciB7CiAgZGlzcGxheTogZmxleDsKICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgcG9zaXRpb246IGFic29sdXRlOwogIHRvcDogLTM5cHg7CiAgbGVmdDogNXB4OwogIHJpZ2h0OiA1cHg7Cn0KCi5idG4tU3R5bGUgewogIHdpZHRoOiAzMHB4OwogIGhlaWdodDogMzBweDsgCgogIHVzZXItc2VsZWN0OiBub25lOwogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoNjQsIDY0LCA2NCwgMC41KTsKICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoNXB4KTsKICBib3JkZXI6IG5vbmU7CiAgYm9yZGVyLXJhZGl1czogNTAlOyAKICBib3gtc2l6aW5nOiBib3JkZXItYm94Owp9CgouYnRuLUxvb3BFeHAtZmFsc2UgewogIHdpZHRoOiAzMHB4OwogIGhlaWdodDogMzBweDsgCgogIHVzZXItc2VsZWN0OiBub25lOwogIGJhY2tncm91bmQtY29sb3I6IHJnYmEoNjQsIDY0LCA2NCwgMC41KTsKICBiYWNrZHJvcC1maWx0ZXI6IGJsdXIoNXB4KTsKICBib3JkZXI6IG5vbmU7CiAgYm9yZGVyLXJhZGl1czogNTAlOyAKICBib3gtc2l6aW5nOiBib3JkZXItYm94Owp9CgouYnRuLUxvb3BFeHAtdHJ1ZSB7CiAgd2lkdGg6IDMwcHg7CiAgaGVpZ2h0OiAzMHB4OyAKCiAgdXNlci1zZWxlY3Q6IG5vbmU7CiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSg2NCwgNjQsIDY0LCAwLjUpOwogIGJhY2tkcm9wLWZpbHRlcjogYmx1cig1cHgpOwogIC8qIGJvcmRlcjogbm9uZTsgKi8KICBib3JkZXItcmFkaXVzOiA1MCU7IAogIGJveC1zaXppbmc6IGJvcmRlci1ib3g7CgogIGFuaW1hdGlvbjogQW5pbWF0aW9uX3RydWUgaW5maW5pdGU7Cn0KCkBrZXlmcmFtZXMgQW5pbWF0aW9uX3RydWUgewogIGZyb20gewogICAgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7CiAgfQogIHRvIHsKICAgIHRyYW5zZm9ybTogcm90YXRlKC0xODBkZWcpOwogIH0KfQoKLmJ0bi1Jbkd1aWRpbmcgewogIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoNTEsIDIxOCwgMTIxLCAxKTsKfQoKLmJ0bi1JbkNhbGlicmF0aW9uIHsKICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDI1NSwgMTY1LCAwLCAxKTsKfQoKLmJ0bi1TdGFyTG9zdEFsZXJ0IHsKICBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDI1NSwgMCwgMCwgMSk7Cn0KCi5idG4tbnVsbCB7CiAgYm9yZGVyOiBub25lOwp9CgouYnRuLUd1aWRlcjphY3RpdmUsCi5idG4tU3R5bGU6YWN0aXZlIHsKICB0cmFuc2Zvcm06IHNjYWxlKDAuOTUpOyAvKiDngrnlh7vml7bnvKnlsI/mjInpkq4gKi8KICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNyk7Cn0KCg=="},{"version":3,"sources":["ChartComponent.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"ChartComponent.vue","sourceRoot":"src/components","sourcesContent":["<template>\n<transition name=\"panel\">\n  <div class=\"chart-panel\" :style=\"{ bottom: bottom + 'px', left: ComponentPadding + 'px', right: ComponentPadding + 'px', height: height + 'px' }\">\n    <LineChart ref=\"linechart\" class=\"line-chart\"/>\n    \n    <ScatterChart ref=\"scatterchart\" class=\"scatter-chart\"/>\n\n    <div class=\"buttons-container\">\n\n      <button :class=\"LoopExpSwitchBtnClass\" :style=\"{ animationDuration: ExpTime + 'ms' }\" @touchend=\"LoopExpSwitch\">\n        <div style=\"display: flex; justify-content: center; align-items: center;\">\n          <img src=\"@/assets/images/svg/ui/GuiderLoopExp.svg\" height=\"20px\" style=\"min-height: 20px; pointer-events: none;\"></img>\n        </div>\n      </button>\n\n      <button class=\"btn-Style\" :class=\"GuiderSwitchBtnClass\"\n        @mousedown=\"startPress\" @mouseup=\"endPress\"\n        @touchstart=\"startPress\" @touchend=\"endPress\">\n        <div style=\"display: flex; justify-content: center; align-items: center;\">\n          <img src=\"@/assets/images/svg/ui/Guider.svg\" height=\"20px\" style=\"min-height: 20px; pointer-events: none;\"></img>\n        </div>\n      </button>\n\n      <button class=\"btn-Style\" @touchend=\"ExpTimeSwitch\">\n        <span v-if=\"ExpTime === 1000\">\n          <div style=\"display: flex; justify-content: center; align-items: center;\">\n            <img src=\"@/assets/images/svg/ui/Exp-1000.svg\" height=\"25px\" style=\"min-height: 25px; pointer-events: none;\"></img>\n          </div>\n        </span>\n        <span v-if=\"ExpTime === 2000\">\n          <div style=\"display: flex; justify-content: center; align-items: center;\">\n            <img src=\"@/assets/images/svg/ui/Exp-2000.svg\" height=\"25px\" style=\"min-height: 25px; pointer-events: none;\"></img>\n          </div>\n        </span>\n        <span v-if=\"ExpTime === 500\">\n          <div style=\"display: flex; justify-content: center; align-items: center;\">\n            <img src=\"@/assets/images/svg/ui/Exp-500.svg\" height=\"25px\" style=\"min-height: 25px; pointer-events: none;\"></img>\n          </div>\n        </span>\n      </button>\n\n      <button class=\"btn-Style\" @touchend=\"DataClear\">\n        <div style=\"display: flex; justify-content: center; align-items: center;\">\n          <img src=\"@/assets/images/svg/ui/delete.svg\" height=\"20px\" style=\"min-height: 20px; pointer-events: none;\"></img>\n        </div>\n      </button>\n\n      <button class=\"btn-Style\" @touchend=\"RangeSwitch\">\n        <div style=\"display: flex; justify-content: center; align-items: center;\">\n          <img src=\"@/assets/images/svg/ui/suofang.svg\" height=\"20px\" style=\"min-height: 20px; pointer-events: none;\"></img>\n        </div>\n      </button>\n\n    </div>\n    \n  </div>\n</transition>\n</template>\n\n<script>\nimport LineChart from './Chart-Line.vue';\nimport ScatterChart from './Chart-Scatter.vue';\n\nexport default {\n  name: 'ChartsPanel',\n  data() {\n    return {\n      bottom: 10,\n      ComponentPadding: 0,\n      height: 90,\n      ExpTime: 1000,\n      isGuiding: false,\n      isLoopping: false,\n      CurrentGuiderStatus: 'null',\n\n      pressTimer: null,\n      longPressThreshold: 1000,\n      isLongPress: false, // 标记是否为长按\n      canClick: true,\n\n      GuiderConnect: false,\n\n    };\n  },\n  components: {\n    LineChart,\n    ScatterChart,\n  },\n  created() {\n    this.$bus.$on('GuiderSwitchStatus', this.GuiderSwitchStatus);\n    this.$bus.$on('GuiderLoopExpStatus', this.GuiderLoopExpStatus);\n    this.$bus.$on('GuiderStatus', this.GuiderStatus);\n    this.$bus.$on('GuiderConnected', this.GuiderConnected);\n  },\n  mounted() {\n    this.updatePosition(); // 初始化位置\n    window.addEventListener('resize', this.updatePosition);\n  },\n  beforeDestroy() {\n    window.removeEventListener('resize', this.updatePosition);\n  },\n  computed: {\n    GuiderSwitchBtnClass() {\n      if(!this.isGuiding) {\n        return 'btn-null';\n      } else {\n        return [\n          {\n            'btn-InGuiding': this.CurrentGuiderStatus === 'InGuiding',\n            'btn-InCalibration': this.CurrentGuiderStatus === 'InCalibration',\n            'btn-StarLostAlert': this.CurrentGuiderStatus === 'StarLostAlert',\n            'btn-null': this.CurrentGuiderStatus === 'null',\n          }\n        ];\n      }\n    },\n    LoopExpSwitchBtnClass() {\n        return [\n          {\n            'btn-LoopExp-true': this.isLoopping, \n            'btn-LoopExp-false': !this.isLoopping, \n          },\n        ];\n    }\n  },\n  methods: {\n    updatePosition() {\n      const screenWidth = window.innerWidth;\n      const halfWidth = screenWidth / 2 - 250;\n      this.ComponentPadding = Math.max(halfWidth, 170);\n      // console.log('Updated Padding:', this.ComponentPadding);\n\n      // 计算宽度\n      const newWidth = screenWidth - (this.ComponentPadding * 2);\n      // console.log('update LineChart Width:', newWidth);\n      this.$bus.$emit('updateLineChartWidth', newWidth);\n    },\n    startPress() {\n      this.isLongPress = false; // 重置长按标记\n      this.pressTimer = setTimeout(() => {\n        this.isLongPress = true; // 标记为长按\n        this.handleLongPress();\n      }, this.longPressThreshold);\n    },\n    endPress() {\n      clearTimeout(this.pressTimer); // 清除定时器\n      if (!this.isLongPress) {\n        this.handleClick(); // 如果不是长按，则触发点击事件\n      }\n      this.pressTimer = null; // 重置定时器\n    },\n    handleClick() {\n      if (!this.canClick) return; // 如果不可点击，直接返回\n      this.canClick = false; // 设置为不可点击\n      // console.log(\"Button clicked\");\n\n      this.GuiderSwitch();\n\n      // 恢复点击权限\n      setTimeout(() => {\n        this.canClick = true;\n      }, 1000); // 1秒后恢复\n    },\n    handleLongPress() {\n      if(this.isGuiding) return;\n      // 长按事件的处理\n      console.log(\"Button long pressed\");\n\n      this.$bus.$emit('ShowConfirmDialog', 'Recalibrate', \"Are you sure you need to clear the calibration data and recalibrate?\", 'Recalibrate');\n    },\n\n    GuiderSwitch() {\n      if(this.isLoopping) {\n        this.$bus.$emit('AppSendMessage', 'Vue_Command', 'GuiderSwitch:'+!this.isGuiding);\n      } else {\n        this.$bus.$emit('showMsgBox', 'Please open the loop exposure first.', 'error');\n      }\n    },\n\n    LoopExpSwitch() {\n      if (this.GuiderConnect) {\n        this.$bus.$emit('AppSendMessage', 'Vue_Command', 'GuiderLoopExpSwitch:' + !this.isLoopping);\n      } else {\n        this.$bus.$emit('showMsgBox', 'Please connect the Guider camera first.', 'error');\n      }\n    },\n\n    ExpTimeSwitch() {\n      if (this.ExpTime === 1000) {\n        this.ExpTime = 2000;\n      } else if (this.ExpTime === 2000) {\n        this.ExpTime = 500;\n      } else if (this.ExpTime === 500) {\n        this.ExpTime = 1000;\n      }\n      this.$bus.$emit('AppSendMessage', 'Vue_Command', 'GuiderExpTimeSwitch:' + this.ExpTime);\n    },\n\n    GuiderSwitchStatus(value) {\n      if(value === 'true') {\n        this.isGuiding = true;\n      } else {\n        this.isGuiding = false;\n        this.CurrentGuiderStatus = 'null';\n        this.$bus.$emit('GuiderStop');\n      }\n      console.log('GuiderSwitchStatus:', this.isGuiding);\n    },\n\n    GuiderLoopExpStatus(value) {\n      if(value === 'true') {\n        this.isLoopping = true;\n      } else {\n        this.isLoopping = false;\n        this.isGuiding = false;\n      }\n      console.log('GuiderLoopExpSwitchStatus:', this.isLoopping);\n    },\n\n    GuiderStatus(status) {\n      if(status === 'InGuiding') {\n        this.CurrentGuiderStatus = 'InGuiding';\n      } else if(status === 'InCalibration') {\n        this.CurrentGuiderStatus = 'InCalibration';\n      } else if(status === 'StarLostAlert') {\n        this.CurrentGuiderStatus = 'StarLostAlert';\n        this.$bus.$emit('showMsgBox', 'Lost guiding star target.', 'error');\n      }\n      console.log('GuiderStatus:', this.CurrentGuiderStatus);\n      this.$bus.$emit('SendConsoleLogMsg', 'GuiderStatus:' + this.CurrentGuiderStatus, 'info');\n    },\n    \n    DataClear() {\n      this.$bus.$emit('clearChartData');\n      this.$bus.$emit('AppSendMessage', 'Vue_Command', 'clearGuiderData');\n    },\n    RangeSwitch() {\n      this.$bus.$emit('ChartRangeSwitch');\n    },\n    GuiderConnected(num) {\n      if(num === 0){\n        this.GuiderConnect = false;\n        // this.$bus.$emit('showMsgBox', 'Guider is not connected.', 'error');\n      } else {\n        this.GuiderConnect = true;\n        // this.$bus.$emit('showMsgBox', 'Guider is connected.', 'info');\n      }\n    },\n  }\n}\n</script>\n\n<style scoped>\n.chart-panel {\n  position: absolute;\n  background-color: rgba(64, 64, 64, 0.5);\n  backdrop-filter: blur(5px);\n  border-radius: 10px;\n  border: 4px solid rgba(128, 128, 128, 0.5);\n  box-sizing: border-box;\n}\n\n@keyframes showPanelAnimation {\n  from {\n    bottom: -150px;\n  }\n  to {\n    bottom: 10px;\n  }\n}\n\n@keyframes hidePanelAnimation {\n  from {\n    bottom: 10px;\n  }\n  to {\n    bottom: -150px;\n  }\n}\n\n.panel-enter-active {\n  animation: showPanelAnimation 0.15s forwards;\n}\n\n.panel-leave-active {\n  animation: hidePanelAnimation 0.15s forwards;\n}\n\n.line-chart {\n  position:absolute;\n  bottom: 1px;\n  left: 5px;\n}\n\n.scatter-chart {\n  position:absolute;\n  top: 1px;\n  right: 0px;\n}\n\n.buttons-container {\n  display: flex;\n  justify-content: space-between;\n  position: absolute;\n  top: -39px;\n  left: 5px;\n  right: 5px;\n}\n\n.btn-Style {\n  width: 30px;\n  height: 30px; \n\n  user-select: none;\n  background-color: rgba(64, 64, 64, 0.5);\n  backdrop-filter: blur(5px);\n  border: none;\n  border-radius: 50%; \n  box-sizing: border-box;\n}\n\n.btn-LoopExp-false {\n  width: 30px;\n  height: 30px; \n\n  user-select: none;\n  background-color: rgba(64, 64, 64, 0.5);\n  backdrop-filter: blur(5px);\n  border: none;\n  border-radius: 50%; \n  box-sizing: border-box;\n}\n\n.btn-LoopExp-true {\n  width: 30px;\n  height: 30px; \n\n  user-select: none;\n  background-color: rgba(64, 64, 64, 0.5);\n  backdrop-filter: blur(5px);\n  /* border: none; */\n  border-radius: 50%; \n  box-sizing: border-box;\n\n  animation: Animation_true infinite;\n}\n\n@keyframes Animation_true {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(-180deg);\n  }\n}\n\n.btn-InGuiding {\n  border: 1px solid rgba(51, 218, 121, 1);\n}\n\n.btn-InCalibration {\n  border: 1px solid rgba(255, 165, 0, 1);\n}\n\n.btn-StarLostAlert {\n  border: 1px solid rgba(255, 0, 0, 1);\n}\n\n.btn-null {\n  border: none;\n}\n\n.btn-Guider:active,\n.btn-Style:active {\n  transform: scale(0.95); /* 点击时缩小按钮 */\n  background-color: rgba(255, 255, 255, 0.7);\n}\n\n</style>\n\n"]}]}