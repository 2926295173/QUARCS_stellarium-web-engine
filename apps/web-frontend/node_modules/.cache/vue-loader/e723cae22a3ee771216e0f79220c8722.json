{"remainingRequest":"/app/node_modules/vue-loader/lib/index.js??vue-loader-options!/app/src/components/DeviceAllocationPanel.vue?vue&type=script&lang=js&","dependencies":[{"path":"/app/src/components/DeviceAllocationPanel.vue","mtime":1752115797896},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":1707125360000},{"path":"/app/node_modules/thread-loader/dist/cjs.js","mtime":1707125360000},{"path":"/app/node_modules/babel-loader/lib/index.js","mtime":1707125360000},{"path":"/app/node_modules/cache-loader/dist/cjs.js","mtime":1707125360000},{"path":"/app/node_modules/vue-loader/lib/index.js","mtime":1707125450000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBEZXZpY2VQaWNrZXIgZnJvbSAnLi9EZXZpY2VQaWNrZXIudnVlJzsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnRGV2aWNlQWxsb2NhdGlvblBhbmVsJywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYm90dG9tOiA3MCwKICAgICAgdG9wOiA3MCwKICAgICAgRGV2aWNlTGlzdDogWwogICAgICAgIC8vIHsgRGV2aWNlTmFtZTogJ1FIWSBDQ0QgUUhZNUlJSTQ2MkMtMDc1JywgRGV2aWNlSW5kZXg6IDAsIGlzQmluZDogZmFsc2UgfSwKICAgICAgICAvLyB7IERldmljZU5hbWU6ICdRSFkgQ0NEIFFIWTI2OEMtNTlhYThjNCcsIERldmljZUluZGV4OiAxLCBpc0JpbmQ6IGZhbHNlIH0sCiAgICAgICAgLy8geyBEZXZpY2VOYW1lOiAnTFgyMDAgT25TdGVwJywgRGV2aWNlSW5kZXg6IDIsIGlzQmluZDogZmFsc2UgfSwKICAgICAgICAvLyB7IERldmljZU5hbWU6ICdRSFkgQ0NEIFFIWTE5MjBNLTA3NScsIERldmljZUluZGV4OiAzLCBpc0JpbmQ6IGZhbHNlIH0sCiAgICAgICAgLy8geyBEZXZpY2VOYW1lOiAnUUhZIENDRCBRSFkxNjNDLTA3NScsIERldmljZUluZGV4OiA0LCBpc0JpbmQ6IGZhbHNlIH0sCiAgICAgIF0sCgoKICAgICAgRGV2aWNlVHlwZXM6IFsKICAgICAgICAvLyB7IERldmljZVR5cGU6ICdHdWlkZXInLCBEZXZpY2VOYW1lOiAnJywgaXNCaW5kOiBmYWxzZSwgaXNTZWxlY3RlZDogZmFsc2UgfSwKICAgICAgICAvLyB7IERldmljZVR5cGU6ICdNYWluIENhbWVyYScsIERldmljZU5hbWU6ICcnLCBpc0JpbmQ6IGZhbHNlLCBpc1NlbGVjdGVkOiBmYWxzZSB9LAogICAgICAgIC8vIHsgRGV2aWNlVHlwZTogJ01vdW50JywgRGV2aWNlTmFtZTogJycsIGlzQmluZDogZmFsc2UsIGlzU2VsZWN0ZWQ6IGZhbHNlIH0sCgogICAgICAgIC8vIHsgRGV2aWNlVHlwZTogJ0ZvY3VzZXInLCBEZXZpY2VOYW1lOiAnJywgaXNCaW5kOiBmYWxzZSwgaXNTZWxlY3RlZDogZmFsc2UgfSwKICAgICAgICAvLyB7IERldmljZVR5cGU6ICdQb2xlIENhbWVyYScsIERldmljZU5hbWU6ICcnLCBpc0JpbmQ6IGZhbHNlLCBpc1NlbGVjdGVkOiBmYWxzZSB9LAogICAgICAgIC8vIHsgRGV2aWNlVHlwZTogJ0NGVycsIERldmljZU5hbWU6ICcnLCBpc0JpbmQ6IGZhbHNlLCBpc1NlbGVjdGVkOiBmYWxzZSB9LAogICAgICBdLAoKICAgICAgUG9zaXRpb246IFsKICAgICAgICB7IHRvcDogJzEyJScsIGxlZnQ6ICcxNXB4JyB9LAogICAgICAgIHsgdG9wOiAnMzklJywgbGVmdDogJzE1cHgnIH0sCiAgICAgICAgeyB0b3A6ICc2NiUnLCBsZWZ0OiAnMTVweCcgfSwKCiAgICAgICAgeyB0b3A6ICcxMiUnLCBsZWZ0OiAnMTc1cHgnIH0sCiAgICAgICAgeyB0b3A6ICczOSUnLCBsZWZ0OiAnMTc1cHgnIH0sCiAgICAgICAgeyB0b3A6ICc2NiUnLCBsZWZ0OiAnMTc1cHgnIH0sCiAgICAgIF0sCiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuJGJ1cy4kb24oJ1NlbGVjdFBpY2tlckluZGV4JywgdGhpcy5TZWxlY3RQaWNrZXJJbmRleCk7CiAgICB0aGlzLiRidXMuJG9uKCdBZGREZXZpY2VUeXBlJyx0aGlzLkFkZERldmljZVR5cGUpOwogICAgdGhpcy4kYnVzLiRvbignRGV2aWNlVG9CZUFsbG9jYXRlZCcsdGhpcy5EZXZpY2VUb0JlQWxsb2NhdGVkKTsKICAgIHRoaXMuJGJ1cy4kb24oJ0RldmljZUNvbm5lY3RTdWNjZXNzJywgdGhpcy5EZXZpY2VDb25uZWN0U3VjY2Vzcyk7CiAgICB0aGlzLiRidXMuJG9uKCdCaW5kRGV2aWNlSW5kZXgnLCB0aGlzLkJpbmRpbmdEZXZpY2UpOwogICAgdGhpcy4kYnVzLiRvbignVW5CaW5kRGV2aWNlSW5kZXgnLCB0aGlzLlVuQmluZGluZ0RldmljZSk7CiAgICB0aGlzLiRidXMuJG9uKCdjbGVhckRldmljZUFsbG9jYXRpb25MaXN0Jyx0aGlzLmNsZWFyRGV2aWNlQWxsb2NhdGlvbkxpc3QpOwogICAgdGhpcy4kYnVzLiRvbignZGVsZXRlRGV2aWNlVHlwZUFsbG9jYXRpb25MaXN0Jyx0aGlzLmRlbGV0ZURldmljZVR5cGVBbGxvY2F0aW9uTGlzdCk7CiAgICB0aGlzLiRidXMuJG9uKCdkZWxldGVEZXZpY2VBbGxvY2F0aW9uTGlzdCcsdGhpcy5kZWxldGVEZXZpY2VBbGxvY2F0aW9uTGlzdCk7CiAgICB0aGlzLiRidXMuJG9uKCdsb2FkQmluZERldmljZUxpc3QnLHRoaXMubG9hZEJpbmREZXZpY2VMaXN0KTsKICAgIHRoaXMuJGJ1cy4kb24oJ2xvYWRCaW5kRGV2aWNlVHlwZUxpc3QnLHRoaXMubG9hZEJpbmREZXZpY2VUeXBlTGlzdCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBTZWxlY3RQaWNrZXJJbmRleChudW0pIHsKICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMuRGV2aWNlVHlwZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICB0aGlzLkRldmljZVR5cGVzW2ldLmlzU2VsZWN0ZWQgPSBmYWxzZTsKICAgICAgfQogICAgICBjb25zb2xlLmxvZygnU2VsZWN0IFBpY2tlciBJbmRleDonLCBudW0pOwogICAgICBpZighdGhpcy5EZXZpY2VUeXBlc1tudW1dLmlzQmluZCl7CiAgICAgICAgdGhpcy5EZXZpY2VUeXBlc1tudW1dLmlzU2VsZWN0ZWQgPSB0cnVlOwogICAgICB9CiAgICB9LAoKICAgIFNlbGVjdGVkRGV2aWNlTmFtZShkZXZpY2UpIHsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLkRldmljZVR5cGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHRoaXMuRGV2aWNlVHlwZXNbaV0uRGV2aWNlTmFtZSA9PT0gZGV2aWNlLkRldmljZU5hbWUpIHsKICAgICAgICAgIHRoaXMuRGV2aWNlVHlwZXNbaV0uRGV2aWNlTmFtZSA9ICcnOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLkRldmljZVR5cGVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKHRoaXMuRGV2aWNlVHlwZXNbaV0uaXNTZWxlY3RlZCA9PT0gdHJ1ZSkgewogICAgICAgICAgdGhpcy5EZXZpY2VUeXBlc1tpXS5EZXZpY2VOYW1lID0gZGV2aWNlLkRldmljZU5hbWU7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIEFkZERldmljZVR5cGUoRGV2aWNlVHlwZSkgewogICAgICBjb25zdCBleGlzdHMgPSB0aGlzLkRldmljZVR5cGVzLnNvbWUoaXRlbSA9PiBpdGVtLkRldmljZVR5cGUgPT09IERldmljZVR5cGUpOwogICAgICBpZiAoZXhpc3RzKSB7CiAgICAgICAgY29uc29sZS5sb2coJ0RldmljZSBUeXBlIGFscmVhZHkgZXhpc3RzOicsIERldmljZVR5cGUpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUubG9nKCdBZGQgRGV2aWNlIFR5cGU6JywgRGV2aWNlVHlwZSk7CiAgICAgICAgdGhpcy5EZXZpY2VUeXBlcy5wdXNoKHtEZXZpY2VUeXBlOiBEZXZpY2VUeXBlLCBEZXZpY2VOYW1lOiAnJywgaXNCaW5kOiBmYWxzZSwgaXNTZWxlY3RlZDogZmFsc2UgfSk7CiAgICAgIH0KICAgIH0sCgogICAgRGV2aWNlVG9CZUFsbG9jYXRlZChpbmRleCxuYW1lKSB7CiAgICAgIGNvbnN0IGV4aXN0czEgPSB0aGlzLkRldmljZUxpc3Quc29tZShpdGVtID0+IGl0ZW0uRGV2aWNlTmFtZSA9PT0gbmFtZSk7CiAgICAgIGNvbnN0IGV4aXN0czIgPSB0aGlzLkRldmljZVR5cGVzLnNvbWUoaXRlbSA9PiBpdGVtLkRldmljZU5hbWUgPT09IG5hbWUpOwogICAgICBjb25zb2xlLmxvZygndGhpcy5EZXZpY2VMaXN0OicsIHRoaXMuRGV2aWNlTGlzdCk7CiAgICAgIGlmIChleGlzdHMxKSB7CiAgICAgICAgY29uc29sZS5sb2coJ0RldmljZSBhbHJlYWR5IGV4aXN0czonLCBuYW1lKTsKICAgICAgICB0aGlzLiRidXMuJGVtaXQoJ1NlbmRDb25zb2xlTG9nTXNnJywgJ0RldmljZSBhbHJlYWR5IGV4aXN0czonICsgaW5kZXggKyAnOicgKyBuYW1lLCAnaW5mbycpOwogICAgICB9IGVsc2UgewogICAgICAgIGlmIChleGlzdHMyKSB7CiAgICAgICAgICB0aGlzLiRidXMuJGVtaXQoJ1NlbmRDb25zb2xlTG9nTXNnJywgJ0RldmljZSBhbHJlYWR5IGV4aXN0czonICsgaW5kZXggKyAnOicgKyBuYW1lLCAnaW5mbycpOwogICAgICAgICAgdGhpcy5EZXZpY2VMaXN0LnB1c2goe0RldmljZU5hbWU6IG5hbWUsIERldmljZUluZGV4OiBpbmRleCwgaXNCaW5kOiB0cnVlIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRidXMuJGVtaXQoJ1NlbmRDb25zb2xlTG9nTXNnJywgJ0FkZCBEZXZpY2UgVG8gQmUgQWxsb2NhdGVkOicgKyBpbmRleCArICc6JyArIG5hbWUsICdpbmZvJyk7CiAgICAgICAgICBjb25zb2xlLmxvZygnQWRkIERldmljZSBUbyBCZSBBbGxvY2F0ZWQ6JywgaW5kZXgsIG5hbWUpOwogICAgICAgICAgdGhpcy5EZXZpY2VMaXN0LnB1c2goe0RldmljZU5hbWU6IG5hbWUsIERldmljZUluZGV4OiBpbmRleCwgaXNCaW5kOiBmYWxzZSB9KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgRGV2aWNlQ29ubmVjdFN1Y2Nlc3ModHlwZSwgRGV2aWNlTmFtZSwgRHJpdmVyTmFtZSwgaXNCaW5kID0gdHJ1ZSkgewogICAgICBpZiAodHlwZSA9PSAnJyB8fCB0eXBlID09ICJ1bmRlZmluZWQiIHx8IHR5cGUgPT0gbnVsbCB8fCBEcml2ZXJOYW1lID09ICcnIHx8IERyaXZlck5hbWUgPT0gInVuZGVmaW5lZCIgfHwgRHJpdmVyTmFtZSA9PSBudWxsKXsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGxldCBmb3VuZCA9IGZhbHNlOwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuRGV2aWNlVHlwZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAodGhpcy5EZXZpY2VUeXBlc1tpXS5EZXZpY2VUeXBlID09PSB0eXBlKSB7CiAgICAgICAgICB0aGlzLkRldmljZVR5cGVzW2ldLkRldmljZU5hbWUgPSBEZXZpY2VOYW1lOwogICAgICAgICAgdGhpcy5EZXZpY2VUeXBlc1tpXS5pc0JpbmQgPSBpc0JpbmQ7CiAgICAgICAgICB0aGlzLkRldmljZVR5cGVzW2ldLmlzU2VsZWN0ZWQgPSBmYWxzZTsKICAgICAgICAgIGZvdW5kID0gdHJ1ZTsgLy8g5qCH6K6w5bey5om+5Yiw5Yy56YWN6aG5CiAgICAgICAgICBicmVhazsgLy8g5om+5Yiw5ZCO5Y+v5Lul6Lez5Ye65b6q546v77yM5LyY5YyW5oCn6IO9CiAgICAgICAgfQogICAgICB9CgogICAgICAvLyDlpoLmnpzmsqHmnInmib7liLDljLnphY3pobnvvIzmt7vliqDmlrDnmoTorr7lpIflr7nosaEKICAgICAgaWYgKCFmb3VuZCkgewogICAgICAgIHRoaXMuRGV2aWNlVHlwZXMucHVzaCh7CiAgICAgICAgICBEZXZpY2VUeXBlOiB0eXBlLAogICAgICAgICAgRGV2aWNlTmFtZTogRGV2aWNlTmFtZSwKICAgICAgICAgIGlzQmluZDogaXNCaW5kLAogICAgICAgICAgaXNTZWxlY3RlZDogZmFsc2UsCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgY29uc3QgaW5kZXhUb1JlbW92ZSA9IHRoaXMuRGV2aWNlTGlzdC5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLkRldmljZU5hbWUgPT09IERldmljZU5hbWUpOwogICAgICBpZiAoaW5kZXhUb1JlbW92ZSAhPT0gLTEpIHsKICAgICAgICB0aGlzLkRldmljZUxpc3RbaW5kZXhUb1JlbW92ZV0uaXNCaW5kID0gaXNCaW5kOwogICAgICAgIHRoaXMuJGJ1cy4kZW1pdCgnU2VuZENvbnNvbGVMb2dNc2cnLCAnIEJpbmRpbmcgRGV2aWNlIFN1Y2Nlc3M6JyArIHR5cGUgKyAnOicgKyB0aGlzLkRldmljZUxpc3RbaW5kZXhUb1JlbW92ZV0uRGV2aWNlSW5kZXgrJzogJysgdGhpcy5EZXZpY2VMaXN0W2luZGV4VG9SZW1vdmVdLmlzQmluZCwgJ2luZm8nKTsKICAgICAgfQogICAgfSwKCiAgICBCaW5kaW5nRGV2aWNlKGluZGV4KSB7CiAgICAgIGNvbnN0IHR5cGUgPSB0aGlzLkRldmljZVR5cGVzW2luZGV4XS5EZXZpY2VUeXBlOwogICAgICBjb25zdCBuYW1lID0gdGhpcy5EZXZpY2VUeXBlc1tpbmRleF0uRGV2aWNlTmFtZTsKCiAgICAgIGNvbnN0IERldmljZU5hbWVJbmRleCA9IHRoaXMuRGV2aWNlTGlzdC5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLkRldmljZU5hbWUgPT09IG5hbWUpOwogICAgICBpZiAoRGV2aWNlTmFtZUluZGV4ICE9PSAtMSkgewogICAgICAgIHRoaXMuJGJ1cy4kZW1pdCgnQXBwU2VuZE1lc3NhZ2UnLCAnVnVlX0NvbW1hbmQnLCAnQmluZGluZ0RldmljZTonICsgdHlwZSArICc6JyArIHRoaXMuRGV2aWNlTGlzdFtEZXZpY2VOYW1lSW5kZXhdLkRldmljZUluZGV4KTsKICAgICAgICB0aGlzLiRidXMuJGVtaXQoJ1NlbmRDb25zb2xlTG9nTXNnJywgJ0JpbmRpbmcgRGV2aWNlOicgKyB0eXBlICsgJzonICsgdGhpcy5EZXZpY2VMaXN0W0RldmljZU5hbWVJbmRleF0uRGV2aWNlSW5kZXgsICdpbmZvJyk7CiAgICAgIH0KICAgIH0sCgogICAgVW5CaW5kaW5nRGV2aWNlKGluZGV4KSB7CiAgICAgIGNvbnN0IHR5cGUgPSB0aGlzLkRldmljZVR5cGVzW2luZGV4XS5EZXZpY2VUeXBlOwogICAgICBjb25zdCBuYW1lID0gdGhpcy5EZXZpY2VUeXBlc1tpbmRleF0uRGV2aWNlTmFtZTsKCgogICAgICB0aGlzLiRidXMuJGVtaXQoJ0FwcFNlbmRNZXNzYWdlJywgJ1Z1ZV9Db21tYW5kJywgJ1VuQmluZGluZ0RldmljZTonICsgdHlwZSk7CiAgICAgIHRoaXMuJGJ1cy4kZW1pdCgnU2VuZENvbnNvbGVMb2dNc2cnLCAnVW5CaW5kaW5nIERldmljZTonICsgdHlwZSwgJ2luZm8nKTsKCiAgICAgIHRoaXMuRGV2aWNlVHlwZXNbaW5kZXhdLmlzQmluZCA9IGZhbHNlOwogICAgICB0aGlzLkRldmljZVR5cGVzW2luZGV4XS5EZXZpY2VOYW1lID0gJyc7CiAgICAgIGNvbnN0IGluZGV4VG9SZW1vdmUgPSB0aGlzLkRldmljZUxpc3QuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5EZXZpY2VOYW1lID09PSBuYW1lKTsKICAgICAgdGhpcy5EZXZpY2VMaXN0W2luZGV4VG9SZW1vdmVdLmlzQmluZCA9IGZhbHNlOwogICAgICB0aGlzLiRidXMuJGVtaXQoJ1VuQmluZGluZ0RldmljZScsIHR5cGUsIG5hbWUsdGhpcy5EZXZpY2VMaXN0W2luZGV4XS5Ecml2ZXJOYW1lKTsKICAgIH0sCgogICAgQ2xvc2VQYW5lbCgpIHsKICAgICAgdGhpcy4kYnVzLiRlbWl0KCd0b2dnbGVEZXZpY2VBbGxvY2F0aW9uUGFuZWwnKTsKICAgIH0sCgogICAgY2xlYXJEZXZpY2VBbGxvY2F0aW9uTGlzdCgpIHsKICAgICAgdGhpcy5EZXZpY2VUeXBlcyA9IFtdOwogICAgICB0aGlzLkRldmljZUxpc3QgPSBbXTsKICAgIH0sCiAgICBkZWxldGVEZXZpY2VUeXBlQWxsb2NhdGlvbkxpc3QodHlwZSkgewoKICAgICAgaWYgKHR5cGUgPT0gImFsbCIpewogICAgICAgIHRoaXMuY2xlYXJEZXZpY2VBbGxvY2F0aW9uTGlzdCgpCiAgICAgICAgdGhpcy4kYnVzLiRlbWl0KCdTZW5kQ29uc29sZUxvZ01zZycsICdBbGwgZHJpdmVyVHlwZSBoYXMgcmVtb3ZlZCcsICdpbmZvJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBmb3IgKGxldCBpID0gdGhpcy5EZXZpY2VUeXBlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICAgIGlmICh0aGlzLkRldmljZVR5cGVzW2ldLkRldmljZVR5cGUgPT09IHR5cGUpIHsKICAgICAgICAgIGZvciAobGV0IGogPSB0aGlzLkRldmljZUxpc3QubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pIHsKICAgICAgICAgICAgaWYgKHRoaXMuRGV2aWNlTGlzdFtqXS5EZXZpY2VOYW1lID09PSB0aGlzLkRldmljZVR5cGVzW2ldLkRldmljZU5hbWUpIHsKICAgICAgICAgICAgICB0aGlzLkRldmljZUxpc3Rbal0uaXNCaW5kID0gZmFsc2U7CiAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgICAgdGhpcy5EZXZpY2VUeXBlcy5zcGxpY2UoaSwgMSk7CiAgICAgICAgICBicmVhawogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLiRidXMuJGVtaXQoJ1NlbmRDb25zb2xlTG9nTXNnJywgdHlwZSArICIgZHJpdmVyVHlwZSBoYXMgcmVtb3ZlZCIsICdpbmZvJyk7CiAgICB9LAogICAgZGVsZXRlRGV2aWNlQWxsb2NhdGlvbkxpc3QoZGV2aWNlTmFtZSkgewogICAgICBmb3IgKGxldCBpID0gdGhpcy5EZXZpY2VMaXN0Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7CiAgICAgICAgaWYgKHRoaXMuRGV2aWNlTGlzdFtpXS5EZXZpY2VOYW1lID09PSBkZXZpY2VOYW1lKSB7CiAgICAgICAgICB0aGlzLkRldmljZUxpc3Quc3BsaWNlKGksIDEpOwogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLiRidXMuJGVtaXQoJ1NlbmRDb25zb2xlTG9nTXNnJywgJ0RldmljZSgnICsgZGV2aWNlTmFtZSArICcpIGhhcyByZW1vdmVkJywgJ2luZm8nKTsKICAgIH0sCgoKICAgIEdldENvbm5lY3RlZERldmljZXMoKSB7CiAgICAgIHRoaXMuJGJ1cy4kZW1pdCgnR2V0Q29ubmVjdGVkRGV2aWNlcycpOwogICAgICAKICAgIH0sCgogICAgbG9hZEJpbmREZXZpY2VMaXN0KGRldmljZU9iamVjdCkgewogICAgICBkZXZpY2VPYmplY3QuZm9yRWFjaChkZXZpY2UgPT4gewogICAgICAgIGZvciAoY29uc3QgW2RldmljZU5hbWUsIGRldmljZUluZGV4LCBpc0JpbmRdIG9mIE9iamVjdC5lbnRyaWVzKGRldmljZSkpIHsKICAgICAgICAgIHRoaXMuRGV2aWNlVG9CZUFsbG9jYXRlZChkZXZpY2VJbmRleCwgZGV2aWNlTmFtZSwgaXNCaW5kKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICBsb2FkQmluZERldmljZVR5cGVMaXN0KGRldmljZVR5cGVPYmplY3QpIHsKICAgICAgZGV2aWNlVHlwZU9iamVjdC5mb3JFYWNoKGRldmljZVR5cGUgPT4gewogICAgICAgIGNvbnN0IHsgdHlwZSwgRGV2aWNlTmFtZSwgRHJpdmVyTmFtZSwgaXNiaW5kIH0gPSBkZXZpY2VUeXBlOwogICAgICAgIHRoaXMuRGV2aWNlQ29ubmVjdFN1Y2Nlc3ModHlwZSwgRGV2aWNlTmFtZSwgRHJpdmVyTmFtZSwgaXNiaW5kKTsKICAgICAgfSk7CiAgICB9CiAgICAKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIERldmljZVBpY2tlciwKICB9LAogIGNvbXB1dGVkOiB7CiAgICBwYW5lbFdpZHRoKCkgewogICAgICAvLyDlpoLmnpwgRGV2aWNlVHlwZXMg5Lit55qE6aG555uu5pWw5bCP5LqO5oiW562J5LqOIDPvvIzliJnlrr3luqbkuLogMzYwcHgKICAgICAgLy8g5aaC5p6c5aSn5LqOIDPvvIzliJnlrr3luqbkuLogNTAwcHgKICAgICAgcmV0dXJuIHRoaXMuRGV2aWNlVHlwZXMubGVuZ3RoIDw9IDMgPyAnMzYwcHgnIDogJzUwMHB4JzsKICAgIH0sCiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLkdldENvbm5lY3RlZERldmljZXMoKTsKICB9LAogIHdhdGNoOiB7fSwKfTsK"},{"version":3,"sources":["DeviceAllocationPanel.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DeviceAllocationPanel.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <transition name=\"panel\">\n    <div class=\"DeviceAllocationPanel-panel\" :style=\"{ bottom: bottom + 'px', top: top + 'px', width: panelWidth }\">\n      <!-- <ul class=\"device-list\">\n        <li v-for=\"(device, index) in DeviceList\" :key=\"index\" @click=\"SelectedDeviceName(device)\">\n          {{ device.DeviceName }}\n        </li>\n      </ul> -->\n      <div class=\"DeviceTypes-list\">\n        <DevicePicker v-for=\"(deviceType, index) in DeviceTypes\" :key=\"index\" :DeviceType=\"deviceType.DeviceType\"\n          :DeviceName=\"deviceType.DeviceName\" :DeviceBind=\"deviceType.isBind\" :PickerIndex=\"index\" :PickerSelect=\"deviceType.isSelected\"\n          :style=\"{ top: Position[index].top, left: Position[index].left }\" />\n      </div>\n\n      <span style=\"position: absolute; top: 10px; right: 15px; font-size: 15px; color: rgba(255, 255, 255, 0.5); user-select: none;\"> \n        {{ $t('Device To Be Allocated') }}\n      </span>\n\n      <ul class=\"device-list\">\n        <li v-for=\"(device, index) in DeviceList.filter(device => !device.isBind)\" :key=\"index\" @click=\"SelectedDeviceName(device)\">\n          {{ device.DeviceName }}\n        </li>\n      </ul>\n\n      <span style=\"position: absolute; bottom: 5px; right: 15px; font-size: 12px; font-weight: bold; color: rgba(0, 121, 214, 0.8); user-select: none;\" @click=\"ClosePanel\"> \n        {{ $t('CLOSE') }}\n      </span>\n\n\n\n    </div>\n  </transition>\n</template>\n\n<script>\nimport DevicePicker from './DevicePicker.vue';\n\nexport default {\n  name: 'DeviceAllocationPanel',\n  data() {\n    return {\n      bottom: 70,\n      top: 70,\n      DeviceList: [\n        // { DeviceName: 'QHY CCD QHY5III462C-075', DeviceIndex: 0, isBind: false },\n        // { DeviceName: 'QHY CCD QHY268C-59aa8c4', DeviceIndex: 1, isBind: false },\n        // { DeviceName: 'LX200 OnStep', DeviceIndex: 2, isBind: false },\n        // { DeviceName: 'QHY CCD QHY1920M-075', DeviceIndex: 3, isBind: false },\n        // { DeviceName: 'QHY CCD QHY163C-075', DeviceIndex: 4, isBind: false },\n      ],\n\n\n      DeviceTypes: [\n        // { DeviceType: 'Guider', DeviceName: '', isBind: false, isSelected: false },\n        // { DeviceType: 'Main Camera', DeviceName: '', isBind: false, isSelected: false },\n        // { DeviceType: 'Mount', DeviceName: '', isBind: false, isSelected: false },\n\n        // { DeviceType: 'Focuser', DeviceName: '', isBind: false, isSelected: false },\n        // { DeviceType: 'Pole Camera', DeviceName: '', isBind: false, isSelected: false },\n        // { DeviceType: 'CFW', DeviceName: '', isBind: false, isSelected: false },\n      ],\n\n      Position: [\n        { top: '12%', left: '15px' },\n        { top: '39%', left: '15px' },\n        { top: '66%', left: '15px' },\n\n        { top: '12%', left: '175px' },\n        { top: '39%', left: '175px' },\n        { top: '66%', left: '175px' },\n      ],\n    };\n  },\n  created() {\n    this.$bus.$on('SelectPickerIndex', this.SelectPickerIndex);\n    this.$bus.$on('AddDeviceType',this.AddDeviceType);\n    this.$bus.$on('DeviceToBeAllocated',this.DeviceToBeAllocated);\n    this.$bus.$on('DeviceConnectSuccess', this.DeviceConnectSuccess);\n    this.$bus.$on('BindDeviceIndex', this.BindingDevice);\n    this.$bus.$on('UnBindDeviceIndex', this.UnBindingDevice);\n    this.$bus.$on('clearDeviceAllocationList',this.clearDeviceAllocationList);\n    this.$bus.$on('deleteDeviceTypeAllocationList',this.deleteDeviceTypeAllocationList);\n    this.$bus.$on('deleteDeviceAllocationList',this.deleteDeviceAllocationList);\n    this.$bus.$on('loadBindDeviceList',this.loadBindDeviceList);\n    this.$bus.$on('loadBindDeviceTypeList',this.loadBindDeviceTypeList);\n  },\n  methods: {\n    SelectPickerIndex(num) {\n      for(let i = 0; i < this.DeviceTypes.length; i++) {\n        this.DeviceTypes[i].isSelected = false;\n      }\n      console.log('Select Picker Index:', num);\n      if(!this.DeviceTypes[num].isBind){\n        this.DeviceTypes[num].isSelected = true;\n      }\n    },\n\n    SelectedDeviceName(device) {\n      for (let i = 0; i < this.DeviceTypes.length; i++) {\n        if (this.DeviceTypes[i].DeviceName === device.DeviceName) {\n          this.DeviceTypes[i].DeviceName = '';\n        }\n      }\n\n      for (let i = 0; i < this.DeviceTypes.length; i++) {\n        if (this.DeviceTypes[i].isSelected === true) {\n          this.DeviceTypes[i].DeviceName = device.DeviceName;\n        }\n      }\n    },\n\n    AddDeviceType(DeviceType) {\n      const exists = this.DeviceTypes.some(item => item.DeviceType === DeviceType);\n      if (exists) {\n        console.log('Device Type already exists:', DeviceType);\n      } else {\n        console.log('Add Device Type:', DeviceType);\n        this.DeviceTypes.push({DeviceType: DeviceType, DeviceName: '', isBind: false, isSelected: false });\n      }\n    },\n\n    DeviceToBeAllocated(index,name) {\n      const exists1 = this.DeviceList.some(item => item.DeviceName === name);\n      const exists2 = this.DeviceTypes.some(item => item.DeviceName === name);\n      console.log('this.DeviceList:', this.DeviceList);\n      if (exists1) {\n        console.log('Device already exists:', name);\n        this.$bus.$emit('SendConsoleLogMsg', 'Device already exists:' + index + ':' + name, 'info');\n      } else {\n        if (exists2) {\n          this.$bus.$emit('SendConsoleLogMsg', 'Device already exists:' + index + ':' + name, 'info');\n          this.DeviceList.push({DeviceName: name, DeviceIndex: index, isBind: true });\n        } else {\n          this.$bus.$emit('SendConsoleLogMsg', 'Add Device To Be Allocated:' + index + ':' + name, 'info');\n          console.log('Add Device To Be Allocated:', index, name);\n          this.DeviceList.push({DeviceName: name, DeviceIndex: index, isBind: false });\n        }\n      }\n    },\n\n    DeviceConnectSuccess(type, DeviceName, DriverName, isBind = true) {\n      if (type == '' || type == \"undefined\" || type == null || DriverName == '' || DriverName == \"undefined\" || DriverName == null){\n        return;\n      }\n\n      let found = false;\n      for (let i = 0; i < this.DeviceTypes.length; i++) {\n        if (this.DeviceTypes[i].DeviceType === type) {\n          this.DeviceTypes[i].DeviceName = DeviceName;\n          this.DeviceTypes[i].isBind = isBind;\n          this.DeviceTypes[i].isSelected = false;\n          found = true; // 标记已找到匹配项\n          break; // 找到后可以跳出循环，优化性能\n        }\n      }\n\n      // 如果没有找到匹配项，添加新的设备对象\n      if (!found) {\n        this.DeviceTypes.push({\n          DeviceType: type,\n          DeviceName: DeviceName,\n          isBind: isBind,\n          isSelected: false,\n        });\n      }\n      const indexToRemove = this.DeviceList.findIndex(item => item.DeviceName === DeviceName);\n      if (indexToRemove !== -1) {\n        this.DeviceList[indexToRemove].isBind = isBind;\n        this.$bus.$emit('SendConsoleLogMsg', ' Binding Device Success:' + type + ':' + this.DeviceList[indexToRemove].DeviceIndex+': '+ this.DeviceList[indexToRemove].isBind, 'info');\n      }\n    },\n\n    BindingDevice(index) {\n      const type = this.DeviceTypes[index].DeviceType;\n      const name = this.DeviceTypes[index].DeviceName;\n\n      const DeviceNameIndex = this.DeviceList.findIndex(item => item.DeviceName === name);\n      if (DeviceNameIndex !== -1) {\n        this.$bus.$emit('AppSendMessage', 'Vue_Command', 'BindingDevice:' + type + ':' + this.DeviceList[DeviceNameIndex].DeviceIndex);\n        this.$bus.$emit('SendConsoleLogMsg', 'Binding Device:' + type + ':' + this.DeviceList[DeviceNameIndex].DeviceIndex, 'info');\n      }\n    },\n\n    UnBindingDevice(index) {\n      const type = this.DeviceTypes[index].DeviceType;\n      const name = this.DeviceTypes[index].DeviceName;\n\n\n      this.$bus.$emit('AppSendMessage', 'Vue_Command', 'UnBindingDevice:' + type);\n      this.$bus.$emit('SendConsoleLogMsg', 'UnBinding Device:' + type, 'info');\n\n      this.DeviceTypes[index].isBind = false;\n      this.DeviceTypes[index].DeviceName = '';\n      const indexToRemove = this.DeviceList.findIndex(item => item.DeviceName === name);\n      this.DeviceList[indexToRemove].isBind = false;\n      this.$bus.$emit('UnBindingDevice', type, name,this.DeviceList[index].DriverName);\n    },\n\n    ClosePanel() {\n      this.$bus.$emit('toggleDeviceAllocationPanel');\n    },\n\n    clearDeviceAllocationList() {\n      this.DeviceTypes = [];\n      this.DeviceList = [];\n    },\n    deleteDeviceTypeAllocationList(type) {\n\n      if (type == \"all\"){\n        this.clearDeviceAllocationList()\n        this.$bus.$emit('SendConsoleLogMsg', 'All driverType has removed', 'info');\n        return;\n      }\n\n      for (let i = this.DeviceTypes.length - 1; i >= 0; i--) {\n        if (this.DeviceTypes[i].DeviceType === type) {\n          for (let j = this.DeviceList.length - 1; j >= 0; j--) {\n            if (this.DeviceList[j].DeviceName === this.DeviceTypes[i].DeviceName) {\n              this.DeviceList[j].isBind = false;\n              break\n            }\n          }\n          this.DeviceTypes.splice(i, 1);\n          break\n        }\n      }\n      this.$bus.$emit('SendConsoleLogMsg', type + \" driverType has removed\", 'info');\n    },\n    deleteDeviceAllocationList(deviceName) {\n      for (let i = this.DeviceList.length - 1; i >= 0; i--) {\n        if (this.DeviceList[i].DeviceName === deviceName) {\n          this.DeviceList.splice(i, 1);\n        }\n      }\n      this.$bus.$emit('SendConsoleLogMsg', 'Device(' + deviceName + ') has removed', 'info');\n    },\n\n\n    GetConnectedDevices() {\n      this.$bus.$emit('GetConnectedDevices');\n      \n    },\n\n    loadBindDeviceList(deviceObject) {\n      deviceObject.forEach(device => {\n        for (const [deviceName, deviceIndex, isBind] of Object.entries(device)) {\n          this.DeviceToBeAllocated(deviceIndex, deviceName, isBind);\n        }\n      });\n    },\n\n    loadBindDeviceTypeList(deviceTypeObject) {\n      deviceTypeObject.forEach(deviceType => {\n        const { type, DeviceName, DriverName, isbind } = deviceType;\n        this.DeviceConnectSuccess(type, DeviceName, DriverName, isbind);\n      });\n    }\n    \n  },\n  components: {\n    DevicePicker,\n  },\n  computed: {\n    panelWidth() {\n      // 如果 DeviceTypes 中的项目数小于或等于 3，则宽度为 360px\n      // 如果大于 3，则宽度为 500px\n      return this.DeviceTypes.length <= 3 ? '360px' : '500px';\n    },\n  },\n  mounted: function () {\n    this.GetConnectedDevices();\n  },\n  watch: {},\n};\n</script>\n\n<style scoped>\n.DeviceAllocationPanel-panel {\n  pointer-events: auto;\n  position: fixed;\n  background-color: rgba(64, 64, 64, 0.5);\n  backdrop-filter: blur(5px);\n  box-sizing: border-box;\n  overflow: hidden;\n  left: 50%;\n  transform: translateX(-50%);\n\n  border-radius: 10px;\n  border: 1px solid rgba(255, 255, 255, 0.8);\n}\n\n@keyframes showPanelAnimation {\n  from {\n    bottom: 100%;\n    backdrop-filter: blur(0px);\n    background-color: rgba(64, 64, 64, 0.0);\n  }\n\n  to {\n    bottom: 70px;\n    backdrop-filter: blur(5px);\n    background-color: rgba(64, 64, 64, 0.3);\n  }\n}\n\n@keyframes hidePanelAnimation {\n  from {\n    bottom: 70px;\n    backdrop-filter: blur(5px);\n    background-color: rgba(64, 64, 64, 0.3);\n  }\n\n  to {\n    bottom: 100%;\n    backdrop-filter: blur(0px);\n    background-color: rgba(64, 64, 64, 0.0);\n  }\n}\n\n.panel-enter-active {\n  animation: showPanelAnimation 0.3s forwards;\n}\n\n.panel-leave-active {\n  animation: hidePanelAnimation 0.3s forwards;\n}\n\n.device-list {\n  position: absolute;\n  top: 30px;\n  right: 15px;\n  bottom: 25px;\n\n  list-style-type: none;\n  /* 去掉列表前的默认点 */\n  padding: 0;\n  /* 去掉内边距 */\n  margin: 0;\n  /* 去掉外边距 */\n  width: 150px;\n  /* 控制列表宽度 */\n  max-height: 200px;\n  /* 控制列表最大高度 */\n  overflow-y: auto;\n  /* 允许垂直滚动 */\n  border: 1px solid rgba(255, 255, 255, 0.2);\n}\n\nli {\n  color: white;\n  /* 设定文字颜色 */\n  padding: 5px 10px;\n  /* 添加一些内边距 */\n  border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n  /* 添加底部边框 */\n  white-space: nowrap;\n  /* 确保文本不换行 */\n  overflow: hidden;\n  /* 超出部分隐藏 */\n  text-overflow: ellipsis;\n  /* 超出部分用省略号表示 */\n}\n\nli:hover {\n  background-color: rgba(255, 255, 255, 0.1);\n  /* 悬停效果 */\n}\n\n.DeviceTypes-list {\n  position: absolute;\n  top: 30px;\n  /* 根据需要调整位置 */\n  right: 15px;\n  /* 根据需要调整位置 */\n  bottom: 15px;\n  /* 根据需要调整位置 */\n  width: 150px;\n  /* 设置宽度，确保右侧的 DevicePicker 组件能够显示 */\n  overflow-y: auto;\n  /* 允许垂直滚动，如果需要的话 */\n}\n</style>\n"]}]}