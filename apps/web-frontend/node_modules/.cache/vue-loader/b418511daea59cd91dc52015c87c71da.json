{"remainingRequest":"/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/src/components/FocuserPanel.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/src/components/FocuserPanel.vue","mtime":1761125079371},{"path":"/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1707125360000},{"path":"/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/node_modules/thread-loader/dist/cjs.js","mtime":1707125360000},{"path":"/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/node_modules/babel-loader/lib/index.js","mtime":1707125360000},{"path":"/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/node_modules/cache-loader/dist/cjs.js","mtime":1707125360000},{"path":"/home/quarcs/workspace/QUARCS/QUARCS_stellarium-web-engine/apps/web-frontend/node_modules/vue-loader/lib/index.js","mtime":1707125450000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBGb2N1c0NoYXJ0IGZyb20gJy4vQ2hhcnQtRm9jdXMudnVlJzsKaW1wb3J0IEltYWdlQ2hhcnQgZnJvbSAnLi9DaGFydC1Gb2N1c0ltYWdlLnZ1ZSc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0ZvY3VzZXJQYW5lbCcsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vIHdpZHRoOiAzMzAsIC8vIOWIneWni+WuveW6pgogICAgICBib3R0b206IDEwLAogICAgICBDb21wb25lbnRQYWRkaW5nOiAwLAogICAgICBoZWlnaHQ6IDkwLAoKICAgICAgTW92ZVN0ZXBzOiAxMDAsCiAgICAgIE1vdmVTcGVlZDogMSwKICAgICAgTW92ZVNwZWVkXzogMSwKCiAgICAgIEN1cnJlbnRQb3NpdGlvbjogMCwKICAgICAgLy8gVGFyZ2V0UG9zaXRpb246IDAsCiAgICAgIEZXSE06IDAsCgogICAgICBpc0J0bk1vdmVEaXNhYmxlZDogZmFsc2UsIC8vIOiwg+eEpuaMiemSruaYr+WQpuemgeeUqAogICAgICBpc01vdmVJblByb2dyZXNzOiBmYWxzZSwgLy8g6LCD54Sm5piv5ZCm6L+b6KGM5LitCgogICAgICBpbkF1dG9Gb2N1czogZmFsc2UsIC8vIOiHquWKqOWvueeEpuaYr+WQpuW8gOWQrwogICAgICBpc0xvb3BBY3RpdmU6IGZhbHNlLCAvLyDmlrDlop7nirbmgIHmjqfliLblvqrnjq/mi43mkYTmmK/lkKbmv4DmtLsKCiAgICAgIGN1cnJlbnRNYWluQ2FudmFzSGFzSW1hZ2U6IGZhbHNlLAoKCiAgICAgIFJPSV9sZW5ndGg6IDMwMCwKCiAgICAgIEZvY3VzZXJJc0Nvbm5lY3RlZDogZmFsc2UsCgogICAgICBtb3ZlU3RhcnRUaW1lOiAwLCAgLy8g55S16LCD56e75Yqo5oyJ5LiL5pe26Ze06K6w5b2VCgogICAgICAvLyDplb/mjInliKTlrpov54q25oCBCiAgICAgIGxvbmdQcmVzc1RpbWVyOiBudWxsLAogICAgICBsb25nUHJlc3NUcmlnZ2VyZWQ6IGZhbHNlLAogICAgICBwcmVzc0RpcmVjdGlvbjogJycsCiAgICAgIGlzUHJlc3Npbmc6IGZhbHNlLAoKICAgICAgLy8g5qCh5YeG55u45YWz5pWw5o2uCiAgICAgIGlzQ2FsaWJyYXRpbmc6IGZhbHNlLCAvLyDmmK/lkKbmraPlnKjmoKHlh4YKICAgICAgY2FsaWJyYXRpb25TdGVwOiAwLCAvLyDmoKHlh4bmraXpqqQgKDEtMykKICAgICAgY2FsaWJyYXRpb25NZXNzYWdlOiAnJywgLy8g5qCh5YeG5o+Q56S65L+h5oGvCiAgICAgIGNhbGlicmF0aW9uU3RhdGU6ICdpZGxlJywgLy8g5qCh5YeG54q25oCBOiAnaWRsZScsICdydW5uaW5nJywgJ2NvbXBsZXRlJwoKICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBGb2N1c0NoYXJ0LAogICAgSW1hZ2VDaGFydAogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMudXBkYXRlUG9zaXRpb24oKTsgLy8g5Yid5aeL5YyW5L2N572uCiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy51cGRhdGVQb3NpdGlvbik7CiAgfSwKICBiZWZvcmVEZXN0cm95KCkgewogICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMudXBkYXRlUG9zaXRpb24pOwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIC8vIHRoaXMuJGJ1cy4kb24oJ0F1dG9IaXN0b2dyYW1OdW0nLCB0aGlzLnNldEF1dG9IaXN0b2dyYW1OdW0pOwogICAgdGhpcy4kYnVzLiRvbignRm9jdXNDaGFuZ2VTcGVlZFN1Y2Nlc3MnLCB0aGlzLlNob3dTcGVlZE51bSk7CiAgICB0aGlzLiRidXMuJG9uKCdGb2N1c1Bvc2l0aW9uJywgdGhpcy5TaG93UG9zaXRpb25OdW0pOwogICAgLy8gdGhpcy4kYnVzLiRvbignRm9jdXNNb3ZlRG9uZScsIHRoaXMuTW92ZURvbmUpOwogICAgdGhpcy4kYnVzLiRvbignVXBkYXRlRldITScsIHRoaXMuVXBkYXRlRldITSk7CiAgICB0aGlzLiRidXMuJG9uKCdzaG93Um9pSW1hZ2UnLCB0aGlzLmxvYWRBbmREaXNwbGF5SW1hZ2UpOwogICAgLy8gdGhpcy4kYnVzLiRvbignc2V0VGFyZ2V0UG9zaXRpb24nLCB0aGlzLnNldFRhcmdldFBvc2l0aW9uKTsKICAgIHRoaXMuJGJ1cy4kb24oJ0F1dG9Gb2N1c092ZXInLCB0aGlzLkF1dG9Gb2N1c092ZXIpOwogICAgdGhpcy4kYnVzLiRvbignZ2V0Rm9jdXNlck1vdmVTdGF0ZScsIHRoaXMuZ2V0Rm9jdXNlck1vdmVTdGF0ZSk7CiAgICB0aGlzLiRidXMuJG9uKCdzdGFydEZvY3VzTG9vcEZhaWxlZCcsIHRoaXMuc3RhcnRGb2N1c0xvb3BGYWlsZWQpOwogICAgdGhpcy4kYnVzLiRvbignc2V0Rm9jdXNlckxvb3BpbmdTdGF0ZScsIHRoaXMuc2V0Rm9jdXNlckxvb3BpbmdTdGF0ZSk7CiAgICB0aGlzLiRidXMuJG9uKCdzZWxlY3RTdGFySW1hZ2UnLCB0aGlzLnNlbGVjdFN0YXJJbWFnZSk7CiAgICB0aGlzLiRidXMuJG9uKCdzZXRDdXJyZW50TWFpbkNhbnZhc0hhc0ltYWdlJywgdGhpcy5zZXRDdXJyZW50TWFpbkNhbnZhc0hhc0ltYWdlKTsKICAgIHRoaXMuJGJ1cy4kb24oJ0ZvY3VzZXJDb25uZWN0ZWQnLCB0aGlzLnNldEZvY3VzZXJJc0Nvbm5lY3RlZCk7CiAgICB0aGlzLiRidXMuJG9uKCdzZXRSZWRCb3hTaWRlTGVuZ3RoJywgdGhpcy5zZXRSZWRCb3hTaWRlTGVuZ3RoKTsKICAgIHRoaXMuJGJ1cy4kb24oJ3N5bmNST0lfbGVuZ3RoJywgdGhpcy5zeW5jUk9JX2xlbmd0aCk7CiAgICB0aGlzLiRidXMuJG9uKCdTdGFydENhbGlicmF0aW9uJywgdGhpcy5zdGFydENhbGlicmF0aW9uUHJvY2Vzcyk7CgoKCiAgICB0aGlzLiRidXMuJG9uKCdmb2N1c1NldFRyYXZlbFJhbmdlU3VjY2VzcycsIHRoaXMuZm9jdXNTZXRUcmF2ZWxSYW5nZVN1Y2Nlc3MpOwogICAgdGhpcy4kYnVzLiRvbignZm9jdXNNb3ZlRmFpbGVkJywgdGhpcy5mb2N1c01vdmVGYWlsZWQpOwoKICAgIHRoaXMuJGJ1cy4kb24oJ3VwZGF0ZUF1dG9Gb2N1c2VyU3RhdGUnLCB0aGlzLnVwZGF0ZUF1dG9Gb2N1c2VyU3RhdGUpOyAgLy8g5pu05paw6Ieq5Yqo5a+554Sm54q25oCBCgogICAgLy8g5b2TdWnliJ3lp4vljJblrozmiJAs6Ieq5Yqo6I635Y+W5b2T5YmN54q25oCBCiAgICB0aGlzLiRidXMuJGVtaXQoJ0FwcFNlbmRNZXNzYWdlJywgJ1Z1ZV9Db21tYW5kJywgJ2dldEZvY3VzZXJTdGF0ZScpOwogIH0sCiAgbWV0aG9kczogewogICAgdXBkYXRlUG9zaXRpb24oKSB7CiAgICAgIGNvbnN0IHNjcmVlbldpZHRoID0gd2luZG93LmlubmVyV2lkdGg7CiAgICAgIGNvbnN0IGhhbGZXaWR0aCA9IHNjcmVlbldpZHRoIC8gMiAtIDI1MDsKICAgICAgdGhpcy5Db21wb25lbnRQYWRkaW5nID0gTWF0aC5tYXgoaGFsZldpZHRoLCAxNzApOwogICAgICAvLyBjb25zb2xlLmxvZygnVXBkYXRlZCBQYWRkaW5nOicsIHRoaXMuQ29tcG9uZW50UGFkZGluZyk7CgogICAgICAvLyDorqHnrpflrr3luqYKICAgICAgY29uc3QgbmV3V2lkdGggPSBzY3JlZW5XaWR0aCAtICh0aGlzLkNvbXBvbmVudFBhZGRpbmcgKiAyKTsKICAgICAgLy8gY29uc29sZS5sb2coJ1VwZGF0ZSBGb2N1cyBDaGFydCB3aWR0aDonLCBuZXdXaWR0aCk7CiAgICAgIHRoaXMuJGJ1cy4kZW1pdCgndXBkYXRlRm9jdXNDaGFydFdpZHRoJywgbmV3V2lkdGgpOwogICAgICAKICAgIH0sCiAgICBBdXRvRm9jdXMoKSB7CiAgICAgIGlmICghdGhpcy5Gb2N1c2VySXNDb25uZWN0ZWQpIHsKICAgICAgICB0aGlzLiRidXMuJGVtaXQoJ3Nob3dNc2dCb3gnLCAnRm9jdXNlciBpcyBub3QgY29ubmVjdGVkIScsICd3YXJuaW5nJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICh0aGlzLmlzTW92ZUluUHJvZ3Jlc3MpIHsKICAgICAgICB0aGlzLiRidXMuJGVtaXQoJ3Nob3dNc2dCb3gnLCAnRm9jdXNlciBpcyBtb3ZpbmchJywgJ3dhcm5pbmcnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmluQXV0b0ZvY3VzKSB7CiAgICAgICAgdGhpcy5pbkF1dG9Gb2N1cyA9IGZhbHNlOwogICAgICAgIC8vIGNvbnNvbGUubG9nKCdRSFlDQ0QgfCBTdG9wQXV0b0ZvY3VzJyk7CiAgICAgICAgdGhpcy4kYnVzLiRlbWl0KCdTZW5kQ29uc29sZUxvZ01zZycsICdTdG9wQXV0b0ZvY3VzJywgJ2luZm8nKTsKICAgICAgICB0aGlzLiRidXMuJGVtaXQoJ0FwcFNlbmRNZXNzYWdlJywgJ1Z1ZV9Db21tYW5kJywgJ1N0b3BBdXRvRm9jdXMnKTsKICAgICAgfWVsc2V7CiAgICAgICAgdGhpcy5pbkF1dG9Gb2N1cyA9IHRydWU7CiAgICAgICAgdGhpcy4kYnVzLiRlbWl0KCdTaG93Q29uZmlybURpYWxvZycsJ0NvbmZpcm0nLCAnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIHN0YXJ0IGF1dG8gZm9jdXM/JywgJ3N0YXJ0QXV0b0ZvY3VzJyk7CiAgICAgIH0KIAogICAgfSwKCiAgICBBdXRvRm9jdXNPdmVyKCkgewogICAgICBjb25zb2xlLmxvZygnUUhZQ0NEIHwgQXV0b0ZvY3VzT3ZlcicpOwogICAgICB0aGlzLiRidXMuJGVtaXQoJ1NlbmRDb25zb2xlTG9nTXNnJywgJ0F1dG9Gb2N1c092ZXInLCAnaW5mbycpOwogICAgICB0aGlzLmluQXV0b0ZvY3VzID0gZmFsc2U7CiAgICB9LAoKICAgIFN0ZXBzQ2hhbmdlKCkgewogICAgICBpZiAoIXRoaXMuRm9jdXNlcklzQ29ubmVjdGVkKSB7CiAgICAgICAgdGhpcy4kYnVzLiRlbWl0KCdzaG93TXNnQm94JywgJ0ZvY3VzZXIgaXMgbm90IGNvbm5lY3RlZCEnLCAnd2FybmluZycpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAodGhpcy5Nb3ZlU3RlcHMgPT09IDEwMCkgdGhpcy5Nb3ZlU3RlcHMgPSA1MDA7CiAgICAgIGVsc2UgaWYgKHRoaXMuTW92ZVN0ZXBzID09PSA1MDApIHRoaXMuTW92ZVN0ZXBzID0gMTAwMDsKICAgICAgZWxzZSBpZiAodGhpcy5Nb3ZlU3RlcHMgPT09IDEwMDApIHRoaXMuTW92ZVN0ZXBzID0gNTAwMDsKICAgICAgZWxzZSBpZiAodGhpcy5Nb3ZlU3RlcHMgPT09IDUwMDApIHRoaXMuTW92ZVN0ZXBzID0gMTAwMDA7CiAgICAgIGVsc2UgaWYgKHRoaXMuTW92ZVN0ZXBzID09PSAxMDAwMCkgdGhpcy5Nb3ZlU3RlcHMgPSAxMDA7CgogICAgICBjb25zb2xlLmxvZygnUUhZQ0NEIHwgU3RlcHNDaGFuZ2U6ICcsIHRoaXMuTW92ZVN0ZXBzKTsKICAgICAgLy8gdGhpcy4kYnVzLiRlbWl0KCdTZW5kQ29uc29sZUxvZ01zZycsICdTdGVwc0NoYW5nZTonICsgdGhpcy5Nb3ZlU3RlcHMsICdpbmZvJyk7CiAgICB9LAoKICAgIFNwZWVkQ2hhbmdlKCkgewogICAgICBpZiAoIXRoaXMuRm9jdXNlcklzQ29ubmVjdGVkKSB7CiAgICAgICAgdGhpcy4kYnVzLiRlbWl0KCdzaG93TXNnQm94JywgJ0ZvY3VzZXIgaXMgbm90IGNvbm5lY3RlZCEnLCAnd2FybmluZycpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAodGhpcy5Nb3ZlU3BlZWQgPT09IDEpIHRoaXMuTW92ZVNwZWVkID0gMzsKICAgICAgZWxzZSBpZiAodGhpcy5Nb3ZlU3BlZWQgPT09IDMpIHRoaXMuTW92ZVNwZWVkID0gNTsKICAgICAgZWxzZSBpZiAodGhpcy5Nb3ZlU3BlZWQgPT09IDUpIHRoaXMuTW92ZVNwZWVkID0gMTsKCiAgICAgIGNvbnNvbGUubG9nKCdRSFlDQ0QgfCBTcGVlZENoYW5nZTogJywgdGhpcy5Nb3ZlU3BlZWQpOwogICAgICB0aGlzLiRidXMuJGVtaXQoJ1NlbmRDb25zb2xlTG9nTXNnJywgJ1NwZWVkQ2hhbmdlOicgKyB0aGlzLk1vdmVTcGVlZCwgJ2luZm8nKTsKICAgICAgaWYgKHRoaXMuTW92ZVNwZWVkID09PSAxKSB7CiAgICAgICAgdGhpcy4kYnVzLiRlbWl0KCdBcHBTZW5kTWVzc2FnZScsICdWdWVfQ29tbWFuZCcsICdmb2N1c1NwZWVkOjAnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRidXMuJGVtaXQoJ0FwcFNlbmRNZXNzYWdlJywgJ1Z1ZV9Db21tYW5kJywgJ2ZvY3VzU3BlZWQ6JyArIHRoaXMuTW92ZVNwZWVkKTsKICAgICAgfQogICAgfSwKCiAgICBST0lDaGFuZ2UoKSB7CiAgICAgIGlmICh0aGlzLlJPSV9sZW5ndGggPT09IDEwMCkgdGhpcy5ST0lfbGVuZ3RoID0gMzAwOwogICAgICBlbHNlIGlmICh0aGlzLlJPSV9sZW5ndGggPT09IDMwMCkgdGhpcy5ST0lfbGVuZ3RoID0gNTAwOwogICAgICBlbHNlIGlmICh0aGlzLlJPSV9sZW5ndGggPT09IDUwMCkgdGhpcy5ST0lfbGVuZ3RoID0gMTAwOwoKICAgICAgdGhpcy5zeW5jUk9JX2xlbmd0aCgpOwogICAgfSwKICAgIHNldFJlZEJveFNpZGVMZW5ndGgobGVuZ3RoKSB7CiAgICAgIGlmIChsZW5ndGggPT09ICcxMDAnIHx8IGxlbmd0aCA9PT0gMTAwKSB0aGlzLlJPSV9sZW5ndGggPSAxMDA7CiAgICAgIGVsc2UgaWYgKGxlbmd0aCA9PT0gJzMwMCcgfHwgbGVuZ3RoID09PSAzMDApIHRoaXMuUk9JX2xlbmd0aCA9IDMwMDsKICAgICAgZWxzZSBpZiAobGVuZ3RoID09PSAnNTAwJyB8fCBsZW5ndGggPT09IDUwMCkgdGhpcy5ST0lfbGVuZ3RoID0gNTAwOwogICAgICBlbHNlIHRoaXMuUk9JX2xlbmd0aCA9IDMwMDsKICAgICAgY29uc29sZS5sb2coJ1FIWUNDRCB8IHNldFJlZEJveFNpZGVMZW5ndGg6ICcsIHRoaXMuUk9JX2xlbmd0aCk7CiAgICAgIHRoaXMuc3luY1JPSV9sZW5ndGgoKTsKICAgIH0sCiAgICAvLyDlkIzmraVST0nplb/luqYKICAgIHN5bmNST0lfbGVuZ3RoKCkgewogICAgICB0aGlzLiRidXMuJGVtaXQoJ1NlbmRDb25zb2xlTG9nTXNnJywgJ1FIWUNDRCB8IFJPSUNoYW5nZTonICsgdGhpcy5ST0lfbGVuZ3RoLCAnaW5mbycpOwogICAgICB0aGlzLiRidXMuJGVtaXQoJ0FwcFNlbmRNZXNzYWdlJywgJ1Z1ZV9Db21tYW5kJywgJ1JlZEJveFNpemVDaGFuZ2U6JyArIHRoaXMuUk9JX2xlbmd0aCk7IC8vIOabtOaWsHF0c2VydmVy5Lit55qEUmVkQm94U2lkZUxlbmd0aAogICAgICB0aGlzLiRidXMuJGVtaXQoJ1JlZEJveFNpemVDaGFuZ2UnLCB0aGlzLlJPSV9sZW5ndGgpOyAvLyDmm7TmlrBndWkudnVl5ZKMYXBwLnZ1ZeS4reeahFJlZEJveFNpZGVMZW5ndGgKICAgIH0sCgogICAgRm9jdXNNb3ZlKGRpcmVjdGlvbikgewogICAgICBpZiAoIXRoaXMuRm9jdXNlcklzQ29ubmVjdGVkKSB7CiAgICAgICAgdGhpcy4kYnVzLiRlbWl0KCdzaG93TXNnQm94JywgJ0ZvY3VzZXIgaXMgbm90IGNvbm5lY3RlZCEnLCAnd2FybmluZycpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAodGhpcy5pbkF1dG9Gb2N1cykgcmV0dXJuOwoKICAgICAgLy8g6K6w5b2V5oyJ5LiL5pe26Ze05LiO5pa55ZCRCiAgICAgIHRoaXMubW92ZVN0YXJ0VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICB0aGlzLnByZXNzRGlyZWN0aW9uID0gZGlyZWN0aW9uOwogICAgICB0aGlzLmlzUHJlc3NpbmcgPSB0cnVlOwogICAgICB0aGlzLmxvbmdQcmVzc1RyaWdnZXJlZCA9IGZhbHNlOwoKICAgICAgLy8g5riF55CG5Y+v6IO95a2Y5Zyo55qE5a6a5pe25ZmoCiAgICAgIGlmICh0aGlzLmxvbmdQcmVzc1RpbWVyKSB7CiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMubG9uZ1ByZXNzVGltZXIpOwogICAgICAgIHRoaXMubG9uZ1ByZXNzVGltZXIgPSBudWxsOwogICAgICB9CgogICAgICAvLyAyMDBtcyDlkI7oi6Xku43mjInkuIvliJnlvIDlp4vov57nu63np7vliqgKICAgICAgdGhpcy5sb25nUHJlc3NUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIGlmICghdGhpcy5pc1ByZXNzaW5nIHx8IHRoaXMubG9uZ1ByZXNzVHJpZ2dlcmVkKSByZXR1cm47CiAgICAgICAgdGhpcy5sb25nUHJlc3NUcmlnZ2VyZWQgPSB0cnVlOwogICAgICAgIHRoaXMuJGJ1cy4kZW1pdCgnRm9jdXNJblByb2dyZXNzJywgdHJ1ZSk7CiAgICAgICAgaWYgKHRoaXMucHJlc3NEaXJlY3Rpb24gPT09ICdsZWZ0JykgewogICAgICAgICAgdGhpcy4kYnVzLiRlbWl0KCdTZW5kQ29uc29sZUxvZ01zZycsICdGb2N1cyBMZWZ0IE1vdmU6JyArIHRoaXMuTW92ZVN0ZXBzLCAnaW5mbycpOwogICAgICAgICAgdGhpcy4kYnVzLiRlbWl0KCdBcHBTZW5kTWVzc2FnZScsICdWdWVfQ29tbWFuZCcsICdmb2N1c01vdmU6JyArICdMZWZ0Jyk7CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByZXNzRGlyZWN0aW9uID09PSAncmlnaHQnKSB7CiAgICAgICAgICB0aGlzLiRidXMuJGVtaXQoJ1NlbmRDb25zb2xlTG9nTXNnJywgJ0ZvY3VzIFJpZ2h0IE1vdmU6JyArIHRoaXMuTW92ZVN0ZXBzLCAnaW5mbycpOwogICAgICAgICAgdGhpcy4kYnVzLiRlbWl0KCdBcHBTZW5kTWVzc2FnZScsICdWdWVfQ29tbWFuZCcsICdmb2N1c01vdmU6JyArICdSaWdodCcpOwogICAgICAgIH0KICAgICAgICB0aGlzLmlzTW92ZUluUHJvZ3Jlc3MgPSB0cnVlOwogICAgICB9LCAyMDApOwogICAgfSwKCiAgICBGb2N1c0Fib3J0KCkgewogICAgICBjb25zdCBwcmVzc0R1cmF0aW9uID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLSB0aGlzLm1vdmVTdGFydFRpbWU7CgogICAgICAvLyDlgZzmraLplb/mjInlrprml7blmagKICAgICAgaWYgKHRoaXMubG9uZ1ByZXNzVGltZXIpIHsKICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5sb25nUHJlc3NUaW1lcik7CiAgICAgICAgdGhpcy5sb25nUHJlc3NUaW1lciA9IG51bGw7CiAgICAgIH0KCiAgICAgIC8vIOagh+iusOW3suadvuW8gAogICAgICBjb25zdCB3YXNMb25nUHJlc3MgPSB0aGlzLmxvbmdQcmVzc1RyaWdnZXJlZDsKICAgICAgY29uc3QgZGlyID0gdGhpcy5wcmVzc0RpcmVjdGlvbiA9PT0gJ2xlZnQnID8gJ0xlZnQnIDogKHRoaXMucHJlc3NEaXJlY3Rpb24gPT09ICdyaWdodCcgPyAnUmlnaHQnIDogJycpOwogICAgICB0aGlzLmlzUHJlc3NpbmcgPSBmYWxzZTsKCiAgICAgIGlmICghd2FzTG9uZ1ByZXNzICYmIHByZXNzRHVyYXRpb24gPCAyMDApIHsKICAgICAgICAvLyDnn63mjInvvJrop6blj5HkuIDmrKHmraXov5vnp7vliqjvvIjlkK/liqjlkI7nq4vliLvlgZzmraLvvIzotbDngrnlh7vpgLvovpHvvIkKICAgICAgICBpZiAoZGlyKSB7CiAgICAgICAgICB0aGlzLiRidXMuJGVtaXQoJ1NlbmRDb25zb2xlTG9nTXNnJywgYEZvY3VzIENsaWNrIE1vdmU6ICR7dGhpcy5Nb3ZlU3RlcHN9IHN0ZXBzYCwgJ2luZm8nKTsKICAgICAgICAgIHRoaXMuJGJ1cy4kZW1pdCgnQXBwU2VuZE1lc3NhZ2UnLCAnVnVlX0NvbW1hbmQnLCAnZm9jdXNNb3ZlU3RlcDonICsgZGlyICsgJzonICsgdGhpcy5Nb3ZlU3RlcHMpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICh3YXNMb25nUHJlc3MpIHsKICAgICAgICAvLyDplb/mjInvvJrlgZzmraLov57nu63np7vliqgKICAgICAgICB0aGlzLiRidXMuJGVtaXQoJ1NlbmRDb25zb2xlTG9nTXNnJywgJ0ZvY3VzIEFib3J0JywgJ2luZm8nKTsKICAgICAgICB0aGlzLiRidXMuJGVtaXQoJ0FwcFNlbmRNZXNzYWdlJywgJ1Z1ZV9Db21tYW5kJywgJ2ZvY3VzTW92ZVN0b3A6ZmFsc2UnKTsKICAgICAgfQoKICAgICAgLy8g5aSN5L2N54q25oCBCiAgICAgIHRoaXMuaXNNb3ZlSW5Qcm9ncmVzcyA9IGZhbHNlOwogICAgICB0aGlzLiRidXMuJGVtaXQoJ0ZvY3VzSW5Qcm9ncmVzcycsIGZhbHNlKTsKICAgICAgdGhpcy5sb25nUHJlc3NUcmlnZ2VyZWQgPSBmYWxzZTsKICAgICAgdGhpcy5wcmVzc0RpcmVjdGlvbiA9ICcnOwogICAgfSwKCiAgICBnZXRGb2N1c2VyTW92ZVN0YXRlKCkgewogICAgICB0aGlzLiRidXMuJGVtaXQoJ0FwcFNlbmRNZXNzYWdlJywgJ1Z1ZV9Db21tYW5kJywgJ2dldEZvY3VzZXJNb3ZlU3RhdGU6JyArIHRoaXMuaXNNb3ZlSW5Qcm9ncmVzcyk7CiAgICB9LAoKICAgIEZvY3VzTGVmdE1vdmUoKSB7CiAgICAgIC8vIHRoaXMuaXNCdG5Nb3ZlRGlzYWJsZWQgPSB0cnVlOwogICAgICAvLyB0aGlzLiRidXMuJGVtaXQoJ0ZvY3VzSW5Qcm9ncmVzcycsIHRydWUpOwogICAgICAvLyB0aGlzLiRidXMuJGVtaXQoJ1NlbmRDb25zb2xlTG9nTXNnJywgJ0ZvY3VzIExlZnQgTW92ZTonICsgdGhpcy5Nb3ZlU3RlcHMsICdpbmZvJyk7CiAgICAgIC8vIHRoaXMuJGJ1cy4kZW1pdCgnQXBwU2VuZE1lc3NhZ2UnLCAnVnVlX0NvbW1hbmQnLCAnZm9jdXNNb3ZlOicgKyAiTGVmdCIgKyAiOiIgKyB0aGlzLk1vdmVTdGVwcyk7CiAgICB9LAoKICAgIEZvY3VzUmlnaHRNb3ZlKCkgewogICAgICAvLyB0aGlzLmlzQnRuTW92ZURpc2FibGVkID0gdHJ1ZTsKICAgICAgLy8gdGhpcy4kYnVzLiRlbWl0KCdGb2N1c0luUHJvZ3Jlc3MnLCB0cnVlKTsKICAgICAgLy8gdGhpcy4kYnVzLiRlbWl0KCdTZW5kQ29uc29sZUxvZ01zZycsICdGb2N1cyBSaWdodCBNb3ZlOicgKyB0aGlzLk1vdmVTdGVwcywgJ2luZm8nKTsKICAgICAgLy8gdGhpcy4kYnVzLiRlbWl0KCdBcHBTZW5kTWVzc2FnZScsICdWdWVfQ29tbWFuZCcsICdmb2N1c01vdmU6JyArICJSaWdodCIgKyAiOiIgKyB0aGlzLk1vdmVTdGVwcyk7CiAgICB9LAoKICAgIFNob3dTcGVlZE51bShzcGVlZCkgewogICAgICB0aGlzLk1vdmVTcGVlZF8gPSBzcGVlZDsKICAgIH0sCgogICAgU2hvd1Bvc2l0aW9uTnVtKGN1cnJlbnQsIHRhcmdldCkgewogICAgICB0aGlzLkN1cnJlbnRQb3NpdGlvbiA9IGN1cnJlbnQ7CiAgICAgIC8vIHRoaXMuVGFyZ2V0UG9zaXRpb24gPSB0YXJnZXQ7CiAgICB9LAoKICAgIC8vIHNldFRhcmdldFBvc2l0aW9uKHRhcmdldCkgewogICAgLy8gICB0aGlzLlRhcmdldFBvc2l0aW9uID0gcGFyc2VJbnQodGFyZ2V0LCAxMCk7CiAgICAvLyB9LAoKICAgIC8vIEZvY3VzR290bygpIHsKICAgIC8vICAgdGhpcy4kYnVzLiRlbWl0KCdBcHBTZW5kTWVzc2FnZScsICdWdWVfQ29tbWFuZCcsICdmb2N1c01vdmU6JyArICJUYXJnZXQiICsgIjoiICsgdGhpcy5UYXJnZXRQb3NpdGlvbik7CiAgICAvLyAgIHRoaXMuJGJ1cy4kZW1pdCgnU2VuZENvbnNvbGVMb2dNc2cnLCAnRm9jdXMgTW92ZSB0bzonICsgdGhpcy5UYXJnZXRQb3NpdGlvbiwgJ2luZm8nKTsKICAgIC8vIH0sCgogICAgLy8gTW92ZURvbmUoKSB7CiAgICAvLyAgIHRoaXMuaXNCdG5Nb3ZlRGlzYWJsZWQgPSBmYWxzZTsKICAgIC8vICAgY29uc29sZS5sb2coJ1FIWUNDRCB8IEZvY3VzTW92ZURvbmUnKTsKICAgIC8vICAgdGhpcy4kYnVzLiRlbWl0KCdGb2N1c0luUHJvZ3Jlc3MnLCBmYWxzZSk7CiAgICAvLyAgIHRoaXMuJGJ1cy4kZW1pdCgnU2VuZENvbnNvbGVMb2dNc2cnLCAnRm9jdXNNb3ZlRG9uZScsICdpbmZvJyk7CiAgICAvLyB9LAoKICAgIFVwZGF0ZUZXSE0oY3VycmVudCwgRldITSkgewogICAgICB0aGlzLkN1cnJlbnRQb3NpdGlvbiA9IGN1cnJlbnQ7CiAgICAgIHRoaXMuRldITSA9IEZXSE07CiAgICB9LAoKICAgIC8vIGxvYWRBbmREaXNwbGF5SW1hZ2UoZmlsZSkgewogICAgLy8gICBjb25zdCBpbWFnZVBhdGggPSAnaW1nLycgKyBmaWxlOwoKICAgIC8vICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ0ZvY3VzLUNhbnZhcycpOwogICAgLy8gICBpZiAoY2FudmFzLmdldENvbnRleHQpIHsKICAgIC8vICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAgIC8vICAgICBjb25zdCBpbWcgPSBuZXcgSW1hZ2UoKTsKCiAgICAvLyAgICAgaW1nLm9ubG9hZCA9ICgpID0+IHsKICAgIC8vICAgICAgIGNhbnZhcy53aWR0aCA9IGltZy53aWR0aDsKICAgIC8vICAgICAgIGNhbnZhcy5oZWlnaHQgPSBpbWcuaGVpZ2h0OwogICAgLy8gICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpOwogICAgLy8gICAgICAgY3R4LmRyYXdJbWFnZShpbWcsIDAsIDApOwogICAgLy8gICAgIH07CiAgICAvLyAgICAgLy8g5re75Yqg6ZSZ6K+v5aSE55CGCiAgICAvLyAgICAgaW1nLm9uZXJyb3IgPSAoZXJyb3IpID0+IHsKICAgIC8vICAgICAgIGNvbnNvbGUubG9nKGDliqDovb3lm77lg4/lpLHotKU6ICR7aW1hZ2VQYXRofWApOwogICAgLy8gICAgIH07CiAgICAvLyAgICAgaW1nLnNyYyA9IGltYWdlUGF0aDsKICAgIC8vICAgfQogICAgLy8gfSwKICAgIHNlbGVjdFN0YXJJbWFnZShpbWFnZURhdGEpIHsKICAgICAgLy8gY29uc29sZS5sb2coJ1FIWUNDRCB8IHNlbGVjdFN0YXJJbWFnZScsIGltYWdlRGF0YSk7CiAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdGb2N1cy1DYW52YXMnKTsKICAgICAgaWYgKGNhbnZhcy5nZXRDb250ZXh0KSB7CiAgICAgICAgY2FudmFzLndpZHRoID0gaW1hZ2VEYXRhLndpZHRoOwogICAgICAgIGNhbnZhcy5oZWlnaHQgPSBpbWFnZURhdGEuaGVpZ2h0OwogICAgICAgIGNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpOwogICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTsKICAgICAgICBjdHgucHV0SW1hZ2VEYXRhKGltYWdlRGF0YSwgMCwgMCk7CiAgICAgIH0KICAgIH0sCgogICAgYWN0aXZlKCkgeyB9LAoKICAgIHRvZ2dsZUxvb3BTaG9vdGluZygpIHsKICAgICAgaWYgKCF0aGlzLmN1cnJlbnRNYWluQ2FudmFzSGFzSW1hZ2UpIHsKICAgICAgICB0aGlzLiRidXMuJGVtaXQoJ3Nob3dNc2dCb3gnLCAnUGxlYXNlIHRha2UgYSBwaWN0dXJlIGZpcnN0IScsICd3YXJuaW5nJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuaXNMb29wQWN0aXZlID0gIXRoaXMuaXNMb29wQWN0aXZlOwogICAgICB0aGlzLiRidXMuJGVtaXQoJ0FwcFNlbmRNZXNzYWdlJywgJ1Z1ZV9Db21tYW5kJywgJ0ZvY3VzTG9vcFNob290aW5nOicgKyB0aGlzLmlzTG9vcEFjdGl2ZSk7CiAgICAgIC8vIHRoaXMuJGJ1cy4kZW1pdCgnc2V0Rm9jdXNlckxvb3BpbmdTdGF0ZScsIHRoaXMuaXNMb29wQWN0aXZlKTsKICAgICAgdGhpcy4kYnVzLiRlbWl0KCdkaXNhYmxlQ2FwdHVyZUJ1dHRvbicsIHRoaXMuaXNMb29wQWN0aXZlKTsKICAgICAgaWYgKHRoaXMuaXNMb29wQWN0aXZlKSB7CiAgICAgICAgdGhpcy4kYnVzLiRlbWl0KCdzZXRGb2N1c2VyU3RhdGUnLCAnc2VsZWN0c3RhcnMnKTsgLy8g6K6+572u54Sm6Led54q25oCB5Li66YCJ5oup5pif54K5CiAgICAgICAgdGhpcy4kYnVzLiRlbWl0KCdzZXRTaG93U2VsZWN0U3RhcicsIHRydWUpOwogICAgICAgIHRoaXMuJGJ1cy4kZW1pdCgnc2V0Rm9jdXNDaGFydFRpbWVNb2RlJywgdHJ1ZSk7IC8vIOWIh+aNouWbvuihqOaooeW8j++8muaXtumXtOi9tOaooeW8jwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJGJ1cy4kZW1pdCgnc2V0Rm9jdXNlclN0YXRlJywgJ3NldFJPSScpOyAvLyDorr7nva7nhKbot53nirbmgIHkuLrorr7nva5ST0nljLrln58KICAgICAgICB0aGlzLiRidXMuJGVtaXQoJ3NldFNob3dTZWxlY3RTdGFyJywgZmFsc2UpOwogICAgICAgIHRoaXMuJGJ1cy4kZW1pdCgnc2V0Rm9jdXNDaGFydFRpbWVNb2RlJywgZmFsc2UpCiAgICAgIH0KICAgICAgCiAgICB9LAogICAgc3RhcnRGb2N1c0xvb3BGYWlsZWQobWVzc2FnZSkgewogICAgICB0aGlzLmlzTG9vcEFjdGl2ZSA9IGZhbHNlOwogICAgICB0aGlzLiRidXMuJGVtaXQoJ3NldEZvY3VzQ2hhcnRUaW1lTW9kZScsIGZhbHNlKQogICAgICB0aGlzLiRidXMuJGVtaXQoJ2Rpc2FibGVDYXB0dXJlQnV0dG9uJywgdGhpcy5pc0xvb3BBY3RpdmUpOwogICAgICB0aGlzLiRidXMuJGVtaXQoJ1NlbmRDb25zb2xlTG9nTXNnJywgbWVzc2FnZSwgJ3dhcm5pbmcnKTsKICAgICAgdGhpcy4kYnVzLiRlbWl0KCdzZXRTaG93U2VsZWN0U3RhcicsIGZhbHNlKTsKICAgIH0sCiAgICBzZXRGb2N1c2VyTG9vcGluZ1N0YXRlKHN0YXRlKSB7CiAgICAgIGlmIChzdGF0ZSA9PT0gJ3RydWUnKSB7CiAgICAgICAgdGhpcy5pc0xvb3BBY3RpdmUgPSB0cnVlOwogICAgICAgIHRoaXMuJGJ1cy4kZW1pdCgnc2V0Rm9jdXNDaGFydFRpbWVNb2RlJywgdHJ1ZSk7CiAgICAgICAgdGhpcy4kYnVzLiRlbWl0KCdzZXRTaG93U2VsZWN0U3RhcicsIHRydWUpOwogICAgICB9CiAgICAgIGVsc2UgewogICAgICAgIHRoaXMuaXNMb29wQWN0aXZlID0gZmFsc2U7CiAgICAgICAgdGhpcy4kYnVzLiRlbWl0KCdzZXRTaG93U2VsZWN0U3RhcicsIGZhbHNlKTsKICAgICAgICB0aGlzLiRidXMuJGVtaXQoJ3NldEZvY3VzQ2hhcnRUaW1lTW9kZScsIGZhbHNlKQogICAgICB9CiAgICAgIHRoaXMuJGJ1cy4kZW1pdCgnZGlzYWJsZUNhcHR1cmVCdXR0b24nLCB0aGlzLmlzTG9vcEFjdGl2ZSk7CiAgICB9LAoKICAgIHNldEN1cnJlbnRNYWluQ2FudmFzSGFzSW1hZ2UoaGFzSW1hZ2UpIHsKICAgICAgdGhpcy5jdXJyZW50TWFpbkNhbnZhc0hhc0ltYWdlID0gaGFzSW1hZ2U7CiAgICB9LAogICAgc2V0Rm9jdXNlcklzQ29ubmVjdGVkKGlzQ29ubmVjdGVkKSB7CiAgICAgIGlmIChpc0Nvbm5lY3RlZCA9PSAxKSB7CiAgICAgICAgdGhpcy5Gb2N1c2VySXNDb25uZWN0ZWQgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuRm9jdXNlcklzQ29ubmVjdGVkID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCgogICAgLy8g5qCh5YeG55u45YWz5pa55rOVCiAgICBzdGFydENhbGlicmF0aW9uKCkgewogICAgICB0cnkgewogICAgICAgIGlmICghdGhpcy5Gb2N1c2VySXNDb25uZWN0ZWQpIHsKICAgICAgICAgIHRoaXMuJGJ1cy4kZW1pdCgnc2hvd01zZ0JveCcsICdGb2N1c2VyIGlzIG5vdCBjb25uZWN0ZWQhJywgJ3dhcm5pbmcnKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgaWYgKHRoaXMuY2FsaWJyYXRpb25TdGF0ZSA9PT0gJ2NvbXBsZXRlJykgewogICAgICAgICAgLy8g5aaC5p6c5qCh5YeG5a6M5oiQ77yM54K55Ye75oyJ6ZKu57uT5p2f5qCh5YeGCiAgICAgICAgICB0aGlzLmVuZENhbGlicmF0aW9uKCk7CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzQ2FsaWJyYXRpbmcpIHsKICAgICAgICAgIC8vIOWmguaenOato+WcqOagoeWHhu+8jOeCueWHu+aMiemSrui/m+WFpeS4i+S4gOatpQogICAgICAgICAgdGhpcy5uZXh0Q2FsaWJyYXRpb25TdGVwKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgLy8g5byA5aeL5qCh5YeG77yM5pi+56S656Gu6K6k5a+56K+d5qGGCiAgICAgICAgdGhpcy4kYnVzLiRlbWl0KCdTaG93Q29uZmlybURpYWxvZycsICdDYWxpYnJhdGlvbicsIHRoaXMuJHQoJ0RvIHlvdSB3YW50IHRvIHBlcmZvcm0gZm9jdXNlciB0cmF2ZWwgY2FsaWJyYXRpb24/IENhbGlicmF0aW9uIHdpbGwgc2V0IHRoZSBtYXhpbXVtIGFuZCBtaW5pbXVtIHBvc2l0aW9ucyBvZiB0aGUgZm9jdXNlci4nKSwgJ1N0YXJ0Q2FsaWJyYXRpb24nKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gc3RhcnRDYWxpYnJhdGlvbjonLCBlcnJvcik7CiAgICAgIH0KICAgIH0sCgogICAgbmV4dENhbGlicmF0aW9uU3RlcCgpIHsKICAgICAgdGhpcy5jYWxpYnJhdGlvblN0ZXArKzsKICAgICAgY29uc29sZS5sb2coJ0NhbGlicmF0aW9uIHN0ZXA6JywgdGhpcy5jYWxpYnJhdGlvblN0ZXAsICdTdGF0ZTonLCB0aGlzLmNhbGlicmF0aW9uU3RhdGUpOwogICAgICAKICAgICAgaWYgKHRoaXMuY2FsaWJyYXRpb25TdGVwID09PSAxKSB7CiAgICAgICAgLy8g56ys5LiA5q2l77ya56e75Yqo5Yiw5pyA5bCP5L2N572u5bm26K6+572u5pyA5bCP5L2N572uCiAgICAgICAgdGhpcy5jYWxpYnJhdGlvbk1lc3NhZ2UgPSB0aGlzLiR0KCdQbGVhc2Ugb2JzZXJ2ZSBpZiB0aGUgZm9jdXNlciBoYXMgbW92ZWQgdG8gdGhlIG1pbmltdW0gcG9zaXRpb24uIElmIGl0IGhhcyByZWFjaGVkIHRoZSBwb3NpdGlvbiwgY2xpY2sgdGhlIGNhbGlicmF0aW9uIGJ1dHRvbiB0byBzZXQgdGhlIG1pbmltdW0gcG9zaXRpb24nKTsKICAgICAgICB0aGlzLiRidXMuJGVtaXQoJ0FwcFNlbmRNZXNzYWdlJywgJ1Z1ZV9Db21tYW5kJywgJ2ZvY3VzTW92ZVRvTWluJyk7CiAgICAgICAgdGhpcy4kYnVzLiRlbWl0KCdTZW5kQ29uc29sZUxvZ01zZycsICdDYWxpYnJhdGlvbiBTdGVwIDE6IE1vdmluZyB0byBtaW5pbXVtIHBvc2l0aW9uJywgJ2luZm8nKTsKICAgICAgICAvLyDpgJrnn6VBcHAudnVl5pu05paw5qCh5YeG5L+h5oGvCiAgICAgICAgdGhpcy4kYnVzLiRlbWl0KCdVcGRhdGVDYWxpYnJhdGlvbkluZm8nLCB0aGlzLmNhbGlicmF0aW9uU3RlcCwgdGhpcy5jYWxpYnJhdGlvbk1lc3NhZ2UpOwogICAgICB9IGVsc2UgaWYgKHRoaXMuY2FsaWJyYXRpb25TdGVwID09PSAyKSB7CiAgICAgICAgLy8g56ys5LqM5q2l77ya56e75Yqo5Yiw5pyA5aSn5L2N572u5bm26K6+572u5pyA5aSn5L2N572uCiAgICAgICAgdGhpcy5jYWxpYnJhdGlvbk1lc3NhZ2UgPSB0aGlzLiR0KCdQbGVhc2Ugb2JzZXJ2ZSBpZiB0aGUgZm9jdXNlciBoYXMgbW92ZWQgdG8gdGhlIG1heGltdW0gcG9zaXRpb24uIElmIGl0IGhhcyByZWFjaGVkIHRoZSBwb3NpdGlvbiwgY2xpY2sgdGhlIGNhbGlicmF0aW9uIGJ1dHRvbiB0byBzZXQgdGhlIG1heGltdW0gcG9zaXRpb24nKTsKICAgICAgICB0aGlzLiRidXMuJGVtaXQoJ0FwcFNlbmRNZXNzYWdlJywgJ1Z1ZV9Db21tYW5kJywgJ2ZvY3VzTW92ZVRvTWF4Jyk7CiAgICAgICAgdGhpcy4kYnVzLiRlbWl0KCdTZW5kQ29uc29sZUxvZ01zZycsICdDYWxpYnJhdGlvbiBTdGVwIDI6IE1vdmluZyB0byBtYXhpbXVtIHBvc2l0aW9uJywgJ2luZm8nKTsKICAgICAgICAvLyDpgJrnn6VBcHAudnVl5pu05paw5qCh5YeG5L+h5oGvCiAgICAgICAgdGhpcy4kYnVzLiRlbWl0KCdVcGRhdGVDYWxpYnJhdGlvbkluZm8nLCB0aGlzLmNhbGlicmF0aW9uU3RlcCwgdGhpcy5jYWxpYnJhdGlvbk1lc3NhZ2UpOwogICAgICB9IGVsc2UgaWYgKHRoaXMuY2FsaWJyYXRpb25TdGVwID09PSAzKSB7CiAgICAgICAgLy8g56ys5LiJ5q2l77ya5qCh5YeG5a6M5oiQ77yM6K6+572u6KGM56iL6IyD5Zu0CiAgICAgICAgdGhpcy5jYWxpYnJhdGlvblN0YXRlID0gJ2NvbXBsZXRlJzsKICAgICAgICB0aGlzLmNhbGlicmF0aW9uTWVzc2FnZSA9IHRoaXMuJHQoJ0NhbGlicmF0aW9uIGNvbXBsZXRlZCEgRm9jdXNlciB0cmF2ZWwgcmFuZ2UgaGFzIGJlZW4gc2V0LiBDbGljayB0aGUgYnV0dG9uIHRvIGVuZCBjYWxpYnJhdGlvbicpOwogICAgICAgIHRoaXMuJGJ1cy4kZW1pdCgnQXBwU2VuZE1lc3NhZ2UnLCAnVnVlX0NvbW1hbmQnLCAnZm9jdXNTZXRUcmF2ZWxSYW5nZScpOwogICAgICAgIHRoaXMuJGJ1cy4kZW1pdCgnU2VuZENvbnNvbGVMb2dNc2cnLCAnQ2FsaWJyYXRpb24gU3RlcCAzOiBUcmF2ZWwgcmFuZ2Ugc2V0IHN1Y2Nlc3NmdWxseScsICdzdWNjZXNzJyk7CiAgICAgICAgLy8g6YCa55+lQXBwLnZ1ZeabtOaWsOagoeWHhuS/oeaBrwogICAgICAgIHRoaXMuJGJ1cy4kZW1pdCgnVXBkYXRlQ2FsaWJyYXRpb25JbmZvJywgdGhpcy5jYWxpYnJhdGlvblN0ZXAsIHRoaXMuY2FsaWJyYXRpb25NZXNzYWdlLCAnY29tcGxldGUnKTsKICAgICAgfQogICAgfSwKCiAgICBzdGFydENhbGlicmF0aW9uUHJvY2VzcygpIHsKICAgICAgdGhpcy5pc0NhbGlicmF0aW5nID0gdHJ1ZTsKICAgICAgdGhpcy5jYWxpYnJhdGlvblN0YXRlID0gJ3J1bm5pbmcnOwogICAgICB0aGlzLmNhbGlicmF0aW9uU3RlcCA9IDA7CiAgICAgIHRoaXMuY2FsaWJyYXRpb25NZXNzYWdlID0gdGhpcy4kdCgnUHJlcGFyaW5nIHRvIHN0YXJ0IGZvY3VzZXIgdHJhdmVsIGNhbGlicmF0aW9uLi4uJyk7CiAgICAgIGNvbnNvbGUubG9nKCdDYWxpYnJhdGlvbiBzdGFydGVkOicsIHRoaXMuaXNDYWxpYnJhdGluZywgdGhpcy5jYWxpYnJhdGlvblN0YXRlKTsKICAgICAgdGhpcy4kYnVzLiRlbWl0KCdTZW5kQ29uc29sZUxvZ01zZycsICdTdGFydGluZyBmb2N1c2VyIHRyYXZlbCByYW5nZSBjYWxpYnJhdGlvbicsICdpbmZvJyk7CiAgICAgIAogICAgICAvLyDpgJrnn6VBcHAudnVl5pu05paw5qCh5YeG5L+h5oGvCiAgICAgIHRoaXMuJGJ1cy4kZW1pdCgnVXBkYXRlQ2FsaWJyYXRpb25JbmZvJywgMCwgJ1ByZXBhcmluZyB0byBzdGFydCBmb2N1c2VyIHRyYXZlbCBjYWxpYnJhdGlvbi4uLicsICdydW5uaW5nJyk7CiAgICAgIAogICAgICAvLyDlu7bov5/lvIDlp4vnrKzkuIDmraUKICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7CiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIHNlbGYubmV4dENhbGlicmF0aW9uU3RlcCgpOwogICAgICB9LCAxMDAwKTsKICAgIH0sCgoKCiAgICBlbmRDYWxpYnJhdGlvbigpIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zb2xlLmxvZygnRW5kaW5nIGNhbGlicmF0aW9uLCBjdXJyZW50IHN0YXRlOicsIHRoaXMuY2FsaWJyYXRpb25TdGF0ZSk7CiAgICAgICAgdGhpcy5pc0NhbGlicmF0aW5nID0gZmFsc2U7CiAgICAgICAgdGhpcy5jYWxpYnJhdGlvblN0YXRlID0gJ2lkbGUnOwogICAgICAgIHRoaXMuY2FsaWJyYXRpb25TdGVwID0gMDsKICAgICAgICB0aGlzLmNhbGlicmF0aW9uTWVzc2FnZSA9ICcnOwogICAgICAgIHRoaXMuJGJ1cy4kZW1pdCgnU2VuZENvbnNvbGVMb2dNc2cnLCAnRm9jdXNlciB0cmF2ZWwgcmFuZ2UgY2FsaWJyYXRpb24gZW5kZWQnLCAnaW5mbycpOwogICAgICAgIC8vIOmAmuefpUFwcC52dWXnu5PmnZ/moKHlh4YKICAgICAgICB0aGlzLiRidXMuJGVtaXQoJ0VuZENhbGlicmF0aW9uJyk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gZW5kQ2FsaWJyYXRpb246JywgZXJyb3IpOwogICAgICB9CiAgICB9LAoKICAgIC8vIOWkhOeQhueUteiwg+enu+WKqOWksei0pQogICAgZm9jdXNNb3ZlRmFpbGVkKGVycm9yTWVzc2FnZSkgewogICAgICBjb25zb2xlLmxvZygnRm9jdXMgbW92ZSBmYWlsZWQ6JywgZXJyb3JNZXNzYWdlKTsKCiAgICAgIC8vIOmHjee9ruagoeWHhueKtuaAgQogICAgICB0aGlzLmlzQ2FsaWJyYXRpbmcgPSBmYWxzZTsKICAgICAgdGhpcy5jYWxpYnJhdGlvblN0YXRlID0gJ2Vycm9yJzsKICAgICAgdGhpcy5jYWxpYnJhdGlvblN0ZXAgPSAwOwogICAgICB0aGlzLmNhbGlicmF0aW9uTWVzc2FnZSA9ICcnOwogICAgICAvLyDpgJrnn6VBcHAudnVl57uT5p2f5qCh5YeGCiAgICAgIHRoaXMuJGJ1cy4kZW1pdCgnRW5kQ2FsaWJyYXRpb24nKTsKICAgIH0sCgogICAgLy8g5aSE55CG6K6+572u6KGM56iL6IyD5Zu05oiQ5YqfCiAgICBmb2N1c1NldFRyYXZlbFJhbmdlU3VjY2VzcygpIHsKICAgICAgY29uc29sZS5sb2coJ0ZvY3VzIHNldCB0cmF2ZWwgcmFuZ2Ugc3VjY2VzcycpOwogICAgICB0aGlzLiRidXMuJGVtaXQoJ1NlbmRDb25zb2xlTG9nTXNnJywgJ0ZvY3VzZXIgdHJhdmVsIHJhbmdlIHNldCBzdWNjZXNzZnVsbHknLCAnc3VjY2VzcycpOwogICAgICAvLyDmoKHlh4blrozmiJDvvIzph43nva7nirbmgIEKICAgICAgdGhpcy5pc0NhbGlicmF0aW5nID0gZmFsc2U7CiAgICAgIHRoaXMuY2FsaWJyYXRpb25TdGF0ZSA9ICdjb21wbGV0ZSc7CiAgICAgIHRoaXMuY2FsaWJyYXRpb25TdGVwID0gMzsKICAgICAgdGhpcy5jYWxpYnJhdGlvbk1lc3NhZ2UgPSB0aGlzLiR0KCdDYWxpYnJhdGlvbiBjb21wbGV0ZWQhIEZvY3VzZXIgdHJhdmVsIHJhbmdlIGhhcyBiZWVuIHNldC4gQ2xpY2sgdGhlIGJ1dHRvbiB0byBlbmQgY2FsaWJyYXRpb24nKTsKICAgICAgLy8g6YCa55+lQXBwLnZ1ZeabtOaWsOagoeWHhuS/oeaBrwogICAgICB0aGlzLiRidXMuJGVtaXQoJ1VwZGF0ZUNhbGlicmF0aW9uSW5mbycsIHRoaXMuY2FsaWJyYXRpb25TdGVwLCB0aGlzLmNhbGlicmF0aW9uTWVzc2FnZSwgJ2NvbXBsZXRlJyk7CiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIHRoaXMuJGJ1cy4kZW1pdCgnRW5kQ2FsaWJyYXRpb24nKTsKICAgICAgfSwgMTAwMCk7CiAgICB9LAogICAgdXBkYXRlQXV0b0ZvY3VzZXJTdGF0ZShzdGF0ZSkgewogICAgICB0aGlzLmluQXV0b0ZvY3VzID0gc3RhdGU7CiAgICB9LAogIH0KfQo="},{"version":3,"sources":["FocuserPanel.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqLA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;;AAGA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FocuserPanel.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <transition name=\"panel\">\n    <div class=\"chart-panel\"\n      :style=\"{ bottom: bottom + 'px', left: ComponentPadding + 'px', right: ComponentPadding + 'px', height: height + 'px' }\">\n      <ImageChart ref=\"imagechart\" class=\"image-chart\" />\n      <FocusChart ref=\"focuschart\" class=\"focus-chart\" />\n\n      <div class=\"buttons-container\">\n\n        <button @click=\"startCalibration\" :class=\"{'btn-calibration': true, 'active-calibration': isCalibrating, 'complete-calibration': calibrationState === 'complete', 'error-calibration': calibrationState === 'error'}\" class=\"get-click\">\n          <div style=\"display: flex; justify-content: center; align-items: center;\">\n            <img v-if=\"calibrationState === 'complete'\" src=\"@/assets/images/svg/ui/CalibrationComplete.svg\" height=\"25px\"\n              style=\"min-height: 25px; pointer-events: none;\"></img>\n            <img v-else-if=\"isCalibrating\" src=\"@/assets/images/svg/ui/StopCalibration.svg\" height=\"25px\"\n              :class=\"{'pulse-animation': calibrationState === 'running'}\"\n              style=\"min-height: 25px; pointer-events: none;\"></img>\n            <img v-else src=\"@/assets/images/svg/ui/Calibration.svg\" height=\"25px\"\n              style=\"min-height: 25px; pointer-events: none;\"></img>\n          </div>\n        </button>\n\n        <button @click=\"toggleLoopShooting\" :class=\"{'btn-loop-shooting': true, 'active-loop': isLoopActive}\" class=\"get-click\">\n          <div style=\"display: flex; justify-content: center; align-items: center;\">\n            <img :src=\"require(isLoopActive ? '@/assets/images/svg/ui/ROI-Capturing.svg' : '@/assets/images/svg/ui/ROI-Capture.svg')\" height=\"25px\"\n              :class=\"{'rotate-animation': isLoopActive}\"\n              style=\"min-height: 25px; pointer-events: none;\"></img>\n          </div>\n        </button>\n\n        <!-- <button  @click=\"SpeedChange\" @touchend=\"active\" class=\"get-click btn-Speed\"><v-icon>mdi-run-fast</v-icon></button> -->\n        <button @click=\"SpeedChange\" @touchend=\"active\" class=\"get-click btn-Speed\">\n          <span v-if=\"MoveSpeed === 1\">\n            <div style=\"display: flex; justify-content: center; align-items: center;\">\n              <img src=\"@/assets/images/svg/ui/Speed-1.svg\" height=\"25px\"\n                style=\"min-height: 25px; pointer-events: none;\"></img>\n            </div>\n          </span>\n          <span v-if=\"MoveSpeed === 3\">\n            <div style=\"display: flex; justify-content: center; align-items: center;\">\n              <img src=\"@/assets/images/svg/ui/Speed-2.svg\" height=\"25px\"\n                style=\"min-height: 25px; pointer-events: none;\"></img>\n            </div>\n          </span>\n          <span v-if=\"MoveSpeed === 5\">\n            <div style=\"display: flex; justify-content: center; align-items: center;\">\n              <img src=\"@/assets/images/svg/ui/Speed-3.svg\" height=\"25px\"\n                style=\"min-height: 25px; pointer-events: none;\"></img>\n            </div>\n          </span>\n        </button>\n\n        <button @click=\"ROIChange\" @touchend=\"active\" class=\"get-click btn-ROI\">\n        <span v-if=\"ROI_length === 100\">\n          <div style=\"display: flex; justify-content: center; align-items: center;\">\n            <img src=\"@/assets/images/svg/ui/ROI-100.svg\" height=\"25px\"\n              style=\"min-height: 25px; pointer-events: none;\"></img>\n          </div>\n        </span>\n        <span v-if=\"ROI_length === 300\">\n          <div style=\"display: flex; justify-content: center; align-items: center;\">\n            <img src=\"@/assets/images/svg/ui/ROI-300.svg\" height=\"25px\"\n              style=\"min-height: 25px; pointer-events: none;\"></img>\n          </div>\n        </span>\n        <span v-if=\"ROI_length === 500\">\n          <div style=\"display: flex; justify-content: center; align-items: center;\">\n            <img src=\"@/assets/images/svg/ui/ROI-500.svg\" height=\"25px\"\n              style=\"min-height: 25px; pointer-events: none;\"></img>\n          </div>\n        </span>\n      </button>\n\n        <!-- <button :disabled=\"isBtnMoveDisabled\" @click=\"FocusLeftMove\" @touchend=\"active\" class=\"get-click btn-Left\">\n        <div style=\"display: flex; justify-content: center; align-items: center;\">\n          <img src=\"@/assets/images/svg/ui/arrow-left-circle.svg\" height=\"20px\" style=\"min-height: 20px; pointer-events: none;\"></img>\n        </div>\n      </button> -->\n        <button :disabled=\"isBtnMoveDisabled\" @mousedown=\"FocusMove('left')\" @mouseup=\"FocusAbort\" @mouseleave=\"FocusAbort\"\n          @touchstart=\"FocusMove('left')\" @touchend=\"FocusAbort\" @touchcancel=\"FocusAbort\" class=\"get-click btn-Left\">\n          <div style=\"display: flex; justify-content: center; align-items: center;\">\n            <img src=\"@/assets/images/svg/ui/arrow-left-circle.svg\" height=\"20px\"\n              style=\"min-height: 20px; pointer-events: none;\"></img>\n          </div>\n        </button>\n\n        <!-- <button  @click=\"AutoFocus\" @touchend=\"active\" class=\"get-click btn-Auto\"><v-icon>mdi-focus-auto</v-icon></button> -->\n        <button @click=\"AutoFocus\" @touchend=\"active\" class=\"get-click btn-Auto\">\n          <span v-if=\"inAutoFocus\">\n            <div style=\"display: flex; justify-content: center; align-items: center;\">\n              <img src=\"@/assets/images/svg/ui/StopAutoFocus.svg\" height=\"20px\"\n                style=\"min-height: 20px; pointer-events: none;\"></img>\n            </div>\n          </span>\n          <span v-else>\n            <div style=\"display: flex; justify-content: center; align-items: center;\">\n              <img src=\"@/assets/images/svg/ui/AutoFocus.svg\" height=\"20px\"\n                style=\"min-height: 20px; pointer-events: none;\"></img>\n            </div>\n          </span>\n        </button>\n\n        <!-- <button @click=\"FocusGoto\" @touchend=\"active\" class=\"get-click btn-Goto\">\n          <div style=\"display: flex; justify-content: center; align-items: center;\">\n            <img src=\"@/assets/images/svg/ui/Move.svg\" height=\"10px\"\n              style=\"min-height: 10px; pointer-events: none;\"></img>\n          </div>\n        </button> -->\n        <!-- <button :disabled=\"isBtnMoveDisabled\" @click=\"FocusRightMove\" @touchend=\"active\" class=\"get-click btn-Right\">\n          <div style=\"display: flex; justify-content: center; align-items: center;\">\n            <img src=\"@/assets/images/svg/ui/arrow-right-circle.svg\" height=\"20px\"\n              style=\"min-height: 20px; pointer-events: none;\"></img>\n          </div>\n        </button> -->\n\n        <button :disabled=\"isBtnMoveDisabled\" @mousedown=\"FocusMove('right')\" @mouseup=\"FocusAbort\" @mouseleave=\"FocusAbort\"\n          @touchstart=\"FocusMove('right')\" @touchend=\"FocusAbort\" @touchcancel=\"FocusAbort\" class=\"get-click btn-Right\">\n          <div style=\"display: flex; justify-content: center; align-items: center;\">\n            <img src=\"@/assets/images/svg/ui/arrow-right-circle.svg\" height=\"20px\"\n              style=\"min-height: 20px; pointer-events: none;\"></img>\n          </div>\n        </button>\n\n        <!-- <button @click=\"StepsChange\" @touchend=\"active\" class=\"get-click btn-Steps\">\n          <span v-if=\"MoveSteps === 100\">\n            <div style=\"display: flex; justify-content: center; align-items: center;\">\n              <img src=\"@/assets/images/svg/ui/step_100.svg\" height=\"25px\"\n                style=\"min-height: 25px; pointer-events: none;\"></img>\n            </div>\n          </span>\n          <span v-if=\"MoveSteps === 500\">\n            <div style=\"display: flex; justify-content: center; align-items: center;\">\n              <img src=\"@/assets/images/svg/ui/step_500.svg\" height=\"25px\"\n                style=\"min-height: 25px; pointer-events: none;\"></img>\n            </div>\n          </span>\n          <span v-if=\"MoveSteps === 1000\">\n            <div style=\"display: flex; justify-content: center; align-items: center;\">\n              <img src=\"@/assets/images/svg/ui/step_1000.svg\" height=\"25px\"\n                style=\"min-height: 25px; pointer-events: none;\"></img>\n            </div>\n          </span>\n          <span v-if=\"MoveSteps === 5000\">\n            <div style=\"display: flex; justify-content: center; align-items: center;\">\n              <img src=\"@/assets/images/svg/ui/step_5000.svg\" height=\"25px\"\n                style=\"min-height: 25px; pointer-events: none;\"></img>\n            </div>\n          </span>\n          <span v-if=\"MoveSteps === 10000\">\n            <div style=\"display: flex; justify-content: center; align-items: center;\">\n              <img src=\"@/assets/images/svg/ui/step_10000.svg\" height=\"25px\"\n                style=\"min-height: 25px; pointer-events: none;\"></img>\n            </div>\n          </span>\n        </button> -->\n      </div>\n\n      <div class=\"Canvas-Bar\">\n        <canvas ref=\"FocusCanvas\" id=\"Focus-Canvas\"></canvas>\n      </div>\n\n      <div class=\"Speed-Bar\" :style=\"{ fontSize: '8px' }\">\n        {{ this.MoveSpeed_ }}\n      </div>\n\n      <div class=\"State-Bar\" :style=\"{ left: 80 + 'px', right: 80 + 'px', fontSize: '8px' }\">\n        <div style=\"text-align: left;\"> Current:{{ this.CurrentPosition }}</div>\n        <div style=\"text-align: center;\"> FWHM:{{ this.FWHM }}</div>\n        <!-- <div style=\"text-align: right;\">Target:{{ this.TargetPosition }} </div> -->\n      </div>\n\n      <div class=\"Steps-Bar\" :style=\"{ fontSize: '8px' }\">\n        {{ this.MoveSteps }}\n      </div>\n\n\n\n    </div>\n  </transition>\n</template>\n\n<script>\nimport FocusChart from './Chart-Focus.vue';\nimport ImageChart from './Chart-FocusImage.vue';\n\nexport default {\n  name: 'FocuserPanel',\n  data() {\n    return {\n      // width: 330, // 初始宽度\n      bottom: 10,\n      ComponentPadding: 0,\n      height: 90,\n\n      MoveSteps: 100,\n      MoveSpeed: 1,\n      MoveSpeed_: 1,\n\n      CurrentPosition: 0,\n      // TargetPosition: 0,\n      FWHM: 0,\n\n      isBtnMoveDisabled: false, // 调焦按钮是否禁用\n      isMoveInProgress: false, // 调焦是否进行中\n\n      inAutoFocus: false, // 自动对焦是否开启\n      isLoopActive: false, // 新增状态控制循环拍摄是否激活\n\n      currentMainCanvasHasImage: false,\n\n\n      ROI_length: 300,\n\n      FocuserIsConnected: false,\n\n      moveStartTime: 0,  // 电调移动按下时间记录\n\n      // 长按判定/状态\n      longPressTimer: null,\n      longPressTriggered: false,\n      pressDirection: '',\n      isPressing: false,\n\n      // 校准相关数据\n      isCalibrating: false, // 是否正在校准\n      calibrationStep: 0, // 校准步骤 (1-3)\n      calibrationMessage: '', // 校准提示信息\n      calibrationState: 'idle', // 校准状态: 'idle', 'running', 'complete'\n\n    };\n  },\n  components: {\n    FocusChart,\n    ImageChart\n  },\n  mounted() {\n    this.updatePosition(); // 初始化位置\n    window.addEventListener('resize', this.updatePosition);\n  },\n  beforeDestroy() {\n    window.removeEventListener('resize', this.updatePosition);\n  },\n  created() {\n    // this.$bus.$on('AutoHistogramNum', this.setAutoHistogramNum);\n    this.$bus.$on('FocusChangeSpeedSuccess', this.ShowSpeedNum);\n    this.$bus.$on('FocusPosition', this.ShowPositionNum);\n    // this.$bus.$on('FocusMoveDone', this.MoveDone);\n    this.$bus.$on('UpdateFWHM', this.UpdateFWHM);\n    this.$bus.$on('showRoiImage', this.loadAndDisplayImage);\n    // this.$bus.$on('setTargetPosition', this.setTargetPosition);\n    this.$bus.$on('AutoFocusOver', this.AutoFocusOver);\n    this.$bus.$on('getFocuserMoveState', this.getFocuserMoveState);\n    this.$bus.$on('startFocusLoopFailed', this.startFocusLoopFailed);\n    this.$bus.$on('setFocuserLoopingState', this.setFocuserLoopingState);\n    this.$bus.$on('selectStarImage', this.selectStarImage);\n    this.$bus.$on('setCurrentMainCanvasHasImage', this.setCurrentMainCanvasHasImage);\n    this.$bus.$on('FocuserConnected', this.setFocuserIsConnected);\n    this.$bus.$on('setRedBoxSideLength', this.setRedBoxSideLength);\n    this.$bus.$on('syncROI_length', this.syncROI_length);\n    this.$bus.$on('StartCalibration', this.startCalibrationProcess);\n\n\n\n    this.$bus.$on('focusSetTravelRangeSuccess', this.focusSetTravelRangeSuccess);\n    this.$bus.$on('focusMoveFailed', this.focusMoveFailed);\n\n    this.$bus.$on('updateAutoFocuserState', this.updateAutoFocuserState);  // 更新自动对焦状态\n\n    // 当ui初始化完成,自动获取当前状态\n    this.$bus.$emit('AppSendMessage', 'Vue_Command', 'getFocuserState');\n  },\n  methods: {\n    updatePosition() {\n      const screenWidth = window.innerWidth;\n      const halfWidth = screenWidth / 2 - 250;\n      this.ComponentPadding = Math.max(halfWidth, 170);\n      // console.log('Updated Padding:', this.ComponentPadding);\n\n      // 计算宽度\n      const newWidth = screenWidth - (this.ComponentPadding * 2);\n      // console.log('Update Focus Chart width:', newWidth);\n      this.$bus.$emit('updateFocusChartWidth', newWidth);\n      \n    },\n    AutoFocus() {\n      if (!this.FocuserIsConnected) {\n        this.$bus.$emit('showMsgBox', 'Focuser is not connected!', 'warning');\n        return;\n      }\n      if (this.isMoveInProgress) {\n        this.$bus.$emit('showMsgBox', 'Focuser is moving!', 'warning');\n        return;\n      }\n\n      if (this.inAutoFocus) {\n        this.inAutoFocus = false;\n        // console.log('QHYCCD | StopAutoFocus');\n        this.$bus.$emit('SendConsoleLogMsg', 'StopAutoFocus', 'info');\n        this.$bus.$emit('AppSendMessage', 'Vue_Command', 'StopAutoFocus');\n      }else{\n        this.inAutoFocus = true;\n        this.$bus.$emit('ShowConfirmDialog','Confirm', 'Are you sure you want to start auto focus?', 'startAutoFocus');\n      }\n \n    },\n\n    AutoFocusOver() {\n      console.log('QHYCCD | AutoFocusOver');\n      this.$bus.$emit('SendConsoleLogMsg', 'AutoFocusOver', 'info');\n      this.inAutoFocus = false;\n    },\n\n    StepsChange() {\n      if (!this.FocuserIsConnected) {\n        this.$bus.$emit('showMsgBox', 'Focuser is not connected!', 'warning');\n        return;\n      }\n      if (this.MoveSteps === 100) this.MoveSteps = 500;\n      else if (this.MoveSteps === 500) this.MoveSteps = 1000;\n      else if (this.MoveSteps === 1000) this.MoveSteps = 5000;\n      else if (this.MoveSteps === 5000) this.MoveSteps = 10000;\n      else if (this.MoveSteps === 10000) this.MoveSteps = 100;\n\n      console.log('QHYCCD | StepsChange: ', this.MoveSteps);\n      // this.$bus.$emit('SendConsoleLogMsg', 'StepsChange:' + this.MoveSteps, 'info');\n    },\n\n    SpeedChange() {\n      if (!this.FocuserIsConnected) {\n        this.$bus.$emit('showMsgBox', 'Focuser is not connected!', 'warning');\n        return;\n      }\n      if (this.MoveSpeed === 1) this.MoveSpeed = 3;\n      else if (this.MoveSpeed === 3) this.MoveSpeed = 5;\n      else if (this.MoveSpeed === 5) this.MoveSpeed = 1;\n\n      console.log('QHYCCD | SpeedChange: ', this.MoveSpeed);\n      this.$bus.$emit('SendConsoleLogMsg', 'SpeedChange:' + this.MoveSpeed, 'info');\n      if (this.MoveSpeed === 1) {\n        this.$bus.$emit('AppSendMessage', 'Vue_Command', 'focusSpeed:0');\n      } else {\n        this.$bus.$emit('AppSendMessage', 'Vue_Command', 'focusSpeed:' + this.MoveSpeed);\n      }\n    },\n\n    ROIChange() {\n      if (this.ROI_length === 100) this.ROI_length = 300;\n      else if (this.ROI_length === 300) this.ROI_length = 500;\n      else if (this.ROI_length === 500) this.ROI_length = 100;\n\n      this.syncROI_length();\n    },\n    setRedBoxSideLength(length) {\n      if (length === '100' || length === 100) this.ROI_length = 100;\n      else if (length === '300' || length === 300) this.ROI_length = 300;\n      else if (length === '500' || length === 500) this.ROI_length = 500;\n      else this.ROI_length = 300;\n      console.log('QHYCCD | setRedBoxSideLength: ', this.ROI_length);\n      this.syncROI_length();\n    },\n    // 同步ROI长度\n    syncROI_length() {\n      this.$bus.$emit('SendConsoleLogMsg', 'QHYCCD | ROIChange:' + this.ROI_length, 'info');\n      this.$bus.$emit('AppSendMessage', 'Vue_Command', 'RedBoxSizeChange:' + this.ROI_length); // 更新qtserver中的RedBoxSideLength\n      this.$bus.$emit('RedBoxSizeChange', this.ROI_length); // 更新gui.vue和app.vue中的RedBoxSideLength\n    },\n\n    FocusMove(direction) {\n      if (!this.FocuserIsConnected) {\n        this.$bus.$emit('showMsgBox', 'Focuser is not connected!', 'warning');\n        return;\n      }\n      if (this.inAutoFocus) return;\n\n      // 记录按下时间与方向\n      this.moveStartTime = new Date().getTime();\n      this.pressDirection = direction;\n      this.isPressing = true;\n      this.longPressTriggered = false;\n\n      // 清理可能存在的定时器\n      if (this.longPressTimer) {\n        clearTimeout(this.longPressTimer);\n        this.longPressTimer = null;\n      }\n\n      // 200ms 后若仍按下则开始连续移动\n      this.longPressTimer = setTimeout(() => {\n        if (!this.isPressing || this.longPressTriggered) return;\n        this.longPressTriggered = true;\n        this.$bus.$emit('FocusInProgress', true);\n        if (this.pressDirection === 'left') {\n          this.$bus.$emit('SendConsoleLogMsg', 'Focus Left Move:' + this.MoveSteps, 'info');\n          this.$bus.$emit('AppSendMessage', 'Vue_Command', 'focusMove:' + 'Left');\n        } else if (this.pressDirection === 'right') {\n          this.$bus.$emit('SendConsoleLogMsg', 'Focus Right Move:' + this.MoveSteps, 'info');\n          this.$bus.$emit('AppSendMessage', 'Vue_Command', 'focusMove:' + 'Right');\n        }\n        this.isMoveInProgress = true;\n      }, 200);\n    },\n\n    FocusAbort() {\n      const pressDuration = new Date().getTime() - this.moveStartTime;\n\n      // 停止长按定时器\n      if (this.longPressTimer) {\n        clearTimeout(this.longPressTimer);\n        this.longPressTimer = null;\n      }\n\n      // 标记已松开\n      const wasLongPress = this.longPressTriggered;\n      const dir = this.pressDirection === 'left' ? 'Left' : (this.pressDirection === 'right' ? 'Right' : '');\n      this.isPressing = false;\n\n      if (!wasLongPress && pressDuration < 200) {\n        // 短按：触发一次步进移动（启动后立刻停止，走点击逻辑）\n        if (dir) {\n          this.$bus.$emit('SendConsoleLogMsg', `Focus Click Move: ${this.MoveSteps} steps`, 'info');\n          this.$bus.$emit('AppSendMessage', 'Vue_Command', 'focusMoveStep:' + dir + ':' + this.MoveSteps);\n        }\n      } else if (wasLongPress) {\n        // 长按：停止连续移动\n        this.$bus.$emit('SendConsoleLogMsg', 'Focus Abort', 'info');\n        this.$bus.$emit('AppSendMessage', 'Vue_Command', 'focusMoveStop:false');\n      }\n\n      // 复位状态\n      this.isMoveInProgress = false;\n      this.$bus.$emit('FocusInProgress', false);\n      this.longPressTriggered = false;\n      this.pressDirection = '';\n    },\n\n    getFocuserMoveState() {\n      this.$bus.$emit('AppSendMessage', 'Vue_Command', 'getFocuserMoveState:' + this.isMoveInProgress);\n    },\n\n    FocusLeftMove() {\n      // this.isBtnMoveDisabled = true;\n      // this.$bus.$emit('FocusInProgress', true);\n      // this.$bus.$emit('SendConsoleLogMsg', 'Focus Left Move:' + this.MoveSteps, 'info');\n      // this.$bus.$emit('AppSendMessage', 'Vue_Command', 'focusMove:' + \"Left\" + \":\" + this.MoveSteps);\n    },\n\n    FocusRightMove() {\n      // this.isBtnMoveDisabled = true;\n      // this.$bus.$emit('FocusInProgress', true);\n      // this.$bus.$emit('SendConsoleLogMsg', 'Focus Right Move:' + this.MoveSteps, 'info');\n      // this.$bus.$emit('AppSendMessage', 'Vue_Command', 'focusMove:' + \"Right\" + \":\" + this.MoveSteps);\n    },\n\n    ShowSpeedNum(speed) {\n      this.MoveSpeed_ = speed;\n    },\n\n    ShowPositionNum(current, target) {\n      this.CurrentPosition = current;\n      // this.TargetPosition = target;\n    },\n\n    // setTargetPosition(target) {\n    //   this.TargetPosition = parseInt(target, 10);\n    // },\n\n    // FocusGoto() {\n    //   this.$bus.$emit('AppSendMessage', 'Vue_Command', 'focusMove:' + \"Target\" + \":\" + this.TargetPosition);\n    //   this.$bus.$emit('SendConsoleLogMsg', 'Focus Move to:' + this.TargetPosition, 'info');\n    // },\n\n    // MoveDone() {\n    //   this.isBtnMoveDisabled = false;\n    //   console.log('QHYCCD | FocusMoveDone');\n    //   this.$bus.$emit('FocusInProgress', false);\n    //   this.$bus.$emit('SendConsoleLogMsg', 'FocusMoveDone', 'info');\n    // },\n\n    UpdateFWHM(current, FWHM) {\n      this.CurrentPosition = current;\n      this.FWHM = FWHM;\n    },\n\n    // loadAndDisplayImage(file) {\n    //   const imagePath = 'img/' + file;\n\n    //   const canvas = document.getElementById('Focus-Canvas');\n    //   if (canvas.getContext) {\n    //     const ctx = canvas.getContext('2d');\n    //     const img = new Image();\n\n    //     img.onload = () => {\n    //       canvas.width = img.width;\n    //       canvas.height = img.height;\n    //       ctx.clearRect(0, 0, canvas.width, canvas.height);\n    //       ctx.drawImage(img, 0, 0);\n    //     };\n    //     // 添加错误处理\n    //     img.onerror = (error) => {\n    //       console.log(`加载图像失败: ${imagePath}`);\n    //     };\n    //     img.src = imagePath;\n    //   }\n    // },\n    selectStarImage(imageData) {\n      // console.log('QHYCCD | selectStarImage', imageData);\n      const canvas = document.getElementById('Focus-Canvas');\n      if (canvas.getContext) {\n        canvas.width = imageData.width;\n        canvas.height = imageData.height;\n        const ctx = canvas.getContext('2d');\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        ctx.putImageData(imageData, 0, 0);\n      }\n    },\n\n    active() { },\n\n    toggleLoopShooting() {\n      if (!this.currentMainCanvasHasImage) {\n        this.$bus.$emit('showMsgBox', 'Please take a picture first!', 'warning');\n        return;\n      }\n      this.isLoopActive = !this.isLoopActive;\n      this.$bus.$emit('AppSendMessage', 'Vue_Command', 'FocusLoopShooting:' + this.isLoopActive);\n      // this.$bus.$emit('setFocuserLoopingState', this.isLoopActive);\n      this.$bus.$emit('disableCaptureButton', this.isLoopActive);\n      if (this.isLoopActive) {\n        this.$bus.$emit('setFocuserState', 'selectstars'); // 设置焦距状态为选择星点\n        this.$bus.$emit('setShowSelectStar', true);\n        this.$bus.$emit('setFocusChartTimeMode', true); // 切换图表模式：时间轴模式\n      } else {\n        this.$bus.$emit('setFocuserState', 'setROI'); // 设置焦距状态为设置ROI区域\n        this.$bus.$emit('setShowSelectStar', false);\n        this.$bus.$emit('setFocusChartTimeMode', false)\n      }\n      \n    },\n    startFocusLoopFailed(message) {\n      this.isLoopActive = false;\n      this.$bus.$emit('setFocusChartTimeMode', false)\n      this.$bus.$emit('disableCaptureButton', this.isLoopActive);\n      this.$bus.$emit('SendConsoleLogMsg', message, 'warning');\n      this.$bus.$emit('setShowSelectStar', false);\n    },\n    setFocuserLoopingState(state) {\n      if (state === 'true') {\n        this.isLoopActive = true;\n        this.$bus.$emit('setFocusChartTimeMode', true);\n        this.$bus.$emit('setShowSelectStar', true);\n      }\n      else {\n        this.isLoopActive = false;\n        this.$bus.$emit('setShowSelectStar', false);\n        this.$bus.$emit('setFocusChartTimeMode', false)\n      }\n      this.$bus.$emit('disableCaptureButton', this.isLoopActive);\n    },\n\n    setCurrentMainCanvasHasImage(hasImage) {\n      this.currentMainCanvasHasImage = hasImage;\n    },\n    setFocuserIsConnected(isConnected) {\n      if (isConnected == 1) {\n        this.FocuserIsConnected = true;\n      } else {\n        this.FocuserIsConnected = false;\n      }\n    },\n\n    // 校准相关方法\n    startCalibration() {\n      try {\n        if (!this.FocuserIsConnected) {\n          this.$bus.$emit('showMsgBox', 'Focuser is not connected!', 'warning');\n          return;\n        }\n        \n        if (this.calibrationState === 'complete') {\n          // 如果校准完成，点击按钮结束校准\n          this.endCalibration();\n        } else if (this.isCalibrating) {\n          // 如果正在校准，点击按钮进入下一步\n          this.nextCalibrationStep();\n        } else {\n                  // 开始校准，显示确认对话框\n        this.$bus.$emit('ShowConfirmDialog', 'Calibration', this.$t('Do you want to perform focuser travel calibration? Calibration will set the maximum and minimum positions of the focuser.'), 'StartCalibration');\n        }\n      } catch (error) {\n        console.error('Error in startCalibration:', error);\n      }\n    },\n\n    nextCalibrationStep() {\n      this.calibrationStep++;\n      console.log('Calibration step:', this.calibrationStep, 'State:', this.calibrationState);\n      \n      if (this.calibrationStep === 1) {\n        // 第一步：移动到最小位置并设置最小位置\n        this.calibrationMessage = this.$t('Please observe if the focuser has moved to the minimum position. If it has reached the position, click the calibration button to set the minimum position');\n        this.$bus.$emit('AppSendMessage', 'Vue_Command', 'focusMoveToMin');\n        this.$bus.$emit('SendConsoleLogMsg', 'Calibration Step 1: Moving to minimum position', 'info');\n        // 通知App.vue更新校准信息\n        this.$bus.$emit('UpdateCalibrationInfo', this.calibrationStep, this.calibrationMessage);\n      } else if (this.calibrationStep === 2) {\n        // 第二步：移动到最大位置并设置最大位置\n        this.calibrationMessage = this.$t('Please observe if the focuser has moved to the maximum position. If it has reached the position, click the calibration button to set the maximum position');\n        this.$bus.$emit('AppSendMessage', 'Vue_Command', 'focusMoveToMax');\n        this.$bus.$emit('SendConsoleLogMsg', 'Calibration Step 2: Moving to maximum position', 'info');\n        // 通知App.vue更新校准信息\n        this.$bus.$emit('UpdateCalibrationInfo', this.calibrationStep, this.calibrationMessage);\n      } else if (this.calibrationStep === 3) {\n        // 第三步：校准完成，设置行程范围\n        this.calibrationState = 'complete';\n        this.calibrationMessage = this.$t('Calibration completed! Focuser travel range has been set. Click the button to end calibration');\n        this.$bus.$emit('AppSendMessage', 'Vue_Command', 'focusSetTravelRange');\n        this.$bus.$emit('SendConsoleLogMsg', 'Calibration Step 3: Travel range set successfully', 'success');\n        // 通知App.vue更新校准信息\n        this.$bus.$emit('UpdateCalibrationInfo', this.calibrationStep, this.calibrationMessage, 'complete');\n      }\n    },\n\n    startCalibrationProcess() {\n      this.isCalibrating = true;\n      this.calibrationState = 'running';\n      this.calibrationStep = 0;\n      this.calibrationMessage = this.$t('Preparing to start focuser travel calibration...');\n      console.log('Calibration started:', this.isCalibrating, this.calibrationState);\n      this.$bus.$emit('SendConsoleLogMsg', 'Starting focuser travel range calibration', 'info');\n      \n      // 通知App.vue更新校准信息\n      this.$bus.$emit('UpdateCalibrationInfo', 0, 'Preparing to start focuser travel calibration...', 'running');\n      \n      // 延迟开始第一步\n      const self = this;\n      setTimeout(() => {\n        self.nextCalibrationStep();\n      }, 1000);\n    },\n\n\n\n    endCalibration() {\n      try {\n        console.log('Ending calibration, current state:', this.calibrationState);\n        this.isCalibrating = false;\n        this.calibrationState = 'idle';\n        this.calibrationStep = 0;\n        this.calibrationMessage = '';\n        this.$bus.$emit('SendConsoleLogMsg', 'Focuser travel range calibration ended', 'info');\n        // 通知App.vue结束校准\n        this.$bus.$emit('EndCalibration');\n      } catch (error) {\n        console.error('Error in endCalibration:', error);\n      }\n    },\n\n    // 处理电调移动失败\n    focusMoveFailed(errorMessage) {\n      console.log('Focus move failed:', errorMessage);\n\n      // 重置校准状态\n      this.isCalibrating = false;\n      this.calibrationState = 'error';\n      this.calibrationStep = 0;\n      this.calibrationMessage = '';\n      // 通知App.vue结束校准\n      this.$bus.$emit('EndCalibration');\n    },\n\n    // 处理设置行程范围成功\n    focusSetTravelRangeSuccess() {\n      console.log('Focus set travel range success');\n      this.$bus.$emit('SendConsoleLogMsg', 'Focuser travel range set successfully', 'success');\n      // 校准完成，重置状态\n      this.isCalibrating = false;\n      this.calibrationState = 'complete';\n      this.calibrationStep = 3;\n      this.calibrationMessage = this.$t('Calibration completed! Focuser travel range has been set. Click the button to end calibration');\n      // 通知App.vue更新校准信息\n      this.$bus.$emit('UpdateCalibrationInfo', this.calibrationStep, this.calibrationMessage, 'complete');\n      setTimeout(() => {\n        this.$bus.$emit('EndCalibration');\n      }, 1000);\n    },\n    updateAutoFocuserState(state) {\n      this.inAutoFocus = state;\n    },\n  }\n}\n</script>\n\n<style scoped>\n.chart-panel {\n  position: absolute;\n  background-color: rgba(64, 64, 64, 0.5);\n  backdrop-filter: blur(5px);\n  border-radius: 10px;\n  border: 4px solid rgba(128, 128, 128, 0.5);\n  box-sizing: border-box;\n  transition: width 0.2s ease;\n}\n\n@keyframes showPanelAnimation {\n  from {\n    bottom: -150px;\n  }\n\n  to {\n    bottom: 10px;\n  }\n}\n\n@keyframes hidePanelAnimation {\n  from {\n    bottom: 10px;\n  }\n\n  to {\n    bottom: -150px;\n  }\n}\n\n.panel-enter-active {\n  animation: showPanelAnimation 0.15s forwards;\n}\n\n.panel-leave-active {\n  animation: hidePanelAnimation 0.15s forwards;\n}\n\n.focus-chart {\n  position: absolute;\n  bottom: 1px;\n  left: 5px;\n}\n\n.image-chart {\n  position: absolute;\n  bottom: 1px;\n  right: 0px;\n}\n\n.buttons-container {\n  display: flex;\n  justify-content: space-between;\n  position: absolute;\n  top: -39px;\n  left: 5px;\n  right: 5px;\n}\n\n.btn-Speed {\n  width: 30px;\n  height: 30px;\n\n  user-select: none;\n  background-color: rgba(64, 64, 64, 0.5);\n  backdrop-filter: blur(5px);\n  border: none;\n  border-radius: 50%;\n  box-sizing: border-box;\n}\n\n.btn-Left {\n  width: 30px;\n  height: 30px;\n\n  user-select: none;\n  background-color: rgba(64, 64, 64, 0.5);\n  backdrop-filter: blur(5px);\n  border: none;\n  border-radius: 50%;\n  box-sizing: border-box;\n}\n\n.btn-ROI {\n  width: 30px;\n  height: 30px;\n\n  user-select: none;\n  background-color: rgba(64, 64, 64, 0.5);\n  backdrop-filter: blur(5px);\n  border: none;\n  border-radius: 50%;\n  box-sizing: border-box;\n}\n\n.btn-Auto {\n  width: 30px;\n  height: 30px;\n\n  user-select: none;\n  background-color: rgba(64, 64, 64, 0.5);\n  backdrop-filter: blur(5px);\n  border: none;\n  border-radius: 50%;\n  box-sizing: border-box;\n}\n\n.btn-Right {\n  width: 30px;\n  height: 30px;\n\n  user-select: none;\n  background-color: rgba(64, 64, 64, 0.5);\n  backdrop-filter: blur(5px);\n  border: none;\n  border-radius: 50%;\n  box-sizing: border-box;\n}\n\n.btn-Steps {\n  width: 30px;\n  height: 30px;\n\n  user-select: none;\n  background-color: rgba(64, 64, 64, 0.5);\n  backdrop-filter: blur(5px);\n  border: none;\n  border-radius: 50%;\n  box-sizing: border-box;\n}\n\n.btn-Goto {\n  width: 30px;\n  height: 30px;\n\n  user-select: none;\n  background-color: rgba(64, 64, 64, 0.5);\n  backdrop-filter: blur(5px);\n  border: none;\n  border-radius: 50%;\n  box-sizing: border-box;\n}\n\n.btn-Auto:active,\n.btn-Left:active,\n.btn-Right:active,\n.btn-Steps:active,\n.btn-Speed:active,\n.btn-Goto:active {\n  transform: scale(0.95);\n  /* 点击时缩小按钮 */\n  background-color: rgba(255, 255, 255, 0.7);\n}\n\n.Canvas-Bar {\n  position: absolute;\n  bottom: 13px;\n  right: 7px;\n\n  width: 61px;\n  height: 60px;\n\n  user-select: none;\n  background-color: rgba(0, 0, 0, 0.0);\n  /* backdrop-filter: blur(5px); */\n  border: 1px solid rgba(128, 128, 128, 1);\n  /* border-radius: 5px;  */\n  box-sizing: border-box;\n}\n\n.Speed-Bar {\n  position: absolute;\n  top: 0px;\n  left: 5px;\n\n  width: 30px;\n  height: 10px;\n\n  user-select: none;\n  background-color: rgba(0, 0, 0, 0.0);\n  /* backdrop-filter: blur(5px); */\n  border: none;\n  border-radius: 5px;\n  box-sizing: border-box;\n\n  text-align: center;\n  line-height: 10px;\n  white-space: nowrap;\n\n}\n\n.State-Bar {\n  position: absolute;\n  top: 0px;\n  height: 10px;\n\n  user-select: none;\n  background-color: rgba(0, 0, 0, 0.0);\n  /* backdrop-filter: blur(5px); */\n  border: none;\n  border-radius: 5px;\n  box-sizing: border-box;\n\n  display: flex;\n  justify-content: space-between;\n  font-size: 10px;\n\n  text-align: center;\n  line-height: 10px;\n  white-space: nowrap;\n}\n\n.Steps-Bar {\n  position: absolute;\n  top: 0px;\n  right: 5px;\n\n  width: 30px;\n  height: 10px;\n\n  user-select: none;\n  background-color: rgba(0, 0, 0, 0.0);\n  /* backdrop-filter: blur(5px); */\n  border: none;\n  border-radius: 5px;\n  box-sizing: border-box;\n\n  text-align: center;\n  line-height: 10px;\n  white-space: nowrap;\n}\n\n#Focus-Canvas {\n  width: 59px;\n  height: 58px;\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  background-color: rgba(0, 0, 0, 0.0);\n}\n\n.btn-calibration {\n  width: 30px;\n  height: 30px;\n\n  user-select: none;\n  background-color: rgba(64, 64, 64, 0.5);\n  backdrop-filter: blur(5px);\n  border: none;\n  border-radius: 50%;\n  box-sizing: border-box;\n}\n\n.active-calibration {\n  background-color: orange;\n  /* 校准时的背景色 */\n}\n\n.complete-calibration {\n  background-color: green;\n  /* 校准完成时的背景色 */\n}\n\n.error-calibration {\n  background-color: red;\n  /* 校准错误时的背景色 */\n}\n\n.btn-loop-shooting {\n  background-color: rgba(64, 64, 64, 0.5);\n  /* 默认背景色 */\n  backdrop-filter: blur(5px);\n  border: none;\n  border-radius: 5px;\n  padding: 5px 10px;\n}\n\n.active-loop {\n  background-color: green;\n  /* 激活时的背景色 */\n}\n\n.rotate-animation {\n  animation: rotate 2s linear infinite;\n}\n\n@keyframes rotate {\n  from {\n    transform: rotate(0deg);\n  }\n\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n.pulse-animation {\n  animation: pulse 1.5s ease-in-out infinite alternate;\n}\n\n@keyframes pulse {\n  from {\n    transform: scale(1);\n  }\n  to {\n    transform: scale(1.1);\n  }\n}\n\n\n</style>\n"]}]}